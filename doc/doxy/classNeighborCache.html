<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OverSim: NeighborCache Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<h1>NeighborCache Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="NeighborCache" --><!-- doxytag: inherits="BaseApp" -->
<p><code>#include &lt;<a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for NeighborCache:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classNeighborCache.png" usemap="#NeighborCache_map" alt=""/>
  <map id="NeighborCache_map" name="NeighborCache_map">
<area href="classBaseApp.html" alt="BaseApp" shape="rect" coords="57,112,162,136"/>
<area href="classBaseRpc.html" alt="BaseRpc" shape="rect" coords="0,56,105,80"/>
<area href="classBaseTcpSupport.html" alt="BaseTcpSupport" shape="rect" coords="115,56,220,80"/>
<area href="classRpcListener.html" alt="RpcListener" shape="rect" coords="0,0,105,24"/>
</map>
</div>

<p><a href="classNeighborCache-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structNeighborCache_1_1NeighborCacheEntry.html">NeighborCacheEntry</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structNeighborCache_1_1WaitingContext.html">WaitingContext</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#adbaa89b2beef3d6b0cf307bd3948efc5">~NeighborCache</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a2ce120e786b37cb5823d53f31ae82ff3">isEnabled</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a4a929e61a28c3dce307620d56056822f">sendBackOwnCoords</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classAbstractNcs.html">AbstractNcs</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#affdf04759fd1df8315954b8789d91eab">getNcsAccess</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a54e923d5f3f6ca83696e23cc466f8e09">getOverlayThisNode</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a23203e2d09c77efbba57a85212f2f9df">getNeighborCacheSize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a416f18a5fea738589845fd630d6cf071">isEntry</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;node)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a8a19fa241b9d8eda9092a93a4a41b9bb">getNodeAge</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a393f2dab8d25fcc23ad3c53cf9228080">getNodeHandle</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;add)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a23056db53fc60a2eaedf425b7370146e">getNodeTimeout</a> (const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;node)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Caclulation of reasonable timout value.  <a href="#a23056db53fc60a2eaedf425b7370146e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTransportAddress.html">TransportAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a2172131cd1f7e5958ad3e8c359ca3109">getNearestNode</a> (uint8_t maxLayer)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a850073aebd8d46ba5432ed79a62885c5">getAvgAbsPredictionError</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a057e94a37705dfab0ab1f91417603450">updateNode</a> (const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;add, simtime_t rtt, const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;srcRoute=<a class="el" href="classNodeHandle.html#a79bf2c5e29c969cbd0b2581cb188d8a6">NodeHandle::UNSPECIFIED_NODE</a>, <a class="el" href="classAbstractNcsNodeInfo.html">AbstractNcsNodeInfo</a> *ncsInfo=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a8b5247ae66c36e40addd51db3aa33a3c">updateNcsInfo</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;node, <a class="el" href="classAbstractNcsNodeInfo.html">AbstractNcsNodeInfo</a> *ncsInfo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a93099fadb692a42cbe4c0757f28cf0c3">setNodeTimeout</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structProx.html">Prox</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#ab934be8fb503f9629cf6eb83e7d1b576">getProx</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;node, <a class="el" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccb">NeighborCacheQueryType</a> type=NEIGHBORCACHE_AVAILABLE, int rpcId=-1, <a class="el" href="classProxListener.html">ProxListener</a> *listener=NULL, cPolymorphic *contextPointer=NULL)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the proximity of a node.  <a href="#ab934be8fb503f9629cf6eb83e7d1b576"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structProx.html">Prox</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a1d0b6dc71b5933f46f888100c8aaf70a">estimateProx</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;node)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Estimates a <a class="el" href="structProx.html">Prox</a> value of node, in relation to this node, based on information collected by the overlay.  <a href="#a1d0b6dc71b5933f46f888100c8aaf70a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classAbstractNcsNodeInfo.html">AbstractNcsNodeInfo</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a5bfc95cec29a0c320e3586629fb85504">getNodeCoordsInfo</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;node)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the coordinate information of a node.  <a href="#a5bfc95cec29a0c320e3586629fb85504"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::pair&lt; simtime_t, simtime_t &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#af02289b6b99c9b1e7c902175ef76d175">getMeanVarRtt</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;node, bool returnVar)</td></tr>
<tr><td colspan="2"><h2><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef UNORDERED_MAP<br class="typebreak"/>
&lt; <a class="el" href="classTransportAddress.html">TransportAddress</a>, <br class="typebreak"/>
<a class="el" href="structNeighborCache_1_1NeighborCacheEntry.html">NeighborCacheEntry</a> &gt;::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#aed1572b2a597a0654f4d355760aa5942">NeighborCacheIterator</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef UNORDERED_MAP<br class="typebreak"/>
&lt; <a class="el" href="classTransportAddress.html">TransportAddress</a>, <br class="typebreak"/>
<a class="el" href="structNeighborCache_1_1NeighborCacheEntry.html">NeighborCacheEntry</a> &gt;<br class="typebreak"/>
::const_iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a81f00b07e9a47f134156759e5b878443">NeighborCacheConstIterator</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::multimap<br class="typebreak"/>
&lt; simtime_t, <a class="el" href="classTransportAddress.html">TransportAddress</a> &gt;<br class="typebreak"/>
::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a7f7da64944cfeee91fcecb1d5fb23dd9">neighborCacheExpireMapIterator</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a9d114395eec6daa793b36bca06e24a22">initializeApp</a> (int stage)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">initializes derived class-attributes  <a href="#a9d114395eec6daa793b36bca06e24a22"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#aaad39bfe85c0214910e38f774d53ab1a">finishApp</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">collects statistical data of derived app  <a href="#aaad39bfe85c0214910e38f774d53ab1a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#aa6aafdbff910a02b3dc631a57f2b3ac4">getThisCompType</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a5af17618e8a3b6625d89b05109713714">handleReadyMessage</a> (<a class="el" href="classCompReadyMessage.html">CompReadyMessage</a> *readyMsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">method to handle ready messages from the overlay  <a href="#a5af17618e8a3b6625d89b05109713714"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a54e488bca853c3d1b4ea1480fefc81e8">handleTimerEvent</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#aab267d208202e7bf8dc1c7aecc66b550">queryProx</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;node, int rpcId, <a class="el" href="classProxListener.html">ProxListener</a> *listener, cPolymorphic *contextPointer)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends a pingNode call based on parameters from a getProx call.  <a href="#aab267d208202e7bf8dc1c7aecc66b550"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a0b7a352cb7d5eb83c9a04b1e0f52a5d0">handleRpcCall</a> (<a class="el" href="classBaseCallMessage.html">BaseCallMessage</a> *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Coord / RTT measuring rpc stuff goes here.  <a href="#a0b7a352cb7d5eb83c9a04b1e0f52a5d0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a1ba760d3b98f17dd3951ba64ec54e30f">getRttBasedTimeout</a> (const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;node)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#aa6f7beabed784d0269bfde141217557c">getNcsBasedTimeout</a> (const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;node)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classGlobalStatistics.html">GlobalStatistics</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a0ffa19a84d406ad8de4b86148a5879ad">globalStatistics</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">pointer to <a class="el" href="classGlobalStatistics.html" title="Module to record global statistics.">GlobalStatistics</a> module in this node  <a href="#a0ffa19a84d406ad8de4b86148a5879ad"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">UNORDERED_MAP<br class="typebreak"/>
&lt; <a class="el" href="classTransportAddress.html">TransportAddress</a>, <br class="typebreak"/>
<a class="el" href="structNeighborCache_1_1NeighborCacheEntry.html">NeighborCacheEntry</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::multimap&lt; simtime_t, <br class="typebreak"/>
<a class="el" href="classTransportAddress.html">TransportAddress</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a></td></tr>
<tr><td colspan="2"><h2><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99">NeighborCacheRttState</a> { <a class="el" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99ad335b9827dedaf0b54e8f8f85a9ed56f">RTTSTATE_VALID</a>, 
<a class="el" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a9bcd0d18a9801aa587532affb6374eea">RTTSTATE_UNKNOWN</a>, 
<a class="el" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99add78d4f762a1db85d7609729b2a5267c">RTTSTATE_TIMEOUT</a>, 
<a class="el" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a8a3460a12b4cd0b4d6d89d58fffc3ac0">RTTSTATE_WAITING</a>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::vector<br class="typebreak"/>
&lt; <a class="el" href="structNeighborCache_1_1WaitingContext.html">WaitingContext</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#aa690fa08dd5460980e15bae581ef04d4">WaitingContexts</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::pair&lt; simtime_t, <br class="typebreak"/>
<a class="el" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99">NeighborCacheRttState</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#ad6b6e27419b9657874d3517f2cc62dcf">Rtt</a></td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#acd2bd11282ed8d69d6291946a184b127">cleanupCache</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a77a2ecd09d989f19bc2c0cf7e9f0e5b8">updateEntry</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;address, simtime_t insertTime)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structProx.html">Prox</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#ad9e7edece1f862fc607302542a62879b">getCoordinateBasedProx</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;node)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a49df2e4d4466e2265d8357cb926fdd6b">calcRttError</a> (const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;handle, simtime_t rtt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a414a936f37e71490de6af0eda317fa83">insertNodeContext</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;handle, cPolymorphic *context, <a class="el" href="classProxListener.html">ProxListener</a> *rpcListener, int rpcId)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classNeighborCache.html#aa690fa08dd5460980e15bae581ef04d4">NeighborCache::WaitingContexts</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a2dae7f2c34de3d5ce4e9032f0b00c07b">getNodeContexts</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classNeighborCache.html#ad6b6e27419b9657874d3517f2cc62dcf">Rtt</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#ab94f734ab0667605962f2bb4f315e9f1">getNodeRtt</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;add)</td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a14ea96324f1a0c102dee609d89cff72a">enableNeighborCache</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#ae84275609455b48546032bf90bce345c">doDiscovery</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#ab3ba13a3310b16ef691ee52eac897c72">rttExpirationTime</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#aacdd8a0ee2a9e893e21caf58cceb8576">maxSize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a54211a9fd7c6562ff15323e5b9863814">misses</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a39da5066d1b99988174cc8546564600b">hits</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classAbstractNcs.html">AbstractNcs</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a6a13a919c91088a2399db94516c590dc">ncsSendBackOwnCoords</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccb">NeighborCacheQueryType</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a11a4145a2f976de746ffb5eb80b8720e">defaultQueryType</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccb">NeighborCacheQueryType</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a88e4d57df1eece811a04c75c2eb61c00">defaultQueryTypeI</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccb">NeighborCacheQueryType</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a8a01390ead6fc76dcc7d76e5e2253481">defaultQueryTypeQ</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a850be66fd299373b7843c92378b4d54a">landmarkTimer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classTransportAddress.html">TransportAddress</a>, <br class="typebreak"/>
std::vector&lt; double &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#ad25610d40940fb6395a623bcb3b4a612">lastAbsoluteErrorPerNode</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a22a9c8f9d8054711dd9b4c972940fdcd">numMsg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a3a41df8495c9a6b70fc715e308a8ea2d">absoluteError</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a2a635befdb541a1d491b23fe52616370">relativeError</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a5de22621c8d7fa8bbe85e49d3b6b8927">numRttErrorToHigh</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a86b66679e384f12f73bd4dbcc770f8e6">numRttErrorToLow</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a825fc8881da994d38c7574ecfc110f4d">rttHistory</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a05ae665acfd7d6504d624d69a95428ef">timeoutAccuracyLimit</a></td></tr>
<tr><td colspan="2"><h2><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const std::vector&lt; double &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a306e1f0b6cdea15e32762ce421d1734a">coordsDummy</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#abf8f22a91e7e5bb6095df851e586858f">RTT_TIMEOUT_ADJUSTMENT</a> = 1.3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#ab645ed14a47c403b86243192fcbfa27c">NCS_TIMEOUT_CONSTANT</a> = 0.25</td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#a936e38853be592103df5f12cd5d5924a">Nps</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNeighborCache.html#ac08e4d48d12d21383076ed55ae3959a3">operator&lt;&lt;</a> (std::ostream &amp;os, const <a class="el" href="structNeighborCache_1_1NeighborCacheEntry.html">NeighborCacheEntry</a> &amp;entry)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00069">69</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a81f00b07e9a47f134156759e5b878443"></a><!-- doxytag: member="NeighborCache::NeighborCacheConstIterator" ref="a81f00b07e9a47f134156759e5b878443" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef UNORDERED_MAP&lt;<a class="el" href="classTransportAddress.html">TransportAddress</a>, <a class="el" href="structNeighborCache_1_1NeighborCacheEntry.html">NeighborCacheEntry</a>&gt;::const_iterator <a class="el" href="classNeighborCache.html#a81f00b07e9a47f134156759e5b878443">NeighborCache::NeighborCacheConstIterator</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00175">175</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7f7da64944cfeee91fcecb1d5fb23dd9"></a><!-- doxytag: member="NeighborCache::neighborCacheExpireMapIterator" ref="a7f7da64944cfeee91fcecb1d5fb23dd9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::multimap&lt;simtime_t, <a class="el" href="classTransportAddress.html">TransportAddress</a>&gt;::iterator <a class="el" href="classNeighborCache.html#a7f7da64944cfeee91fcecb1d5fb23dd9">NeighborCache::neighborCacheExpireMapIterator</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00178">178</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

</div>
</div>
<a class="anchor" id="aed1572b2a597a0654f4d355760aa5942"></a><!-- doxytag: member="NeighborCache::NeighborCacheIterator" ref="aed1572b2a597a0654f4d355760aa5942" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef UNORDERED_MAP&lt;<a class="el" href="classTransportAddress.html">TransportAddress</a>, <a class="el" href="structNeighborCache_1_1NeighborCacheEntry.html">NeighborCacheEntry</a>&gt;::iterator <a class="el" href="classNeighborCache.html#aed1572b2a597a0654f4d355760aa5942">NeighborCache::NeighborCacheIterator</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00174">174</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad6b6e27419b9657874d3517f2cc62dcf"></a><!-- doxytag: member="NeighborCache::Rtt" ref="ad6b6e27419b9657874d3517f2cc62dcf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::pair&lt;simtime_t, <a class="el" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99">NeighborCacheRttState</a>&gt; <a class="el" href="classNeighborCache.html#ad6b6e27419b9657874d3517f2cc62dcf">NeighborCache::Rtt</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00140">140</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa690fa08dd5460980e15bae581ef04d4"></a><!-- doxytag: member="NeighborCache::WaitingContexts" ref="aa690fa08dd5460980e15bae581ef04d4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="structNeighborCache_1_1WaitingContext.html">WaitingContext</a>&gt; <a class="el" href="classNeighborCache.html#aa690fa08dd5460980e15bae581ef04d4">NeighborCache::WaitingContexts</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00123">123</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

</div>
</div>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="aefe728f567b9040c8c01c8bbf93d9c99"></a><!-- doxytag: member="NeighborCache::NeighborCacheRttState" ref="aefe728f567b9040c8c01c8bbf93d9c99" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99">NeighborCache::NeighborCacheRttState</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="aefe728f567b9040c8c01c8bbf93d9c99ad335b9827dedaf0b54e8f8f85a9ed56f"></a><!-- doxytag: member="RTTSTATE_VALID" ref="aefe728f567b9040c8c01c8bbf93d9c99ad335b9827dedaf0b54e8f8f85a9ed56f" args="" -->RTTSTATE_VALID</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aefe728f567b9040c8c01c8bbf93d9c99a9bcd0d18a9801aa587532affb6374eea"></a><!-- doxytag: member="RTTSTATE_UNKNOWN" ref="aefe728f567b9040c8c01c8bbf93d9c99a9bcd0d18a9801aa587532affb6374eea" args="" -->RTTSTATE_UNKNOWN</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aefe728f567b9040c8c01c8bbf93d9c99add78d4f762a1db85d7609729b2a5267c"></a><!-- doxytag: member="RTTSTATE_TIMEOUT" ref="aefe728f567b9040c8c01c8bbf93d9c99add78d4f762a1db85d7609729b2a5267c" args="" -->RTTSTATE_TIMEOUT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aefe728f567b9040c8c01c8bbf93d9c99a8a3460a12b4cd0b4d6d89d58fffc3ac0"></a><!-- doxytag: member="RTTSTATE_WAITING" ref="aefe728f567b9040c8c01c8bbf93d9c99a8a3460a12b4cd0b4d6d89d58fffc3ac0" args="" -->RTTSTATE_WAITING</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00133">133</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p><div class="fragment"><pre class="fragment">                               {
        RTTSTATE_VALID,
        RTTSTATE_UNKNOWN,
        RTTSTATE_TIMEOUT,
        <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a8a3460a12b4cd0b4d6d89d58fffc3ac0">RTTSTATE_WAITING</a>
    };
</pre></div></p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="adbaa89b2beef3d6b0cf307bd3948efc5"></a><!-- doxytag: member="NeighborCache::~NeighborCache" ref="adbaa89b2beef3d6b0cf307bd3948efc5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NeighborCache::~NeighborCache </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00166">166</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keyword">delete</span> <a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a>;
}
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a49df2e4d4466e2265d8357cb926fdd6b"></a><!-- doxytag: member="NeighborCache::calcRttError" ref="a49df2e4d4466e2265d8357cb926fdd6b" args="(const NodeHandle &amp;handle, simtime_t rtt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NeighborCache::calcRttError </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&nbsp;</td>
          <td class="paramname"> <em>rtt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00740">740</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00264">updateNode()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a>) <span class="keywordflow">return</span>;

    <span class="comment">// Check if data collection can start</span>
    <span class="keywordflow">if</span> (!<a class="code" href="classNeighborCache.html#a0ffa19a84d406ad8de4b86148a5879ad" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#ac7fcc2200ed2da08e8f8b8b957c0c1dd">isMeasuring</a>()) <span class="keywordflow">return</span>;

    <a class="code" href="structProx.html">Prox</a> prox = <a class="code" href="classNeighborCache.html#ad9e7edece1f862fc607302542a62879b">getCoordinateBasedProx</a>(handle);
    <span class="keywordflow">if</span> (prox == <a class="code" href="structProx.html#aa7ac832a04fe61863222d8631526647b">Prox::PROX_UNKNOWN</a>) <span class="keywordflow">return</span>;

    <span class="comment">//calculate absolute rtt error of the last message</span>
    <span class="keywordtype">double</span> tempRttError = prox.<a class="code" href="structProx.html#aeb8eca3cac2c681c5e7f1060fcbd7b6f">proximity</a> - SIMTIME_DBL(rtt);

    <span class="keywordflow">if</span> (tempRttError &lt; 0){
        tempRttError *= -1;
        ++<a class="code" href="classNeighborCache.html#a86b66679e384f12f73bd4dbcc770f8e6">numRttErrorToLow</a>;
    } <span class="keywordflow">else</span> ++<a class="code" href="classNeighborCache.html#a5de22621c8d7fa8bbe85e49d3b6b8927">numRttErrorToHigh</a>;

    <a class="code" href="classNeighborCache.html#a22a9c8f9d8054711dd9b4c972940fdcd">numMsg</a>++;
    <a class="code" href="classNeighborCache.html#a3a41df8495c9a6b70fc715e308a8ea2d">absoluteError</a> += tempRttError;
    <a class="code" href="classNeighborCache.html#a2a635befdb541a1d491b23fe52616370">relativeError</a> += tempRttError / SIMTIME_DBL(rtt);

    <a class="code" href="classNeighborCache.html#a0ffa19a84d406ad8de4b86148a5879ad" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#aa41614baf1d51fab0904abb41b642234" title="Record a value to a global cOutVector defined by name.">recordOutVector</a>(<span class="stringliteral">&quot;NCS: absolute Rtt Error&quot;</span>,
                                      tempRttError);
    <a class="code" href="classNeighborCache.html#a0ffa19a84d406ad8de4b86148a5879ad" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#aa41614baf1d51fab0904abb41b642234" title="Record a value to a global cOutVector defined by name.">recordOutVector</a>(<span class="stringliteral">&quot;NCS: relative Rtt Error&quot;</span>,
                                      (tempRttError / SIMTIME_DBL(rtt)));
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="acd2bd11282ed8d69d6291946a184b127"></a><!-- doxytag: member="NeighborCache::cleanupCache" ref="acd2bd11282ed8d69d6291946a184b127" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool NeighborCache::cleanupCache </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00416">416</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00171">insertNodeContext()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00695">queryProx()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00227">setNodeTimeout()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00344">updateNcsInfo()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00264">updateNode()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;
    uint32_t size = <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.size();

    <span class="keywordflow">if</span> (size &gt; <a class="code" href="classNeighborCache.html#aacdd8a0ee2a9e893e21caf58cceb8576">maxSize</a>) {
        <a class="code" href="classNeighborCache.html#a7f7da64944cfeee91fcecb1d5fb23dd9">neighborCacheExpireMapIterator</a> it;
        <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; (size - (<a class="code" href="classNeighborCache.html#aacdd8a0ee2a9e893e21caf58cceb8576">maxSize</a> / 2)); ++i) {
            it = <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.begin();
            <span class="keywordflow">if</span> ((<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[it-&gt;second].rttState == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a8a3460a12b4cd0b4d6d89d58fffc3ac0">RTTSTATE_WAITING</a>) ||
                (<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[it-&gt;second].insertTime == simTime())) {
                <span class="keywordflow">break</span>;
            }
            <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.erase(it-&gt;second);
            <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.erase(it);
            result = <span class="keyword">true</span>;
        }
    }
    assert(<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.size() == <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.size());
    <span class="keywordflow">return</span> result;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1d0b6dc71b5933f46f888100c8aaf70a"></a><!-- doxytag: member="NeighborCache::estimateProx" ref="a1d0b6dc71b5933f46f888100c8aaf70a" args="(const TransportAddress &amp;node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structProx.html">Prox</a> NeighborCache::estimateProx </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Estimates a <a class="el" href="structProx.html">Prox</a> value of node, in relation to this node, based on information collected by the overlay. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>node</em>&nbsp;</td><td>The node whose proximity will be requested. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The RTT value if one is found in the cache, or else a <a class="el" href="structProx.html">Prox</a> estimate. </dd></dl>

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00680">680</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00577">getProx()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    Enter_Method(<span class="stringliteral">&quot;estimateProx()&quot;</span>);

    <a class="code" href="classNeighborCache.html#ad6b6e27419b9657874d3517f2cc62dcf">Rtt</a> rtt = <a class="code" href="classNeighborCache.html#ab94f734ab0667605962f2bb4f315e9f1">getNodeRtt</a>(node);

    <span class="keywordflow">if</span> (rtt.second != <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a9bcd0d18a9801aa587532affb6374eea">RTTSTATE_UNKNOWN</a>) <span class="keywordflow">return</span> rtt.first;

    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a> &amp;&amp; <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.count(node)) {
        <span class="keywordflow">return</span> <a class="code" href="classNeighborCache.html#ad9e7edece1f862fc607302542a62879b">getCoordinateBasedProx</a>(node);
    }

    <span class="keywordflow">return</span> <a class="code" href="structProx.html#aa7ac832a04fe61863222d8631526647b">Prox::PROX_UNKNOWN</a>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="aaad39bfe85c0214910e38f774d53ab1a"></a><!-- doxytag: member="NeighborCache::finishApp" ref="aaad39bfe85c0214910e38f774d53ab1a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NeighborCache::finishApp </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>collects statistical data of derived app </p>

<p>Reimplemented from <a class="el" href="classBaseApp.html#a9702f80de642a3e090aaf5bedea8e4a6">BaseApp</a>.</p>

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00143">143</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ((<a class="code" href="classNeighborCache.html#a54211a9fd7c6562ff15323e5b9863814">misses</a> + <a class="code" href="classNeighborCache.html#a39da5066d1b99988174cc8546564600b">hits</a>) != 0) {
        <a class="code" href="classNeighborCache.html#a0ffa19a84d406ad8de4b86148a5879ad" title="pointer to GlobalStatistics module in this node">globalStatistics</a>
            -&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;NeighborCache: Ping hit rate&quot;</span>,
                        ((<span class="keywordtype">double</span>)<a class="code" href="classNeighborCache.html#a39da5066d1b99988174cc8546564600b">hits</a> / (<span class="keywordtype">double</span>)(<a class="code" href="classNeighborCache.html#a54211a9fd7c6562ff15323e5b9863814">misses</a> + <a class="code" href="classNeighborCache.html#a39da5066d1b99988174cc8546564600b">hits</a>)));
    }

    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a> &amp;&amp; <a class="code" href="classNeighborCache.html#a22a9c8f9d8054711dd9b4c972940fdcd">numMsg</a> &gt; 0) {
        <a class="code" href="classNeighborCache.html#a0ffa19a84d406ad8de4b86148a5879ad" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;NeighborCache: NCS absolute RTT error&quot;</span>,
                                    <a class="code" href="classNeighborCache.html#a3a41df8495c9a6b70fc715e308a8ea2d">absoluteError</a> / (<span class="keywordtype">double</span>)<a class="code" href="classNeighborCache.html#a22a9c8f9d8054711dd9b4c972940fdcd">numMsg</a>);
        <a class="code" href="classNeighborCache.html#a0ffa19a84d406ad8de4b86148a5879ad" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;NeighborCache: NCS relative RTT error&quot;</span>,
                                    <a class="code" href="classNeighborCache.html#a2a635befdb541a1d491b23fe52616370">relativeError</a> / (<span class="keywordtype">double</span>)numMsg);
        <a class="code" href="classNeighborCache.html#a0ffa19a84d406ad8de4b86148a5879ad" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;NeighborCache: number of messages/s&quot;</span>,
                                    numMsg / SIMTIME_DBL(simTime() - <a class="code" href="classBaseApp.html#ac365b8c1cb45fb1e37f95535936a0f31" title="simTime when the App has been created">creationTime</a>));
        <a class="code" href="classNeighborCache.html#a0ffa19a84d406ad8de4b86148a5879ad" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;NeighborCache: NCS percentage of RTT errors to high&quot;</span>,
                                    (<span class="keywordtype">double</span>)<a class="code" href="classNeighborCache.html#a5de22621c8d7fa8bbe85e49d3b6b8927">numRttErrorToHigh</a> / (<span class="keywordtype">double</span>)numMsg);
        <a class="code" href="classNeighborCache.html#a0ffa19a84d406ad8de4b86148a5879ad" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;NeighborCache: NCS percentage of RTT errors to low&quot;</span>,
                                    (<span class="keywordtype">double</span>)<a class="code" href="classNeighborCache.html#a86b66679e384f12f73bd4dbcc770f8e6">numRttErrorToLow</a> / (<span class="keywordtype">double</span>)numMsg);
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a850073aebd8d46ba5432ed79a62885c5"></a><!-- doxytag: member="NeighborCache::getAvgAbsPredictionError" ref="a850073aebd8d46ba5432ed79a62885c5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double NeighborCache::getAvgAbsPredictionError </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00481">481</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="SVivaldi_8cc_source.html#l00043">SVivaldi::calcError()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">/*</span>
<span class="comment">    //TODO retain and consider the last measured RTTs not the last error(s)</span>
<span class="comment">    double absoluteDiff = 0.0;</span>
<span class="comment">    uint32_t numNeighbors = 0;</span>
<span class="comment"></span>
<span class="comment">    for (std::map&lt;TransportAddress, std::vector&lt;double&gt; &gt;::iterator it =</span>
<span class="comment">        lastAbsoluteErrorPerNode.begin(); it != lastAbsoluteErrorPerNode.end();</span>
<span class="comment">        it++) {</span>
<span class="comment">        double tempAbsoluteDiff = 0.0;</span>
<span class="comment">        for (uint32_t i = 0; i &lt; it-&gt;second.size(); i++) {</span>
<span class="comment">            tempAbsoluteDiff += it-&gt;second.at(i);</span>
<span class="comment">        }</span>
<span class="comment">        absoluteDiff += (tempAbsoluteDiff / it-&gt;second.size());</span>
<span class="comment">        numNeighbors++;</span>
<span class="comment">    }</span>
<span class="comment"></span>
<span class="comment">    absoluteDiff /= numNeighbors;</span>
<span class="comment">    return (absoluteDiff &gt; 1.0) ? 1.0 : absoluteDiff;</span>
<span class="comment">     */</span>

    <span class="comment">// old version</span>
    <span class="comment">//if (neighborCache.size() &lt; 2 || sampleSize == 0) return 1.0;</span>

    <span class="keywordtype">double</span> absoluteDiff = 0;
    uint32_t numNeighbors = 0;
    uint32_t sampleSize = 32; <span class="comment">//test</span>

    <span class="keywordflow">for</span> (std::map&lt;simtime_t, TransportAddress&gt;::reverse_iterator it =
         <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.rbegin();
         it != <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.rend() &amp;&amp;
         numNeighbors &lt; sampleSize; ++it) {
        NeighborCacheEntry&amp; cacheEntry = <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[it-&gt;second];

        <span class="keywordtype">double</span> dist = <a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a>-&gt;<a class="code" href="classAbstractNcs.html#afb2c12a5b86a18f15f7a47a95d8bfc4e">getOwnNcsInfo</a>().<a class="code" href="classAbstractNcsNodeInfo.html#aeafc338042632a38a41e25bf203aa169">getDistance</a>(*cacheEntry.coordsInfo);

        <span class="keywordflow">if</span> (dist != 0 &amp;&amp; cacheEntry.rttState == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99ad335b9827dedaf0b54e8f8f85a9ed56f">RTTSTATE_VALID</a>) {
            <span class="keywordtype">double</span> predictionError = fabs(dist - SIMTIME_DBL(cacheEntry.rtt));

            <span class="comment">//test: error weighted</span>
            <span class="comment">//if (it-&gt;second.coordErr &lt; 1) {</span>
            <span class="comment">//    predictionError /= it-&gt;second.coordErr;</span>
            <span class="comment">//}</span>
            <span class="comment">//test: age weighted</span>
            <span class="comment">//if ((simTime() - it-&gt;second.insertTime) &gt; 1) {</span>
            <span class="comment">//    predictionError /= (simTime() - it-&gt;second.insertTime);</span>
            <span class="comment">//}</span>

            numNeighbors++;
            absoluteDiff += predictionError;
        }
    }
    assert(numNeighbors != 0);
    absoluteDiff /= numNeighbors;

    <span class="keywordflow">return</span> (absoluteDiff &gt; 1.0) ? 1.0 : absoluteDiff;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad9e7edece1f862fc607302542a62879b"></a><!-- doxytag: member="NeighborCache::getCoordinateBasedProx" ref="ad9e7edece1f862fc607302542a62879b" args="(const TransportAddress &amp;node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structProx.html">Prox</a> NeighborCache::getCoordinateBasedProx </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00720">720</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00740">calcRttError()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00680">estimateProx()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a> &amp;&amp; <a class="code" href="classNeighborCache.html#a416f18a5fea738589845fd630d6cf071">isEntry</a>(node)) {
        <span class="keyword">const</span> <a class="code" href="classAbstractNcsNodeInfo.html">AbstractNcsNodeInfo</a>* temp = <a class="code" href="classNeighborCache.html#a5bfc95cec29a0c320e3586629fb85504" title="Returns the coordinate information of a node.">getNodeCoordsInfo</a>(node);
        <span class="keywordflow">if</span> (temp) <span class="keywordflow">return</span> <a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a>-&gt;<a class="code" href="classAbstractNcs.html#a448ab29cb9bd376b3181f1e5f282a98c">getCoordinateBasedProx</a>(*temp);
    }
    <span class="keywordflow">return</span> <a class="code" href="structProx.html#aa7ac832a04fe61863222d8631526647b">Prox::PROX_UNKNOWN</a>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="af02289b6b99c9b1e7c902175ef76d175"></a><!-- doxytag: member="NeighborCache::getMeanVarRtt" ref="af02289b6b99c9b1e7c902175ef76d175" args="(const TransportAddress &amp;node, bool returnVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; simtime_t, simtime_t &gt; NeighborCache::getMeanVarRtt </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>returnVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00769">769</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00811">getRttBasedTimeout()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.count(node) == 0) {
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;NeighborCache.cc: getMeanVarRtt was asked for&quot;</span>
                            <span class="stringliteral">&quot;a non-existent node reference.&quot;</span>);
    }

    uint16_t size = <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[node].lastRtts.size();
    <span class="keywordflow">if</span> (size == 0) <span class="keywordflow">return</span> std::make_pair(-1.0,-1.0);

    simtime_t rttSum = 0;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; i++){
        rttSum += <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[node].lastRtts[i];
    }
    simtime_t meanRtt = rttSum / size;
    <span class="keywordflow">if</span> (!returnVar) {
        <span class="keywordflow">return</span> std::make_pair(meanRtt, -1.0);
    }
    <span class="keywordflow">if</span> (size == 1) {
        <span class="keywordflow">return</span> std::make_pair(meanRtt, 0.0);
    }

    <span class="keywordtype">double</span> sum = 0.0;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; i++){
        simtime_t tempRtt = <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[node].lastRtts.at(i) - meanRtt;
        sum += (SIMTIME_DBL(tempRtt) * SIMTIME_DBL(tempRtt));
    }

    <span class="keywordflow">return</span> std::make_pair(meanRtt, (sum / size));
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="affdf04759fd1df8315954b8789d91eab"></a><!-- doxytag: member="NeighborCache::getNcsAccess" ref="affdf04759fd1df8315954b8789d91eab" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classAbstractNcs.html">AbstractNcs</a>&amp; NeighborCache::getNcsAccess </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00216">216</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="Landmark_8cc_source.html#l00079">Landmark::finishApp()</a>, <a class="el" href="CBR-DHT_8cc_source.html#l00417">CBRDHT::handleGetCAPIRequest()</a>, <a class="el" href="Landmark_8cc_source.html#l00039">Landmark::initializeApp()</a>, <a class="el" href="BaseRpc_8cc_source.html#l00293">BaseRpc::internalHandleRpcMessage()</a>, and <a class="el" href="BaseRpc_8cc_source.html#l00531">BaseRpc::sendRpcResponse()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                            {
        <span class="keywordflow">if</span> (!<a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a>) <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;No NCS activated&quot;</span>);
        <span class="keywordflow">else</span> <span class="keywordflow">return</span> *<a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a>;
    };
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa6f7beabed784d0269bfde141217557c"></a><!-- doxytag: member="NeighborCache::getNcsBasedTimeout" ref="aa6f7beabed784d0269bfde141217557c" args="(const NodeHandle &amp;node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t NeighborCache::getNcsBasedTimeout </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00838">838</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00802">getNodeTimeout()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordtype">double</span> timeout = -1;
    <a class="code" href="structProx.html">Prox</a> prox = <a class="code" href="structProx.html#aa7ac832a04fe61863222d8631526647b">Prox::PROX_UNKNOWN</a>;

    <span class="comment">// check if an entry is available in NeighborCache</span>
    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#a416f18a5fea738589845fd630d6cf071">isEntry</a>(node)) {
        prox = <a class="code" href="classNeighborCache.html#ab934be8fb503f9629cf6eb83e7d1b576" title="Gets the proximity of a node.">getProx</a>(node, <a class="code" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccbab3073985667b1e3eb2215dbd96359fa9">NEIGHBORCACHE_ESTIMATED</a>);

        <span class="keywordflow">if</span> (prox != <a class="code" href="structProx.html#aa7ac832a04fe61863222d8631526647b">Prox::PROX_UNKNOWN</a>  &amp;&amp; prox != <a class="code" href="structProx.html#a5ded765f6344797ea0e9c35c85cd61af">Prox::PROX_TIMEOUT</a> &amp;&amp;
            prox.<a class="code" href="structProx.html#aeb8eca3cac2c681c5e7f1060fcbd7b6f">proximity</a> &gt; 0 &amp;&amp; prox.<a class="code" href="structProx.html#a74cc898fbab0f32238e92c530c27183c">accuracy</a> &gt; <a class="code" href="classNeighborCache.html#a05ae665acfd7d6504d624d69a95428ef">timeoutAccuracyLimit</a>) {
            timeout = prox.<a class="code" href="structProx.html#aeb8eca3cac2c681c5e7f1060fcbd7b6f">proximity</a> + (6 * (1 - prox.<a class="code" href="structProx.html#a74cc898fbab0f32238e92c530c27183c">accuracy</a>));
            timeout += <a class="code" href="classNeighborCache.html#ab645ed14a47c403b86243192fcbfa27c">NCS_TIMEOUT_CONSTANT</a>;
        } <span class="keywordflow">else</span> <span class="keywordflow">return</span> -1;

        <span class="keywordflow">if</span> (<span class="comment">/*timeout &gt; SIMTIME_DBL(defaultTimeout) ||*/</span> timeout &lt; 0)
            <span class="keywordflow">return</span> -1;
    }
    <span class="keywordflow">return</span> timeout;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2172131cd1f7e5958ad3e8c359ca3109"></a><!-- doxytag: member="NeighborCache::getNearestNode" ref="a2172131cd1f7e5958ad3e8c359ca3109" args="(uint8_t maxLayer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTransportAddress.html">TransportAddress</a> NeighborCache::getNearestNode </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>maxLayer</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00452">452</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> nearestNode = <a class="code" href="classTransportAddress.html#ac1709545db722cbbce1367034142d31f" title="TransportAddress without specified ip and port.">TransportAddress::UNSPECIFIED_NODE</a>;
    simtime_t nearestNodeRtt = MAXTIME;
    <a class="code" href="classNeighborCache.html#aed1572b2a597a0654f4d355760aa5942">NeighborCacheIterator</a> it;

    <span class="keywordflow">for</span>(it = <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.begin(); it != <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.end(); it++ ) {
        <span class="keywordflow">if</span> (it-&gt;second.rtt &lt; nearestNodeRtt &amp;&amp;
            it-&gt;second.rtt &gt; 0 <span class="comment">/*&amp;&amp;</span>
<span class="comment">            it-&gt;second.coordsInfo.npsLayer &lt; maxLayer+1 &amp;&amp;</span>
<span class="comment">            it-&gt;second.coordsInfo.npsLayer &gt; 0*/</span>) {
            nearestNode.<a class="code" href="classTransportAddress.html#a1c7b834dc2e6e738f1f4db8711a12814" title="Sets the ip address, port and NAT type.">setIp</a>(it-&gt;first.getIp());
            nearestNodeRtt = it-&gt;second.rtt;
            nearestNode.<a class="code" href="classTransportAddress.html#a46a1b53760e5f2d3f8af8c9591160a48" title="sets this-&amp;gt;port to the given port">setPort</a>(it-&gt;second.nodeRef.getPort());
        }
    }

    <span class="keywordflow">return</span> nearestNode;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a23203e2d09c77efbba57a85212f2f9df"></a><!-- doxytag: member="NeighborCache::getNeighborCacheSize" ref="a23203e2d09c77efbba57a85212f2f9df" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t NeighborCache::getNeighborCacheSize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00223">223</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.size(); };
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8a19fa241b9d8eda9092a93a4a41b9bb"></a><!-- doxytag: member="NeighborCache::getNodeAge" ref="a8a19fa241b9d8eda9092a93a4a41b9bb" args="(const TransportAddress &amp;handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t NeighborCache::getNodeAge </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>handle</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2dae7f2c34de3d5ce4e9032f0b00c07b"></a><!-- doxytag: member="NeighborCache::getNodeContexts" ref="a2dae7f2c34de3d5ce4e9032f0b00c07b" args="(const TransportAddress &amp;handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNeighborCache.html#aa690fa08dd5460980e15bae581ef04d4">NeighborCache::WaitingContexts</a> NeighborCache::getNodeContexts </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>handle</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00216">216</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00227">setNodeTimeout()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00264">updateNode()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.count(handle) == 0)
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;NeighborCache error!&quot;</span>);
    <a class="code" href="classNeighborCache.html#aa690fa08dd5460980e15bae581ef04d4">WaitingContexts</a> temp = <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[handle].waitingContexts;
    <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[handle].waitingContexts.clear();

    <span class="keywordflow">return</span> temp;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5bfc95cec29a0c320e3586629fb85504"></a><!-- doxytag: member="NeighborCache::getNodeCoordsInfo" ref="a5bfc95cec29a0c320e3586629fb85504" args="(const TransportAddress &amp;node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classAbstractNcsNodeInfo.html">AbstractNcsNodeInfo</a> * NeighborCache::getNodeCoordsInfo </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the coordinate information of a node. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>node</em>&nbsp;</td><td>The node whose coordinate information will be requested. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The coordinate information. </dd></dl>

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00730">730</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="Nps_8cc_source.html#l00207">Nps::coordsReqRpcResponse()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00720">getCoordinateBasedProx()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.count(node) == 0) {
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;NeighborCache.cc: getNodeCoords was asked for &quot;</span>
                            <span class="stringliteral">&quot;a non-existent node reference.&quot;</span>);
    }
    <span class="keywordflow">return</span> <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[node].coordsInfo;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a393f2dab8d25fcc23ad3c53cf9228080"></a><!-- doxytag: member="NeighborCache::getNodeHandle" ref="a393f2dab8d25fcc23ad3c53cf9228080" args="(const TransportAddress &amp;add)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp; NeighborCache::getNodeHandle </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>add</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00406">406</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.count(add) == 0) {
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;NeighborCache.cc: getNodeHandle was asked for &quot;</span>
                            <span class="stringliteral">&quot;a non-existent node reference.&quot;</span>);
    }
    <span class="keywordflow">return</span> <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[add].nodeRef;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab94f734ab0667605962f2bb4f315e9f1"></a><!-- doxytag: member="NeighborCache::getNodeRtt" ref="ab94f734ab0667605962f2bb4f315e9f1" args="(const TransportAddress &amp;add)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNeighborCache.html#ad6b6e27419b9657874d3517f2cc62dcf">NeighborCache::Rtt</a> NeighborCache::getNodeRtt </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>add</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00380">380</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="Nps_8cc_source.html#l00207">Nps::coordsReqRpcResponse()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00680">estimateProx()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00577">getProx()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">// cache disabled or entry not there</span>
    <span class="keywordflow">if</span> (!<a class="code" href="classNeighborCache.html#a14ea96324f1a0c102dee609d89cff72a">enableNeighborCache</a> ||
        add.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>() ||
        (<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.count(add) == 0)) {
        <a class="code" href="classNeighborCache.html#a54211a9fd7c6562ff15323e5b9863814">misses</a>++;
        <span class="keywordflow">return</span> std::make_pair(0.0, <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a9bcd0d18a9801aa587532affb6374eea">RTTSTATE_UNKNOWN</a>);
    }

    NeighborCacheEntry &amp;entry = <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[add];

    <span class="keywordflow">if</span> (entry.rttState == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a8a3460a12b4cd0b4d6d89d58fffc3ac0">RTTSTATE_WAITING</a> ||
        entry.rttState == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a9bcd0d18a9801aa587532affb6374eea">RTTSTATE_UNKNOWN</a>)
        <span class="keywordflow">return</span> std::make_pair(entry.rtt, entry.rttState);
    <span class="comment">// entry expired</span>
    <span class="keywordflow">if</span> ((simTime() - entry.insertTime) &gt;= <a class="code" href="classNeighborCache.html#ab3ba13a3310b16ef691ee52eac897c72">rttExpirationTime</a>) {
        entry.rttState = RTTSTATE_UNKNOWN;
        <span class="keywordflow">return</span> std::make_pair(entry.rtt, <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a9bcd0d18a9801aa587532affb6374eea">RTTSTATE_UNKNOWN</a>);
    }
    <a class="code" href="classNeighborCache.html#a39da5066d1b99988174cc8546564600b">hits</a>++;
    assert(!(entry.rtt == 0.0 &amp;&amp; entry.rttState == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99ad335b9827dedaf0b54e8f8f85a9ed56f">RTTSTATE_VALID</a>));
    <span class="keywordflow">return</span> std::make_pair(entry.rtt, entry.rttState);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a23056db53fc60a2eaedf425b7370146e"></a><!-- doxytag: member="NeighborCache::getNodeTimeout" ref="a23056db53fc60a2eaedf425b7370146e" args="(const NodeHandle &amp;node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t NeighborCache::getNodeTimeout </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Caclulation of reasonable timout value. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>node</em>&nbsp;</td><td>the node an RPC is sent to </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>recommended timeout value </dd></dl>

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00802">802</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="BaseRpc_8cc_source.html#l00173">BaseRpc::sendRpcCall()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    simtime_t timeout = <a class="code" href="classNeighborCache.html#a1ba760d3b98f17dd3951ba64ec54e30f">getRttBasedTimeout</a>(node);
    <span class="keywordflow">if</span> (timeout == -1 &amp;&amp; <a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a>) <span class="keywordflow">return</span> <a class="code" href="classNeighborCache.html#aa6f7beabed784d0269bfde141217557c">getNcsBasedTimeout</a>(node);
    <span class="keywordflow">return</span> timeout;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a54e923d5f3f6ca83696e23cc466f8e09"></a><!-- doxytag: member="NeighborCache::getOverlayThisNode" ref="a54e923d5f3f6ca83696e23cc466f8e09" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classNodeHandle.html">NodeHandle</a>&amp; NeighborCache::getOverlayThisNode </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00221">221</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="SimpleNcs_8cc_source.html#l00036">SimpleNcs::init()</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>(); };
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab934be8fb503f9629cf6eb83e7d1b576"></a><!-- doxytag: member="NeighborCache::getProx" ref="ab934be8fb503f9629cf6eb83e7d1b576" args="(const TransportAddress &amp;node, NeighborCacheQueryType type=NEIGHBORCACHE_AVAILABLE, int rpcId=&#45;1, ProxListener *listener=NULL, cPolymorphic *contextPointer=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structProx.html">Prox</a> NeighborCache::getProx </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccb">NeighborCacheQueryType</a>&nbsp;</td>
          <td class="paramname"> <em>type</em> = <code>NEIGHBORCACHE_AVAILABLE</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rpcId</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classProxListener.html">ProxListener</a> *&nbsp;</td>
          <td class="paramname"> <em>listener</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPolymorphic *&nbsp;</td>
          <td class="paramname"> <em>contextPointer</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the proximity of a node. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>node</em>&nbsp;</td><td>The node whose proximity will be requested. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Request type. NEIGHBORCACHE_EXACT looks in the cache, and if no value is found, sends an RTT query to the node. NEIGHBORCACHE_AVAILABLE looks in the cache, and if no value is found returns <a class="el" href="structProx.html#aa7ac832a04fe61863222d8631526647b">Prox::PROX_UNKNOWN</a>. NEIGHBORCACHE_ESTIMATED looks in the cache, and if no value is found calculates an estimate based on information collected by the overlay. NEIGHBORCACHE_QUERY always sends an RTT query to the node and returns <a class="el" href="structProx.html#aa7ac832a04fe61863222d8631526647b">Prox::PROX_UNKNOWN</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rpcId</em>&nbsp;</td><td>Identifier sent to the RPC to identify the call. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>listener</em>&nbsp;</td><td>Module to be called back when an RTT response arrives. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>contextPointer</em>&nbsp;</td><td>Pointer sent to the RPC to identify the call. IMPORTANT: contextPointer gets deleted (only) if no Ping call is sent! So, *contextpointer may be undefined! </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The proximity value of node. </dd></dl>

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00577">577</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00537">BasePastry::determineAliveTable()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00838">getNcsBasedTimeout()</a>, <a class="el" href="Chord_8cc_source.html#l01256">oversim::Chord::handleRpcFixfingersResponse()</a>, <a class="el" href="Bamboo_8cc_source.html#l00552">Bamboo::lookupFinished()</a>, <a class="el" href="BasePastry_8cc_source.html#l00472">BasePastry::pingNodes()</a>, <a class="el" href="BasePastry_8cc_source.html#l00439">BasePastry::prePing()</a>, and <a class="el" href="Kademlia_8cc_source.html#l00319">Kademlia::routingAdd()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    Enter_Method(<span class="stringliteral">&quot;getProx()&quot;</span>);

    <span class="keywordflow">if</span> (!<a class="code" href="classNeighborCache.html#a14ea96324f1a0c102dee609d89cff72a">enableNeighborCache</a>) {
        <a class="code" href="classNeighborCache.html#aab267d208202e7bf8dc1c7aecc66b550" title="Sends a pingNode call based on parameters from a getProx call.">queryProx</a>(node, rpcId, listener, contextPointer);
        <span class="keywordflow">return</span> <a class="code" href="structProx.html#aa7ac832a04fe61863222d8631526647b">Prox::PROX_UNKNOWN</a>;
    }

    <span class="keywordflow">if</span> (node == <a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>()) {
        <span class="keyword">delete</span> contextPointer;
        <span class="keywordflow">return</span> <a class="code" href="structProx.html#ae33fb924891e14e0161708bfadf8f033">Prox::PROX_SELF</a>;
    }

    <span class="keywordtype">bool</span> sendQuery = <span class="keyword">false</span>;
    <a class="code" href="structProx.html">Prox</a> result = <a class="code" href="structProx.html#aa7ac832a04fe61863222d8631526647b">Prox::PROX_UNKNOWN</a>;
    <a class="code" href="classNeighborCache.html#ad6b6e27419b9657874d3517f2cc62dcf">Rtt</a> rtt = <a class="code" href="classNeighborCache.html#ab94f734ab0667605962f2bb4f315e9f1">getNodeRtt</a>(node);

    <span class="comment">//countGetProxTotal++;</span>
    <span class="keywordflow">if</span> (type == <a class="code" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccba751bede7ee708c74811f4bd49ee74cea">NEIGHBORCACHE_DEFAULT</a>) type = <a class="code" href="classNeighborCache.html#a11a4145a2f976de746ffb5eb80b8720e">defaultQueryType</a>;
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccbaa7fa0fb5215e636f2694f8d021d44f8b">NEIGHBORCACHE_DEFAULT_IMMEDIATELY</a>) type = <a class="code" href="classNeighborCache.html#a88e4d57df1eece811a04c75c2eb61c00">defaultQueryTypeI</a>;
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccba03b4a3e8219995ffea0a4c9572d7f0bf">NEIGHBORCACHE_DEFAULT_QUERY</a>) type = <a class="code" href="classNeighborCache.html#a8a01390ead6fc76dcc7d76e5e2253481">defaultQueryTypeQ</a>;

    <span class="keywordflow">switch</span>(type) {
        <span class="keywordflow">case</span> <a class="code" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccba5a3faf832a3994bb6c8aa459a653e7f8">NEIGHBORCACHE_EXACT</a>:
            <span class="keywordflow">if</span> (rtt.second == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99add78d4f762a1db85d7609729b2a5267c">RTTSTATE_TIMEOUT</a>) {
                <span class="comment">// if timeout, return unknown, and send a query!</span>
                sendQuery = <span class="keyword">true</span>;
            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rtt.second == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a8a3460a12b4cd0b4d6d89d58fffc3ac0">RTTSTATE_WAITING</a>) {
                <span class="comment">// if a query was sent, return UNKNOWN</span>
                sendQuery = <span class="keyword">true</span>; <span class="comment">//just inserting a context, no real ping is sent</span>
            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rtt.second == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a9bcd0d18a9801aa587532affb6374eea">RTTSTATE_UNKNOWN</a>) {
                <span class="comment">// if no entry known, send a query and return UNKNOWN</span>
                sendQuery = <span class="keyword">true</span>;
            } <span class="keywordflow">else</span> {
                <span class="comment">// else, return whatever we have</span>
                result = rtt.first;
            }
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccbab2c99c532f604e6029aacc815fd1f67e">NEIGHBORCACHE_EXACT_TIMEOUT</a>:
            <span class="keywordflow">if</span> (rtt.second == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99add78d4f762a1db85d7609729b2a5267c">RTTSTATE_TIMEOUT</a>) {
                <span class="comment">// if timeout, return that</span>
                result = <a class="code" href="structProx.html#a5ded765f6344797ea0e9c35c85cd61af">Prox::PROX_TIMEOUT</a>;
            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rtt.second == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a8a3460a12b4cd0b4d6d89d58fffc3ac0">RTTSTATE_WAITING</a>) {
                <span class="comment">// if a query was sent, return UNKNOWN</span>
                sendQuery = <span class="keyword">true</span>; <span class="comment">//just inserting a context, no real ping is sent</span>
            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rtt.second == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a9bcd0d18a9801aa587532affb6374eea">RTTSTATE_UNKNOWN</a>) {
                <span class="comment">// if no entry known, send a query and return UNKNOWN</span>
                sendQuery = <span class="keyword">true</span>;
            } <span class="keywordflow">else</span> {
                <span class="comment">// else, return whatever we have</span>
                result = rtt.first;
            }
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccbab3073985667b1e3eb2215dbd96359fa9">NEIGHBORCACHE_ESTIMATED</a>:
            <span class="keywordflow">if</span> (rtt.second == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99add78d4f762a1db85d7609729b2a5267c">RTTSTATE_TIMEOUT</a>) {
                <span class="comment">// if timeout, return that</span>
                result = <a class="code" href="structProx.html#a5ded765f6344797ea0e9c35c85cd61af">Prox::PROX_TIMEOUT</a>;
            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rtt.second == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a8a3460a12b4cd0b4d6d89d58fffc3ac0">RTTSTATE_WAITING</a>) {
                <span class="comment">// if a query was sent, return an estimate</span>
                result = <a class="code" href="classNeighborCache.html#a1d0b6dc71b5933f46f888100c8aaf70a" title="Estimates a Prox value of node, in relation to this node, based on information collected by the overl...">estimateProx</a>(node);
            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rtt.second == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a9bcd0d18a9801aa587532affb6374eea">RTTSTATE_UNKNOWN</a>) {
                <span class="comment">// if no entry known, return an estimate</span>
                result = <a class="code" href="classNeighborCache.html#a1d0b6dc71b5933f46f888100c8aaf70a" title="Estimates a Prox value of node, in relation to this node, based on information collected by the overl...">estimateProx</a>(node);
            } <span class="keywordflow">else</span> {
                <span class="comment">// else return whatever we have</span>
                result = rtt.first;
            }
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccba1a4aaeee725859332274f6df4a4a64c1">NEIGHBORCACHE_AVAILABLE</a>:
            <span class="keywordflow">if</span> (rtt.second == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99add78d4f762a1db85d7609729b2a5267c">RTTSTATE_TIMEOUT</a>) {
                <span class="comment">// if timeout, return that.</span>
                result = <a class="code" href="structProx.html#a5ded765f6344797ea0e9c35c85cd61af">Prox::PROX_TIMEOUT</a>;
            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((rtt.second == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a8a3460a12b4cd0b4d6d89d58fffc3ac0">RTTSTATE_WAITING</a>) ||
                       (rtt.second == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a9bcd0d18a9801aa587532affb6374eea">RTTSTATE_UNKNOWN</a>)) {
                <span class="comment">// if a query was sent or entry unknown, return UNKNOWN</span>
            } <span class="keywordflow">else</span> {
                <span class="comment">// else return what we have</span>
                result = rtt.first;
            }
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccba46557811e0915cca5028188f13edf357">NEIGHBORCACHE_QUERY</a>:
            <span class="comment">// simply send a query and return UNKNOWN</span>
            sendQuery = <span class="keyword">true</span>;
            <span class="keywordflow">break</span>;
        <span class="keywordflow">default</span>:
            <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Unknown query type!&quot;</span>);
            <span class="keywordflow">break</span>;

    }
    <span class="keywordflow">if</span> (sendQuery) {
        <span class="keywordflow">if</span> (!<a class="code" href="classNeighborCache.html#a414a936f37e71490de6af0eda317fa83">insertNodeContext</a>(node, contextPointer, listener, rpcId)) {
            <a class="code" href="classNeighborCache.html#aab267d208202e7bf8dc1c7aecc66b550" title="Sends a pingNode call based on parameters from a getProx call.">queryProx</a>(node, rpcId, listener, contextPointer);
        }
    } <span class="keywordflow">else</span> <span class="keyword">delete</span> contextPointer;

    <span class="keywordflow">return</span> result;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1ba760d3b98f17dd3951ba64ec54e30f"></a><!-- doxytag: member="NeighborCache::getRttBasedTimeout" ref="a1ba760d3b98f17dd3951ba64ec54e30f" args="(const NodeHandle &amp;node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t NeighborCache::getRttBasedTimeout </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00811">811</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00802">getNodeTimeout()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    simtime_t timeout = -1;

    <span class="comment">// check if an entry is available in NeighborCache</span>
    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#a416f18a5fea738589845fd630d6cf071">isEntry</a>(node)) {
        std::pair&lt;simtime_t, simtime_t&gt; temp = <a class="code" href="classNeighborCache.html#af02289b6b99c9b1e7c902175ef76d175">getMeanVarRtt</a>(node, <span class="keyword">true</span>);
        simtime_t meanRtt = temp.first;
        simtime_t varRtt = temp.second;

        <span class="comment">// TODO return value even if node has timed out</span>
        <span class="keywordflow">if</span> (meanRtt == -1) <span class="keywordflow">return</span> -1;
        <span class="keywordflow">if</span> (varRtt &gt; 0) {
            <span class="comment">// like TCP</span>
            timeout = meanRtt + 4 * varRtt;
        } <span class="keywordflow">else</span> {
            <span class="comment">// only one RTT is available</span>
            timeout = meanRtt * 1.2;
        }
        <span class="comment">// adjustment</span>
        timeout *= <a class="code" href="classNeighborCache.html#abf8f22a91e7e5bb6095df851e586858f">RTT_TIMEOUT_ADJUSTMENT</a>;
        <span class="comment">//if (timeout &gt; SIMTIME_DBL(defaultTimeout)) return -1;</span>
    }
    <span class="keywordflow">return</span> timeout;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa6aafdbff910a02b3dc631a57f2b3ac4"></a><!-- doxytag: member="NeighborCache::getThisCompType" ref="aa6aafdbff910a02b3dc631a57f2b3ac4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a> NeighborCache::getThisCompType </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classBaseApp.html#a5125ad4468014966598aeb9630242a45">BaseApp</a>.</p>

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00184">184</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="Nps_8cc_source.html#l00438">Nps::sendCoordsReqCall()</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> NEIGHBORCACHE_COMP; };
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5af17618e8a3b6625d89b05109713714"></a><!-- doxytag: member="NeighborCache::handleReadyMessage" ref="a5af17618e8a3b6625d89b05109713714" args="(CompReadyMessage *readyMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NeighborCache::handleReadyMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCompReadyMessage.html">CompReadyMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>method to handle ready messages from the overlay </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>message to handle </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classBaseApp.html#a4f1c969fd41786127717f15e8a357130">BaseApp</a>.</p>

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00541">541</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (readyMsg-&gt;getReady() &amp;&amp; readyMsg-&gt;getComp() == BOOTSTRAPLIST_COMP) {
        <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#ae84275609455b48546032bf90bce345c">doDiscovery</a>) {
            <span class="comment">//TODO</span>
            <span class="comment">// 1. ask bootstrap node for other nodes and his coordinates</span>
            <span class="comment">// 2. probe other nodes and optionally ask them for more nodes</span>
            <span class="comment">//    (try to get close as well as distant nodes)</span>
            <span class="comment">// sendReadyMessage();</span>
        } <span class="keywordflow">else</span> {
            <a class="code" href="classBaseApp.html#ac635f18b9774989ad383f6c4e79d0656">sendReadyMessage</a>();
        }
    }
    <span class="keyword">delete</span> readyMsg;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0b7a352cb7d5eb83c9a04b1e0f52a5d0"></a><!-- doxytag: member="NeighborCache::handleRpcCall" ref="a0b7a352cb7d5eb83c9a04b1e0f52a5d0" args="(BaseCallMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool NeighborCache::handleRpcCall </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseCallMessage.html">BaseCallMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Coord / RTT measuring rpc stuff goes here. </p>

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00566">566</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a>) {
        <span class="keywordflow">return</span> <a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a>-&gt;<a class="code" href="classAbstractNcs.html#ad4866b8d1f605a32ec74e27eef5bfcd4">handleRpcCall</a>(msg);
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a54e488bca853c3d1b4ea1480fefc81e8"></a><!-- doxytag: member="NeighborCache::handleTimerEvent" ref="a54e488bca853c3d1b4ea1480fefc81e8" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NeighborCache::handleTimerEvent </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00558">558</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a>) {
        <a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a>-&gt;<a class="code" href="classAbstractNcs.html#a162e9b1dc50c85190c0da04b58fc0053">handleTimerEvent</a>(msg);
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9d114395eec6daa793b36bca06e24a22"></a><!-- doxytag: member="NeighborCache::initializeApp" ref="a9d114395eec6daa793b36bca06e24a22" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NeighborCache::initializeApp </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>initializes derived class-attributes </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>stage</em>&nbsp;</td><td>the init stage </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classBaseApp.html#ac9a059a2cfb67f4c38f462bb1383e795">BaseApp</a>.</p>

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00067">67</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (stage == <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532a4d4d9a4da2e3c3b4ae4de11cc55b20de">MAX_STAGE_COMPONENTS</a>) {
        <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.clear();
        <a class="code" href="hashWatch_8h.html#ae15520d5e275d3c6aef5da79fb633201" title="Makes unordered_maps inspectable in Tkenv.">WATCH_UNORDERED_MAP</a>(<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>);

        <a class="code" href="classNeighborCache.html#a14ea96324f1a0c102dee609d89cff72a">enableNeighborCache</a> = par(<span class="stringliteral">&quot;enableNeighborCache&quot;</span>);
        <a class="code" href="classNeighborCache.html#ab3ba13a3310b16ef691ee52eac897c72">rttExpirationTime</a> = par(<span class="stringliteral">&quot;rttExpirationTime&quot;</span>);
        <a class="code" href="classNeighborCache.html#aacdd8a0ee2a9e893e21caf58cceb8576">maxSize</a> = par(<span class="stringliteral">&quot;maxSize&quot;</span>);
        <a class="code" href="classNeighborCache.html#ae84275609455b48546032bf90bce345c">doDiscovery</a> = par(<span class="stringliteral">&quot;doDiscovery&quot;</span>);
        <a class="code" href="classNeighborCache.html#a6a13a919c91088a2399db94516c590dc">ncsSendBackOwnCoords</a> = par(<span class="stringliteral">&quot;ncsSendBackOwnCoords&quot;</span>);

        <span class="comment">// set default query types</span>
        std::string temp = par(<span class="stringliteral">&quot;defaultQueryType&quot;</span>).stdstringValue();
        <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;exact&quot;</span>)
            <a class="code" href="classNeighborCache.html#a11a4145a2f976de746ffb5eb80b8720e">defaultQueryType</a> = NEIGHBORCACHE_EXACT;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;exact_timeout&quot;</span>)
            <a class="code" href="classNeighborCache.html#a11a4145a2f976de746ffb5eb80b8720e">defaultQueryType</a> = NEIGHBORCACHE_EXACT_TIMEOUT;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;available&quot;</span>)
            <a class="code" href="classNeighborCache.html#a11a4145a2f976de746ffb5eb80b8720e">defaultQueryType</a> = NEIGHBORCACHE_AVAILABLE;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;estimated&quot;</span>)
            <a class="code" href="classNeighborCache.html#a11a4145a2f976de746ffb5eb80b8720e">defaultQueryType</a> = NEIGHBORCACHE_ESTIMATED;
        <span class="keywordflow">else</span> <span class="keywordflow">throw</span> cRuntimeError((std::string(<span class="stringliteral">&quot;Wrong query type: &quot;</span>)
            + temp).c_str());

        temp = par(<span class="stringliteral">&quot;defaultQueryTypeI&quot;</span>).stdstringValue();
        <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;available&quot;</span>)
            <a class="code" href="classNeighborCache.html#a88e4d57df1eece811a04c75c2eb61c00">defaultQueryTypeI</a> = NEIGHBORCACHE_AVAILABLE;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;estimated&quot;</span>)
            <a class="code" href="classNeighborCache.html#a88e4d57df1eece811a04c75c2eb61c00">defaultQueryTypeI</a> = NEIGHBORCACHE_ESTIMATED;
        <span class="keywordflow">else</span> <span class="keywordflow">throw</span> cRuntimeError((std::string(<span class="stringliteral">&quot;Wrong query type (I): &quot;</span>)
            + temp).c_str());

        temp = par(<span class="stringliteral">&quot;defaultQueryTypeQ&quot;</span>).stdstringValue();
        <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;exact&quot;</span>)
            <a class="code" href="classNeighborCache.html#a8a01390ead6fc76dcc7d76e5e2253481">defaultQueryTypeQ</a> = NEIGHBORCACHE_EXACT;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;exact_timeout&quot;</span>)
            <a class="code" href="classNeighborCache.html#a8a01390ead6fc76dcc7d76e5e2253481">defaultQueryTypeQ</a> = NEIGHBORCACHE_EXACT_TIMEOUT;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;query&quot;</span>)
            <a class="code" href="classNeighborCache.html#a8a01390ead6fc76dcc7d76e5e2253481">defaultQueryTypeQ</a> = NEIGHBORCACHE_QUERY;
        <span class="keywordflow">else</span> <span class="keywordflow">throw</span> cRuntimeError((std::string(<span class="stringliteral">&quot;Wrong query type (Q): &quot;</span>)
        + temp).c_str());

        temp = par(<span class="stringliteral">&quot;ncsType&quot;</span>).stdstringValue();
        <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;none&quot;</span>) <a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a> = NULL;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;vivaldi&quot;</span>) <a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a> = <span class="keyword">new</span> <a class="code" href="classVivaldi.html">Vivaldi</a>();
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;svivaldi&quot;</span>) <a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a> = <span class="keyword">new</span> <a class="code" href="classSVivaldi.html">SVivaldi</a>();
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;gnp&quot;</span>) <a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a> = <span class="keyword">new</span> <a class="code" href="classNeighborCache.html#a936e38853be592103df5f12cd5d5924a">Nps</a>(); <span class="comment">//TODO</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;nps&quot;</span>) <a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a> = <span class="keyword">new</span> <a class="code" href="classNeighborCache.html#a936e38853be592103df5f12cd5d5924a">Nps</a>();
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;simple&quot;</span>) <a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a> = <span class="keyword">new</span> <a class="code" href="classSimpleNcs.html">SimpleNcs</a>();
        <span class="keywordflow">else</span> <span class="keywordflow">throw</span> cRuntimeError((std::string(<span class="stringliteral">&quot;Wrong NCS type: &quot;</span>)
            + temp).c_str());

        <a class="code" href="classNeighborCache.html#a0ffa19a84d406ad8de4b86148a5879ad" title="pointer to GlobalStatistics module in this node">globalStatistics</a> = <a class="code" href="classGlobalStatisticsAccess.html" title="Gives access to the GlobalStatistics module.">GlobalStatisticsAccess</a>().get();

        <a class="code" href="classNeighborCache.html#a54211a9fd7c6562ff15323e5b9863814">misses</a> = 0;
        <a class="code" href="classNeighborCache.html#a39da5066d1b99988174cc8546564600b">hits</a> = 0;

        <a class="code" href="classNeighborCache.html#a825fc8881da994d38c7574ecfc110f4d">rttHistory</a> = par(<span class="stringliteral">&quot;rttHistory&quot;</span>);
        <a class="code" href="classNeighborCache.html#a05ae665acfd7d6504d624d69a95428ef">timeoutAccuracyLimit</a> = par(<span class="stringliteral">&quot;timeoutAccuracyLimit&quot;</span>);

        <a class="code" href="classNeighborCache.html#a22a9c8f9d8054711dd9b4c972940fdcd">numMsg</a> = 0;
        <a class="code" href="classNeighborCache.html#a3a41df8495c9a6b70fc715e308a8ea2d">absoluteError</a> = 0.0;
        <a class="code" href="classNeighborCache.html#a2a635befdb541a1d491b23fe52616370">relativeError</a> = 0.0;
        <a class="code" href="classNeighborCache.html#a5de22621c8d7fa8bbe85e49d3b6b8927">numRttErrorToHigh</a> = 0;
        <a class="code" href="classNeighborCache.html#a86b66679e384f12f73bd4dbcc770f8e6">numRttErrorToLow</a> = 0;
        <a class="code" href="classNeighborCache.html#ad25610d40940fb6395a623bcb3b4a612">lastAbsoluteErrorPerNode</a>.clear();
        WATCH(<a class="code" href="classNeighborCache.html#a3a41df8495c9a6b70fc715e308a8ea2d">absoluteError</a>);
        WATCH(<a class="code" href="classNeighborCache.html#a2a635befdb541a1d491b23fe52616370">relativeError</a>);
        WATCH(<a class="code" href="classNeighborCache.html#a22a9c8f9d8054711dd9b4c972940fdcd">numMsg</a>);
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (stage == <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532a57dc8beae2d53b30da5ebbb84b8eb94e" title="first stage for overlay application modules (Tier 1)">MIN_STAGE_TIER_1</a>) {
        <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a>) <a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a>-&gt;<a class="code" href="classAbstractNcs.html#ab7fa98f9830542958ad75f715abf2b61">init</a>(<span class="keyword">this</span>);
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a414a936f37e71490de6af0eda317fa83"></a><!-- doxytag: member="NeighborCache::insertNodeContext" ref="a414a936f37e71490de6af0eda317fa83" args="(const TransportAddress &amp;handle, cPolymorphic *context, ProxListener *rpcListener, int rpcId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool NeighborCache::insertNodeContext </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPolymorphic *&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classProxListener.html">ProxListener</a> *&nbsp;</td>
          <td class="paramname"> <em>rpcListener</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rpcId</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00171">171</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00577">getProx()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="classNeighborCache.html#a14ea96324f1a0c102dee609d89cff72a">enableNeighborCache</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.count(handle) == 0) {
        NeighborCacheEntry&amp; entry = <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[handle];

        entry.insertTime = simTime();
        entry.rttState = RTTSTATE_WAITING;

        <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.insert(std::make_pair(entry.insertTime,
                                                     handle));

        <a class="code" href="classNeighborCache.html#acd2bd11282ed8d69d6291946a184b127">cleanupCache</a>();

        assert(<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.size() == <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.size());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    } <span class="keywordflow">else</span> {
        NeighborCacheEntry&amp; entry = <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[handle];

        <span class="comment">// waiting?</span>
        <span class="keywordflow">if</span> (entry.rttState == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a8a3460a12b4cd0b4d6d89d58fffc3ac0">RTTSTATE_WAITING</a>) {
            WaitingContext temp(rpcListener, context, rpcId);
            entry.waitingContexts.push_back(temp);

            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        } <span class="keywordflow">else</span> {
            <span class="keywordflow">if</span> (entry.waitingContexts.size() &gt; 0) {
                <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;not waiting for response,&quot;</span>
                                    <span class="stringliteral">&quot; but additional contexts found!&quot;</span>);
            }

            <a class="code" href="classNeighborCache.html#a77a2ecd09d989f19bc2c0cf7e9f0e5b8">updateEntry</a>(handle, entry.insertTime);

            entry.rttState = RTTSTATE_WAITING;
            entry.insertTime = simTime();

            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2ce120e786b37cb5823d53f31ae82ff3"></a><!-- doxytag: member="NeighborCache::isEnabled" ref="a2ce120e786b37cb5823d53f31ae82ff3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool NeighborCache::isEnabled </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00212">212</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">BasePastry::baseInit()</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="classNeighborCache.html#a14ea96324f1a0c102dee609d89cff72a">enableNeighborCache</a>; };
</pre></div></p>

</div>
</div>
<a class="anchor" id="a416f18a5fea738589845fd630d6cf071"></a><!-- doxytag: member="NeighborCache::isEntry" ref="a416f18a5fea738589845fd630d6cf071" args="(const TransportAddress &amp;node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool NeighborCache::isEntry </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00473">473</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00720">getCoordinateBasedProx()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00838">getNcsBasedTimeout()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00811">getRttBasedTimeout()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.count(node) &gt; 0) <span class="keywordflow">return</span> <span class="keyword">true</span>;
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="aab267d208202e7bf8dc1c7aecc66b550"></a><!-- doxytag: member="NeighborCache::queryProx" ref="aab267d208202e7bf8dc1c7aecc66b550" args="(const TransportAddress &amp;node, int rpcId, ProxListener *listener, cPolymorphic *contextPointer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NeighborCache::queryProx </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rpcId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classProxListener.html">ProxListener</a> *&nbsp;</td>
          <td class="paramname"> <em>listener</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPolymorphic *&nbsp;</td>
          <td class="paramname"> <em>contextPointer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sends a pingNode call based on parameters from a getProx call. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>node</em>&nbsp;</td><td>The node to which the pingNode call will be sent. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rpcId</em>&nbsp;</td><td>The rpcId that was passed to getProx. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>listener</em>&nbsp;</td><td>The listener that was passed to getProx. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>contextPointer</em>&nbsp;</td><td>The pointer that was passed to getProx. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00695">695</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00577">getProx()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    Enter_Method(<span class="stringliteral">&quot;queryProx()&quot;</span>);

    WaitingContext temp(listener, contextPointer, rpcId);

    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.count(node) == 0) {
        NeighborCacheEntry&amp; entry = <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[node];

        entry.waitingContexts.push_back(temp);
        <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.insert(std::make_pair(entry.insertTime, node));
        <a class="code" href="classNeighborCache.html#acd2bd11282ed8d69d6291946a184b127">cleanupCache</a>();
    } <span class="keywordflow">else</span> {
        NeighborCacheEntry&amp; entry = <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[node];
        entry.waitingContexts.push_back(temp);
    }
    assert(<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.size() == <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.size());

    <span class="comment">// TODO: this ping traffic is accounted application data traffic!</span>
    <a class="code" href="classBaseRpc.html#a421904b1b501580efed12e6490d3324a" title="ping a node by its TransportAddress">pingNode</a>(node, -1, 0, NULL, <span class="stringliteral">&quot;PING&quot;</span>);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4a929e61a28c3dce307620d56056822f"></a><!-- doxytag: member="NeighborCache::sendBackOwnCoords" ref="a4a929e61a28c3dce307620d56056822f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool NeighborCache::sendBackOwnCoords </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00214">214</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="BaseRpc_8cc_source.html#l00531">BaseRpc::sendRpcResponse()</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> (<a class="code" href="classNeighborCache.html#a6a13a919c91088a2399db94516c590dc">ncsSendBackOwnCoords</a> &amp;&amp; <a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a> != NULL); };
</pre></div></p>

</div>
</div>
<a class="anchor" id="a93099fadb692a42cbe4c0757f28cf0c3"></a><!-- doxytag: member="NeighborCache::setNodeTimeout" ref="a93099fadb692a42cbe4c0757f28cf0c3" args="(const TransportAddress &amp;handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NeighborCache::setNodeTimeout </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>handle</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00227">227</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="BaseRpc_8cc_source.html#l00293">BaseRpc::internalHandleRpcMessage()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">//if (!enableNeighborCache) return;</span>

    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.count(handle) == 0) {
        NeighborCacheEntry&amp; entry = <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[handle];

        entry.insertTime = simTime();
        entry.rttState = RTTSTATE_TIMEOUT;

        <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.insert(std::make_pair(entry.insertTime,
                                                     handle));
        <a class="code" href="classNeighborCache.html#acd2bd11282ed8d69d6291946a184b127">cleanupCache</a>();
    } <span class="keywordflow">else</span> {
        NeighborCacheEntry&amp; entry = <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[handle];

        <a class="code" href="classNeighborCache.html#a77a2ecd09d989f19bc2c0cf7e9f0e5b8">updateEntry</a>(handle, entry.insertTime);

        entry.insertTime = simTime();
        entry.rttState = RTTSTATE_TIMEOUT;

        <a class="code" href="classNeighborCache.html#aa690fa08dd5460980e15bae581ef04d4">WaitingContexts</a> waitingContexts = <a class="code" href="classNeighborCache.html#a2dae7f2c34de3d5ce4e9032f0b00c07b">getNodeContexts</a>(handle);

        <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; waitingContexts.size(); ++i) {
            assert(waitingContexts[i].proxListener || !waitingContexts[i].proxContext);
            <span class="keywordflow">if</span> (waitingContexts[i].proxListener) {
                waitingContexts[i].proxListener-&gt;proxCallback(handle,
                                                              waitingContexts[i].<span class="keywordtype">id</span>,
                                                              waitingContexts[i].proxContext,
                                                              <a class="code" href="structProx.html#a5ded765f6344797ea0e9c35c85cd61af">Prox::PROX_TIMEOUT</a>);
            }
        }
    }
    assert(<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.size() == <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.size());
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a77a2ecd09d989f19bc2c0cf7e9f0e5b8"></a><!-- doxytag: member="NeighborCache::updateEntry" ref="a77a2ecd09d989f19bc2c0cf7e9f0e5b8" args="(const TransportAddress &amp;address, simtime_t insertTime)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NeighborCache::updateEntry </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&nbsp;</td>
          <td class="paramname"> <em>insertTime</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00439">439</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00171">insertNodeContext()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00227">setNodeTimeout()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00344">updateNcsInfo()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00264">updateNode()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classNeighborCache.html#a7f7da64944cfeee91fcecb1d5fb23dd9">neighborCacheExpireMapIterator</a> it =
        <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.lower_bound(insertTime);
    <span class="keywordflow">while</span> (it-&gt;second != address) ++it;
    <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.erase(it);
    <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.insert(std::make_pair(simTime(),
                                                 address));
    assert(<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.size() == <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.size());
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8b5247ae66c36e40addd51db3aa33a3c"></a><!-- doxytag: member="NeighborCache::updateNcsInfo" ref="a8b5247ae66c36e40addd51db3aa33a3c" args="(const TransportAddress &amp;node, AbstractNcsNodeInfo *ncsInfo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NeighborCache::updateNcsInfo </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classAbstractNcsNodeInfo.html">AbstractNcsNodeInfo</a> *&nbsp;</td>
          <td class="paramname"> <em>ncsInfo</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00344">344</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    Enter_Method_Silent();

    EV &lt;&lt; <span class="stringliteral">&quot;[NeighborCache::updateNcsInfo() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
       &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
       &lt;&lt; <span class="stringliteral">&quot;    inserting new NcsInfo of node &quot;</span> &lt;&lt; node.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
       &lt;&lt; endl;

    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.count(node) == 0) {
        NeighborCacheEntry&amp; entry = <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[node];

        entry.insertTime = simTime();
        entry.coordsInfo = ncsInfo;

        <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.insert(std::make_pair(entry.insertTime, node));

        <a class="code" href="classNeighborCache.html#acd2bd11282ed8d69d6291946a184b127">cleanupCache</a>();
    } <span class="keywordflow">else</span> {
        <a class="code" href="classNeighborCache.html#a77a2ecd09d989f19bc2c0cf7e9f0e5b8">updateEntry</a>(node, <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[node].insertTime);

        NeighborCacheEntry&amp; entry = <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[node];

        <span class="keywordflow">if</span> (ncsInfo) {
            <span class="keywordflow">if</span> (entry.coordsInfo) {
                entry.coordsInfo-&gt;update(*ncsInfo);
                <span class="keyword">delete</span> ncsInfo;
            } <span class="keywordflow">else</span> {
                entry.coordsInfo = ncsInfo;
            }
        }
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a057e94a37705dfab0ab1f91417603450"></a><!-- doxytag: member="NeighborCache::updateNode" ref="a057e94a37705dfab0ab1f91417603450" args="(const NodeHandle &amp;add, simtime_t rtt, const NodeHandle &amp;srcRoute=NodeHandle::UNSPECIFIED_NODE, AbstractNcsNodeInfo *ncsInfo=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NeighborCache::updateNode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>add</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&nbsp;</td>
          <td class="paramname"> <em>rtt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>srcRoute</em> = <code><a class="el" href="classNodeHandle.html#a79bf2c5e29c969cbd0b2581cb188d8a6">NodeHandle::UNSPECIFIED_NODE</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classAbstractNcsNodeInfo.html">AbstractNcsNodeInfo</a> *&nbsp;</td>
          <td class="paramname"> <em>ncsInfo</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00264">264</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p>Referenced by <a class="el" href="Nps_8cc_source.html#l00207">Nps::coordsReqRpcResponse()</a>, and <a class="el" href="BaseRpc_8cc_source.html#l00293">BaseRpc::internalHandleRpcMessage()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    Enter_Method_Silent();

    EV &lt;&lt; <span class="stringliteral">&quot;[NeighborCache::updateNode() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    inserting rtt(&quot;</span> &lt;&lt; rtt &lt;&lt; <span class="stringliteral">&quot;) of node &quot;</span> &lt;&lt; add.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; endl;

    <span class="keywordflow">if</span> (rtt &lt;= 0) {
        <span class="keyword">delete</span> ncsInfo;
        <span class="keywordflow">return</span>; <span class="comment">//TODO broose</span>
    }

    <span class="keywordtype">bool</span> deleteInfo = <span class="keyword">false</span>;

    <span class="comment">//if (enableNeighborCache) {</span>
    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.count(add) == 0) {
        NeighborCacheEntry&amp; entry = <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[add];

        entry.insertTime = simTime();
        entry.rtt = rtt;
        entry.rttState = RTTSTATE_VALID;
        entry.nodeRef = add;
        entry.coordsInfo = ncsInfo;
        entry.lastRtts.push_back(rtt);

        <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.insert(std::make_pair(entry.insertTime, add));

        <a class="code" href="classNeighborCache.html#acd2bd11282ed8d69d6291946a184b127">cleanupCache</a>();
    } <span class="keywordflow">else</span> {
        <a class="code" href="classNeighborCache.html#a77a2ecd09d989f19bc2c0cf7e9f0e5b8">updateEntry</a>(add, <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[add].insertTime);

        NeighborCacheEntry&amp; entry = <a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>[add];

        entry.insertTime = simTime();
        <span class="keywordflow">if</span> (entry.rttState != <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99ad335b9827dedaf0b54e8f8f85a9ed56f">RTTSTATE_VALID</a> || entry.rtt &gt; rtt)
            entry.rtt = rtt;
        entry.rttState = RTTSTATE_VALID;
        entry.nodeRef = add;

        entry.lastRtts.push_back(rtt);
        <span class="keywordflow">if</span> (entry.lastRtts.size()  &gt; <a class="code" href="classNeighborCache.html#a825fc8881da994d38c7574ecfc110f4d">rttHistory</a>) {
            entry.lastRtts.pop_front();
        }

        <span class="keywordflow">if</span> (ncsInfo) {
            <span class="keywordflow">if</span> (entry.coordsInfo) {
                entry.coordsInfo-&gt;update(*ncsInfo);
                deleteInfo = <span class="keyword">true</span>;
            } <span class="keywordflow">else</span> {
                entry.coordsInfo = ncsInfo;
            }
        }

        <a class="code" href="classNeighborCache.html#aa690fa08dd5460980e15bae581ef04d4">WaitingContexts</a> waitingContexts = <a class="code" href="classNeighborCache.html#a2dae7f2c34de3d5ce4e9032f0b00c07b">getNodeContexts</a>(add);

        <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; waitingContexts.size(); ++i) {
            <span class="keywordflow">if</span> (waitingContexts[i].proxListener) {
                waitingContexts[i].proxListener
                -&gt;proxCallback(add,
                               waitingContexts[i].<span class="keywordtype">id</span>,
                               waitingContexts[i].proxContext,
                               <a class="code" href="structProx.html">Prox</a>(rtt, 1));
            }
        }
    }
    assert(<a class="code" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">neighborCache</a>.size() == <a class="code" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">neighborCacheExpireMap</a>.size());

    <a class="code" href="classNeighborCache.html#a49df2e4d4466e2265d8357cb926fdd6b">calcRttError</a>(add, rtt);

    <span class="keywordflow">if</span> (<a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a>) <a class="code" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">ncs</a>-&gt;<a class="code" href="classAbstractNcs.html#aa967cf8c9d1c8ef4ab4c8f269256ea61">processCoordinates</a>(rtt, *ncsInfo);

    <span class="comment">// delete ncsInfo if old info is used</span>
    <span class="keywordflow">if</span> (deleteInfo) <span class="keyword">delete</span> ncsInfo;
}
</pre></div></p>

</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="a936e38853be592103df5f12cd5d5924a"></a><!-- doxytag: member="NeighborCache::Nps" ref="a936e38853be592103df5f12cd5d5924a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classNps.html">Nps</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00071">71</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="ac08e4d48d12d21383076ed55ae3959a3"></a><!-- doxytag: member="NeighborCache::operator&lt;&lt;" ref="ac08e4d48d12d21383076ed55ae3959a3" args="(std::ostream &amp;os, const NeighborCacheEntry &amp;entry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structNeighborCache_1_1NeighborCacheEntry.html">NeighborCacheEntry</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>entry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8cc_source.html#l00040">40</a> of file <a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (entry.rttState == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99ad335b9827dedaf0b54e8f8f85a9ed56f">NeighborCache::RTTSTATE_VALID</a>) {
        os &lt;&lt; entry.rtt;
    } <span class="keywordflow">else</span> {
        <span class="keywordflow">if</span> (entry.rttState == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99add78d4f762a1db85d7609729b2a5267c">NeighborCache::RTTSTATE_TIMEOUT</a>) os &lt;&lt; <span class="stringliteral">&quot;TIMEOUT&quot;</span>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (entry.rttState == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a9bcd0d18a9801aa587532affb6374eea">NeighborCache::RTTSTATE_UNKNOWN</a>) os &lt;&lt; <span class="stringliteral">&quot;UNKNOWN&quot;</span>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (entry.rttState == <a class="code" href="classNeighborCache.html#aefe728f567b9040c8c01c8bbf93d9c99a8a3460a12b4cd0b4d6d89d58fffc3ac0">NeighborCache::RTTSTATE_WAITING</a>) os &lt;&lt; <span class="stringliteral">&quot;WAITING&quot;</span>;
    }
    os &lt;&lt; <span class="stringliteral">&quot; (inserted: &quot;</span> &lt;&lt; entry.insertTime;

    os &lt;&lt; <span class="stringliteral">&quot;, #contexts: &quot;</span>
       &lt;&lt; entry.waitingContexts.size();

    <span class="keywordflow">if</span> (!entry.nodeRef.isUnspecified()) os &lt;&lt;  <span class="stringliteral">&quot;, &lt;KEY&gt;&quot;</span>;

    <span class="comment">//TODO entry.coordsInfo</span>

    os &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;

    <span class="keywordflow">return</span> os;
}
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a3a41df8495c9a6b70fc715e308a8ea2d"></a><!-- doxytag: member="NeighborCache::absoluteError" ref="a3a41df8495c9a6b70fc715e308a8ea2d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classNeighborCache.html#a3a41df8495c9a6b70fc715e308a8ea2d">NeighborCache::absoluteError</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00105">105</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00740">calcRttError()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00143">finishApp()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a306e1f0b6cdea15e32762ce421d1734a"></a><!-- doxytag: member="NeighborCache::coordsDummy" ref="a306e1f0b6cdea15e32762ce421d1734a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt; double &gt; <a class="el" href="classNeighborCache.html#a306e1f0b6cdea15e32762ce421d1734a">NeighborCache::coordsDummy</a><code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00099">99</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

</div>
</div>
<a class="anchor" id="a11a4145a2f976de746ffb5eb80b8720e"></a><!-- doxytag: member="NeighborCache::defaultQueryType" ref="a11a4145a2f976de746ffb5eb80b8720e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccb">NeighborCacheQueryType</a> <a class="el" href="classNeighborCache.html#a11a4145a2f976de746ffb5eb80b8720e">NeighborCache::defaultQueryType</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00091">91</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00577">getProx()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a88e4d57df1eece811a04c75c2eb61c00"></a><!-- doxytag: member="NeighborCache::defaultQueryTypeI" ref="a88e4d57df1eece811a04c75c2eb61c00" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccb">NeighborCacheQueryType</a> <a class="el" href="classNeighborCache.html#a88e4d57df1eece811a04c75c2eb61c00">NeighborCache::defaultQueryTypeI</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00092">92</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00577">getProx()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a8a01390ead6fc76dcc7d76e5e2253481"></a><!-- doxytag: member="NeighborCache::defaultQueryTypeQ" ref="a8a01390ead6fc76dcc7d76e5e2253481" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccb">NeighborCacheQueryType</a> <a class="el" href="classNeighborCache.html#a8a01390ead6fc76dcc7d76e5e2253481">NeighborCache::defaultQueryTypeQ</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00093">93</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00577">getProx()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="ae84275609455b48546032bf90bce345c"></a><!-- doxytag: member="NeighborCache::doDiscovery" ref="ae84275609455b48546032bf90bce345c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classNeighborCache.html#ae84275609455b48546032bf90bce345c">NeighborCache::doDiscovery</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00076">76</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00541">handleReadyMessage()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a14ea96324f1a0c102dee609d89cff72a"></a><!-- doxytag: member="NeighborCache::enableNeighborCache" ref="a14ea96324f1a0c102dee609d89cff72a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classNeighborCache.html#a14ea96324f1a0c102dee609d89cff72a">NeighborCache::enableNeighborCache</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00075">75</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00380">getNodeRtt()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00577">getProx()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00171">insertNodeContext()</a>, and <a class="el" href="NeighborCache_8h_source.html#l00212">isEnabled()</a>.</p>

</div>
</div>
<a class="anchor" id="a0ffa19a84d406ad8de4b86148a5879ad"></a><!-- doxytag: member="NeighborCache::globalStatistics" ref="a0ffa19a84d406ad8de4b86148a5879ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classGlobalStatistics.html">GlobalStatistics</a>* <a class="el" href="classNeighborCache.html#a0ffa19a84d406ad8de4b86148a5879ad">NeighborCache::globalStatistics</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>pointer to <a class="el" href="classGlobalStatistics.html" title="Module to record global statistics.">GlobalStatistics</a> module in this node </p>

<p>Reimplemented from <a class="el" href="classBaseApp.html#a70bdab2d4ea3553205115f057194f692">BaseApp</a>.</p>

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00148">148</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00740">calcRttError()</a>, <a class="el" href="Nps_8cc_source.html#l00207">Nps::coordsReqRpcResponse()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00143">finishApp()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a39da5066d1b99988174cc8546564600b"></a><!-- doxytag: member="NeighborCache::hits" ref="a39da5066d1b99988174cc8546564600b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classNeighborCache.html#a39da5066d1b99988174cc8546564600b">NeighborCache::hits</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00081">81</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00143">finishApp()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00380">getNodeRtt()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a850be66fd299373b7843c92378b4d54a"></a><!-- doxytag: member="NeighborCache::landmarkTimer" ref="a850be66fd299373b7843c92378b4d54a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="classNeighborCache.html#a850be66fd299373b7843c92378b4d54a">NeighborCache::landmarkTimer</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00097">97</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad25610d40940fb6395a623bcb3b4a612"></a><!-- doxytag: member="NeighborCache::lastAbsoluteErrorPerNode" ref="ad25610d40940fb6395a623bcb3b4a612" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="classTransportAddress.html">TransportAddress</a>, std::vector&lt;double&gt; &gt; <a class="el" href="classNeighborCache.html#ad25610d40940fb6395a623bcb3b4a612">NeighborCache::lastAbsoluteErrorPerNode</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00103">103</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="aacdd8a0ee2a9e893e21caf58cceb8576"></a><!-- doxytag: member="NeighborCache::maxSize" ref="aacdd8a0ee2a9e893e21caf58cceb8576" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classNeighborCache.html#aacdd8a0ee2a9e893e21caf58cceb8576">NeighborCache::maxSize</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00078">78</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00416">cleanupCache()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a54211a9fd7c6562ff15323e5b9863814"></a><!-- doxytag: member="NeighborCache::misses" ref="a54211a9fd7c6562ff15323e5b9863814" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classNeighborCache.html#a54211a9fd7c6562ff15323e5b9863814">NeighborCache::misses</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00080">80</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00143">finishApp()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00380">getNodeRtt()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="aea802dc1c5065f1abd3756079f47fce3"></a><!-- doxytag: member="NeighborCache::ncs" ref="aea802dc1c5065f1abd3756079f47fce3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAbstractNcs.html">AbstractNcs</a>* <a class="el" href="classNeighborCache.html#aea802dc1c5065f1abd3756079f47fce3">NeighborCache::ncs</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00088">88</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00740">calcRttError()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00680">estimateProx()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00143">finishApp()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00481">getAvgAbsPredictionError()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00720">getCoordinateBasedProx()</a>, <a class="el" href="NeighborCache_8h_source.html#l00216">getNcsAccess()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00802">getNodeTimeout()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00566">handleRpcCall()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00558">handleTimerEvent()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>, <a class="el" href="NeighborCache_8h_source.html#l00214">sendBackOwnCoords()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00264">updateNode()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00166">~NeighborCache()</a>.</p>

</div>
</div>
<a class="anchor" id="ab645ed14a47c403b86243192fcbfa27c"></a><!-- doxytag: member="NeighborCache::NCS_TIMEOUT_CONSTANT" ref="ab645ed14a47c403b86243192fcbfa27c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double <a class="el" href="classNeighborCache.html#ab645ed14a47c403b86243192fcbfa27c">NeighborCache::NCS_TIMEOUT_CONSTANT</a> = 0.25<code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00145">145</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00838">getNcsBasedTimeout()</a>.</p>

</div>
</div>
<a class="anchor" id="a6a13a919c91088a2399db94516c590dc"></a><!-- doxytag: member="NeighborCache::ncsSendBackOwnCoords" ref="a6a13a919c91088a2399db94516c590dc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classNeighborCache.html#a6a13a919c91088a2399db94516c590dc">NeighborCache::ncsSendBackOwnCoords</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00089">89</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>, and <a class="el" href="NeighborCache_8h_source.html#l00214">sendBackOwnCoords()</a>.</p>

</div>
</div>
<a class="anchor" id="a6f9e10ff6b8ac2ecb0f8126f77a8ad4d"></a><!-- doxytag: member="NeighborCache::neighborCache" ref="a6f9e10ff6b8ac2ecb0f8126f77a8ad4d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNORDERED_MAP&lt;<a class="el" href="classTransportAddress.html">TransportAddress</a>, <a class="el" href="structNeighborCache_1_1NeighborCacheEntry.html">NeighborCacheEntry</a>&gt; <a class="el" href="classNeighborCache.html#a6f9e10ff6b8ac2ecb0f8126f77a8ad4d">NeighborCache::neighborCache</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00173">173</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00416">cleanupCache()</a>, <a class="el" href="Nps_8cc_source.html#l00207">Nps::coordsReqRpcResponse()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00680">estimateProx()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00481">getAvgAbsPredictionError()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00769">getMeanVarRtt()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00452">getNearestNode()</a>, <a class="el" href="NeighborCache_8h_source.html#l00223">getNeighborCacheSize()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00216">getNodeContexts()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00730">getNodeCoordsInfo()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00406">getNodeHandle()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00380">getNodeRtt()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00171">insertNodeContext()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00473">isEntry()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00695">queryProx()</a>, <a class="el" href="Nps_8cc_source.html#l00392">Nps::setLandmarkSet()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00227">setNodeTimeout()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00439">updateEntry()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00344">updateNcsInfo()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00264">updateNode()</a>.</p>

</div>
</div>
<a class="anchor" id="a13fe4a3a70c426257244008e5e1fd0f9"></a><!-- doxytag: member="NeighborCache::neighborCacheExpireMap" ref="a13fe4a3a70c426257244008e5e1fd0f9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::multimap&lt;simtime_t, <a class="el" href="classTransportAddress.html">TransportAddress</a>&gt; <a class="el" href="classNeighborCache.html#a13fe4a3a70c426257244008e5e1fd0f9">NeighborCache::neighborCacheExpireMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00177">177</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00416">cleanupCache()</a>, <a class="el" href="Nps_8cc_source.html#l00207">Nps::coordsReqRpcResponse()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00481">getAvgAbsPredictionError()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00171">insertNodeContext()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00695">queryProx()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00227">setNodeTimeout()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00439">updateEntry()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00344">updateNcsInfo()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00264">updateNode()</a>.</p>

</div>
</div>
<a class="anchor" id="a22a9c8f9d8054711dd9b4c972940fdcd"></a><!-- doxytag: member="NeighborCache::numMsg" ref="a22a9c8f9d8054711dd9b4c972940fdcd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classNeighborCache.html#a22a9c8f9d8054711dd9b4c972940fdcd">NeighborCache::numMsg</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00104">104</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00740">calcRttError()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00143">finishApp()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a5de22621c8d7fa8bbe85e49d3b6b8927"></a><!-- doxytag: member="NeighborCache::numRttErrorToHigh" ref="a5de22621c8d7fa8bbe85e49d3b6b8927" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classNeighborCache.html#a5de22621c8d7fa8bbe85e49d3b6b8927">NeighborCache::numRttErrorToHigh</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00107">107</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00740">calcRttError()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00143">finishApp()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a86b66679e384f12f73bd4dbcc770f8e6"></a><!-- doxytag: member="NeighborCache::numRttErrorToLow" ref="a86b66679e384f12f73bd4dbcc770f8e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classNeighborCache.html#a86b66679e384f12f73bd4dbcc770f8e6">NeighborCache::numRttErrorToLow</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00108">108</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00740">calcRttError()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00143">finishApp()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a2a635befdb541a1d491b23fe52616370"></a><!-- doxytag: member="NeighborCache::relativeError" ref="a2a635befdb541a1d491b23fe52616370" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classNeighborCache.html#a2a635befdb541a1d491b23fe52616370">NeighborCache::relativeError</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00106">106</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00740">calcRttError()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00143">finishApp()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="abf8f22a91e7e5bb6095df851e586858f"></a><!-- doxytag: member="NeighborCache::RTT_TIMEOUT_ADJUSTMENT" ref="abf8f22a91e7e5bb6095df851e586858f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double <a class="el" href="classNeighborCache.html#abf8f22a91e7e5bb6095df851e586858f">NeighborCache::RTT_TIMEOUT_ADJUSTMENT</a> = 1.3<code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00144">144</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00811">getRttBasedTimeout()</a>.</p>

</div>
</div>
<a class="anchor" id="ab3ba13a3310b16ef691ee52eac897c72"></a><!-- doxytag: member="NeighborCache::rttExpirationTime" ref="ab3ba13a3310b16ef691ee52eac897c72" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="classNeighborCache.html#ab3ba13a3310b16ef691ee52eac897c72">NeighborCache::rttExpirationTime</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00077">77</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00380">getNodeRtt()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a825fc8881da994d38c7574ecfc110f4d"></a><!-- doxytag: member="NeighborCache::rttHistory" ref="a825fc8881da994d38c7574ecfc110f4d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classNeighborCache.html#a825fc8881da994d38c7574ecfc110f4d">NeighborCache::rttHistory</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00109">109</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00264">updateNode()</a>.</p>

</div>
</div>
<a class="anchor" id="a05ae665acfd7d6504d624d69a95428ef"></a><!-- doxytag: member="NeighborCache::timeoutAccuracyLimit" ref="a05ae665acfd7d6504d624d69a95428ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classNeighborCache.html#a05ae665acfd7d6504d624d69a95428ef">NeighborCache::timeoutAccuracyLimit</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="NeighborCache_8h_source.html#l00110">110</a> of file <a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00838">getNcsBasedTimeout()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00067">initializeApp()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="NeighborCache_8h_source.html">NeighborCache.h</a></li>
<li><a class="el" href="NeighborCache_8cc_source.html">NeighborCache.cc</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 3 2010 14:40:51 for OverSim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
