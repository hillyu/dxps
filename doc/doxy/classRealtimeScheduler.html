<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OverSim: RealtimeScheduler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>RealtimeScheduler Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="RealtimeScheduler" -->
<p>This class implements a event scheduler for OMNeT++ It makes the simulation run in realtime (i.e.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for RealtimeScheduler:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classRealtimeScheduler.png" usemap="#RealtimeScheduler_map" alt=""/>
  <map id="RealtimeScheduler_map" name="RealtimeScheduler_map">
<area href="classAppTunOutScheduler.html" alt="AppTunOutScheduler" shape="rect" coords="0,56,134,80"/>
<area href="classTunOutScheduler.html" alt="TunOutScheduler" shape="rect" coords="144,56,278,80"/>
<area href="classUdpOutScheduler.html" alt="UdpOutScheduler" shape="rect" coords="288,56,422,80"/>
</map>
</div>

<p><a href="classRealtimeScheduler-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler_1_1PacketBufferEntry.html">PacketBufferEntry</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::list<br class="typebreak"/>
&lt; <a class="el" href="classRealtimeScheduler_1_1PacketBufferEntry.html">PacketBufferEntry</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#a79fbe4a4228382420aadd2e7263b6e0b">PacketBuffer</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#a032d95f76e08a2215bb4a35d446df064">RealtimeScheduler</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#a032d95f76e08a2215bb4a35d446df064"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#aebac72bc5e04afe5bf3768c9075b6699">~RealtimeScheduler</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor.  <a href="#aebac72bc5e04afe5bf3768c9075b6699"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#ad17465d8885c0b5f8b00375e3adeb680">startRun</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called at the beginning of a simulation run.  <a href="#ad17465d8885c0b5f8b00375e3adeb680"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#aea9607e881dcf820eb841d0438b4654d">endRun</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called at the end of a simulation run.  <a href="#aea9607e881dcf820eb841d0438b4654d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#afa5c09e863f251b1280eeec36ef9a6db">executionResumed</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Recalculates "base time" from current wall clock time.  <a href="#afa5c09e863f251b1280eeec36ef9a6db"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#a8a23b63956df2045a4b86c9e5cbc2dd0">setInterfaceModule</a> (cModule *<a class="el" href="classRealtimeScheduler.html#ae22161ac4912efe6f5742157181c8060">module</a>, cMessage *<a class="el" href="classRealtimeScheduler.html#a0ef68f82d35f9463e9288f22c628eba4">notificationMsg</a>, <a class="el" href="classRealtimeScheduler.html#a79fbe4a4228382420aadd2e7263b6e0b">PacketBuffer</a> *buffer, int mtu, bool isApp=false)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">To be called from the module which wishes to receive data from the tun device.  <a href="#a8a23b63956df2045a4b86c9e5cbc2dd0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#a5185bc3129ea4ab72c06382cf4c6c40c">getNextEvent</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Scheduler function -- it comes from cScheduler interface.  <a href="#a5185bc3129ea4ab72c06382cf4c6c40c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#a93b772a5520c804c7a208de45e1a1e16">sendNotificationMsg</a> (cMessage *msg, cModule *mod)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">send notification msg to module  <a href="#a93b772a5520c804c7a208de45e1a1e16"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#adb359f57379d33cfa8300cdd5beb2487">sendBytes</a> (const char *buf, size_t numBytes, sockaddr *addr=0, socklen_t addrlen=0, bool isApp=false, SOCKET fd=INVALID_SOCKET)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send data to network.  <a href="#adb359f57379d33cfa8300cdd5beb2487"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#abcd19c1a27de8c11660f61de68e6a8f5">closeAppSocket</a> (SOCKET fd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Close the application TCP socket.  <a href="#abcd19c1a27de8c11660f61de68e6a8f5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual SOCKET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#a36df2061f71395a6236e3ad4d2d67d5c">getAppTunFd</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the FD for the application TUN socket.  <a href="#a36df2061f71395a6236e3ad4d2d67d5c"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#aeebd34c4cfa2c9b1b1d1224117b7be3b">initializeNetwork</a> ()=0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the network.  <a href="#aeebd34c4cfa2c9b1b1d1224117b7be3b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#ad941843b104a83ee36c4700bb6de9da7">additionalFD</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is called from main loop if data is accessible from "additional_fd".  <a href="#ad941843b104a83ee36c4700bb6de9da7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#acc4bd120e7c1cf7ccdf6e7cafc5cc825">receiveWithTimeout</a> (long usec)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Waits for incoming data on the tun device.  <a href="#acc4bd120e7c1cf7ccdf6e7cafc5cc825"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#a62d97e7885e2a1c4e1f6d7cd899df92c">receiveUntil</a> (const timeval &amp;targetTime)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tries to read data until the given time is up.  <a href="#a62d97e7885e2a1c4e1f6d7cd899df92c"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">fd_set&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#a7468f001f080f62bf567b6a56a3b18d4">all_fds</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SOCKET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#a1b483610d98af8787a4fcb36903c7796">maxfd</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SOCKET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#aee2766bfefbbe385593bd0e7f194eba5">netw_fd</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SOCKET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#a4a9e4639b06fe4f53b9f6002b23333a0">apptun_fd</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cModule *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#ae22161ac4912efe6f5742157181c8060">module</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#a0ef68f82d35f9463e9288f22c628eba4">notificationMsg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRealtimeScheduler.html#a79fbe4a4228382420aadd2e7263b6e0b">PacketBuffer</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#afc75606ba879c035fe4be9b939012f03">packetBuffer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#a499bb2a7b02849be46347533a5ed6761">buffersize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cModule *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#af8eaff4ca345f94aaef1fe26c5be508e">appModule</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#ab4eced162d7a38aeccc4c4cd5381f276">appNotificationMsg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRealtimeScheduler.html#a79fbe4a4228382420aadd2e7263b6e0b">PacketBuffer</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#a9cf297ceaba1fbb4a66d847b348dae3c">appPacketBuffer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#a56ae7cce0fa02720803fbca60f1dee71">appBuffersize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#ae9fa7c77861365573b4d5b8deaa942c6">appConnectionLimit</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SOCKET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#adaa65c6934b915a6129a284f952d18ed">additional_fd</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">timeval&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRealtimeScheduler.html#aee4c436fdd6140549dc04f1de5fb4666">baseTime</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This class implements a event scheduler for OMNeT++ It makes the simulation run in realtime (i.e. </p>
<p>1 simsec == 1 sec) It must be subclassed; its subclasses must handle network traffic from/to the simulation </p>

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00038">38</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a79fbe4a4228382420aadd2e7263b6e0b"></a><!-- doxytag: member="RealtimeScheduler::PacketBuffer" ref="a79fbe4a4228382420aadd2e7263b6e0b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::list&lt;<a class="el" href="classRealtimeScheduler_1_1PacketBufferEntry.html">PacketBufferEntry</a>&gt; <a class="el" href="classRealtimeScheduler.html#a79fbe4a4228382420aadd2e7263b6e0b">RealtimeScheduler::PacketBuffer</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00064">64</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a032d95f76e08a2215bb4a35d446df064"></a><!-- doxytag: member="RealtimeScheduler::RealtimeScheduler" ref="a032d95f76e08a2215bb4a35d446df064" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RealtimeScheduler::RealtimeScheduler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor. </p>

<p>Definition at line <a class="el" href="realtimescheduler_8cc_source.html#l00034">34</a> of file <a class="el" href="realtimescheduler_8cc_source.html">realtimescheduler.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">                                     : cScheduler()
{
    FD_ZERO(&amp;<a class="code" href="classRealtimeScheduler.html#a7468f001f080f62bf567b6a56a3b18d4">all_fds</a>);
    <a class="code" href="classRealtimeScheduler.html#a1b483610d98af8787a4fcb36903c7796">maxfd</a> = 0;
    <a class="code" href="classRealtimeScheduler.html#aee2766bfefbbe385593bd0e7f194eba5">netw_fd</a> = INVALID_SOCKET;
    <a class="code" href="classRealtimeScheduler.html#adaa65c6934b915a6129a284f952d18ed">additional_fd</a> = INVALID_SOCKET;
    <a class="code" href="classRealtimeScheduler.html#a4a9e4639b06fe4f53b9f6002b23333a0">apptun_fd</a> = INVALID_SOCKET;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="aebac72bc5e04afe5bf3768c9075b6699"></a><!-- doxytag: member="RealtimeScheduler::~RealtimeScheduler" ref="aebac72bc5e04afe5bf3768c9075b6699" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RealtimeScheduler::~RealtimeScheduler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destructor. </p>

<p>Definition at line <a class="el" href="realtimescheduler_8cc_source.html#l00043">43</a> of file <a class="el" href="realtimescheduler_8cc_source.html">realtimescheduler.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{ }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ad941843b104a83ee36c4700bb6de9da7"></a><!-- doxytag: member="RealtimeScheduler::additionalFD" ref="ad941843b104a83ee36c4700bb6de9da7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void RealtimeScheduler::additionalFD </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function is called from main loop if data is accessible from "additional_fd". </p>
<p>This FD can be set in initializeNetwork by concrete implementations. </p>

<p>Reimplemented in <a class="el" href="classAppTunOutScheduler.html#a3bb1c3c26df0ca88c0afc9c6ed7a0f7d">AppTunOutScheduler</a>, <a class="el" href="classTunOutScheduler.html#a5ec2ec95f40d06685911f7b571efc392">TunOutScheduler</a>, and <a class="el" href="classUdpOutScheduler.html#ac9a5e1e72556809f04a44991e6f0b437">UdpOutScheduler</a>.</p>

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00099">99</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

<p>Referenced by <a class="el" href="realtimescheduler_8cc_source.html#l00104">receiveWithTimeout()</a>.</p>

<p><div class="fragment"><pre class="fragment">{};
</pre></div></p>

</div>
</div>
<a class="anchor" id="abcd19c1a27de8c11660f61de68e6a8f5"></a><!-- doxytag: member="RealtimeScheduler::closeAppSocket" ref="abcd19c1a27de8c11660f61de68e6a8f5" args="(SOCKET fd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RealtimeScheduler::closeAppSocket </td>
          <td>(</td>
          <td class="paramtype">SOCKET&nbsp;</td>
          <td class="paramname"> <em>fd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Close the application TCP socket. </p>

<p>Definition at line <a class="el" href="realtimescheduler_8cc_source.html#l00308">308</a> of file <a class="el" href="realtimescheduler_8cc_source.html">realtimescheduler.cc</a>.</p>

<p>Referenced by <a class="el" href="XmlRpcInterface_8cc_source.html#l00513">XmlRpcInterface::closeConnection()</a>, and <a class="el" href="realtimescheduler_8cc_source.html#l00104">receiveWithTimeout()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef _WIN32</span>
<span class="preprocessor"></span>    closesocket(fd);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    close(fd);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    FD_CLR(fd, &amp;<a class="code" href="classRealtimeScheduler.html#a7468f001f080f62bf567b6a56a3b18d4">all_fds</a>);

    <a class="code" href="classRealtimeScheduler.html#a9cf297ceaba1fbb4a66d847b348dae3c">appPacketBuffer</a>-&gt;push_back(PacketBufferEntry(0, 0, <a class="code" href="classRealtimeScheduler_1_1PacketBufferEntry.html#a7a03bec74e01f2a01bdf90ed5515c2e6aa396b6b6e9aed0eb0e5ac50c38f11b6d">PacketBufferEntry::PACKET_FD_CLOSE</a>, fd));
    <a class="code" href="classRealtimeScheduler.html#a93b772a5520c804c7a208de45e1a1e16" title="send notification msg to module">sendNotificationMsg</a>(<a class="code" href="classRealtimeScheduler.html#ab4eced162d7a38aeccc4c4cd5381f276">appNotificationMsg</a>, <a class="code" href="classRealtimeScheduler.html#af8eaff4ca345f94aaef1fe26c5be508e">appModule</a>);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="aea9607e881dcf820eb841d0438b4654d"></a><!-- doxytag: member="RealtimeScheduler::endRun" ref="aea9607e881dcf820eb841d0438b4654d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RealtimeScheduler::endRun </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called at the end of a simulation run. </p>

<p>Definition at line <a class="el" href="realtimescheduler_8cc_source.html#l00065">65</a> of file <a class="el" href="realtimescheduler_8cc_source.html">realtimescheduler.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{}
</pre></div></p>

</div>
</div>
<a class="anchor" id="afa5c09e863f251b1280eeec36ef9a6db"></a><!-- doxytag: member="RealtimeScheduler::executionResumed" ref="afa5c09e863f251b1280eeec36ef9a6db" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RealtimeScheduler::executionResumed </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Recalculates "base time" from current wall clock time. </p>

<p>Definition at line <a class="el" href="realtimescheduler_8cc_source.html#l00068">68</a> of file <a class="el" href="realtimescheduler_8cc_source.html">realtimescheduler.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    gettimeofday(&amp;<a class="code" href="classRealtimeScheduler.html#aee4c436fdd6140549dc04f1de5fb4666">baseTime</a>, NULL);
    <a class="code" href="classRealtimeScheduler.html#aee4c436fdd6140549dc04f1de5fb4666">baseTime</a> = timeval_substract(<a class="code" href="classRealtimeScheduler.html#aee4c436fdd6140549dc04f1de5fb4666">baseTime</a>, SIMTIME_DBL(simTime()));
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a36df2061f71395a6236e3ad4d2d67d5c"></a><!-- doxytag: member="RealtimeScheduler::getAppTunFd" ref="a36df2061f71395a6236e3ad4d2d67d5c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual SOCKET RealtimeScheduler::getAppTunFd </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the FD for the application TUN socket. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the application TUN socket FD </dd></dl>

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00203">203</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

<p>Referenced by <a class="el" href="XmlRpcInterface_8cc_source.html#l00433">XmlRpcInterface::initializeApp()</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="classRealtimeScheduler.html#a4a9e4639b06fe4f53b9f6002b23333a0">apptun_fd</a>; };
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5185bc3129ea4ab72c06382cf4c6c40c"></a><!-- doxytag: member="RealtimeScheduler::getNextEvent" ref="a5185bc3129ea4ab72c06382cf4c6c40c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage * RealtimeScheduler::getNextEvent </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Scheduler function -- it comes from cScheduler interface. </p>

<p>Definition at line <a class="el" href="realtimescheduler_8cc_source.html#l00265">265</a> of file <a class="el" href="realtimescheduler_8cc_source.html">realtimescheduler.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">// assert that we&#39;ve been configured</span>
    <span class="keywordflow">if</span> (!<a class="code" href="classRealtimeScheduler.html#ae22161ac4912efe6f5742157181c8060">module</a>)
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;RealtimeScheduler: setInterfaceModule() not called: it must be called from a module&#39;s initialize() function&quot;</span>);
    <span class="comment">// FIXME: reimplement sanity check</span>
<span class="comment">//    if (app_fd &gt;= 0 &amp;&amp; !appModule)</span>
<span class="comment">//        throw cRuntimeError(&quot;RealtimeScheduler: setInterfaceModule() not called from application: it must be called from a module&#39;s initialize() function&quot;);</span>

    <span class="comment">// calculate target time</span>
    timeval targetTime;
    cMessage *msg = sim-&gt;msgQueue.peekFirst();
    <span class="keywordflow">if</span> (!msg) {
        <span class="comment">// if there are no events, wait until something comes from outside</span>
        <span class="comment">// TBD: obey simtimelimit, cpu-time-limit</span>
        targetTime.tv_sec = LONG_MAX;
        targetTime.tv_usec = 0;
    } <span class="keywordflow">else</span> {
        <span class="comment">// use time of next event</span>
        simtime_t eventSimtime = msg-&gt;getArrivalTime();
        targetTime = timeval_add(<a class="code" href="classRealtimeScheduler.html#aee4c436fdd6140549dc04f1de5fb4666">baseTime</a>, SIMTIME_DBL(eventSimtime));
    }

    <span class="comment">// if needed, wait until that time arrives</span>
    timeval curTime;
    gettimeofday(&amp;curTime, NULL);
    <span class="keywordflow">if</span> (timeval_greater(targetTime, curTime)) {
        <span class="keywordtype">int</span> status = <a class="code" href="classRealtimeScheduler.html#a62d97e7885e2a1c4e1f6d7cd899df92c" title="Tries to read data until the given time is up.">receiveUntil</a>(targetTime);
        <span class="keywordflow">if</span> (status == -1) {
            printf(<span class="stringliteral">&quot;WARNING: receiveUntil returned -1 (user interrupt)\n&quot;</span>);
            <span class="keywordflow">return</span> NULL; <span class="comment">// interrupted by user</span>
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status == 1) {
            msg = sim-&gt;msgQueue.peekFirst(); <span class="comment">// received something</span>
        }
    } <span class="keywordflow">else</span> {
        <span class="comment">//    printf(&quot;WARNING: Lagging behind realtime!\n&quot;);</span>
        <span class="comment">// we&#39;re behind -- customized versions of this class may</span>
        <span class="comment">// alert if we&#39;re too much behind, whatever that means</span>
    }
    <span class="comment">// ok, return the message</span>
    <span class="keywordflow">return</span> msg;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="aeebd34c4cfa2c9b1b1d1224117b7be3b"></a><!-- doxytag: member="RealtimeScheduler::initializeNetwork" ref="aeebd34c4cfa2c9b1b1d1224117b7be3b" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int RealtimeScheduler::initializeNetwork </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the network. </p>

<p>Implemented in <a class="el" href="classAppTunOutScheduler.html#ab04f51526f23eeb636af6748e717f35b">AppTunOutScheduler</a>, <a class="el" href="classTunOutScheduler.html#ac0ce8ea27c97f91c3ffcaced6e0f08d8">TunOutScheduler</a>, and <a class="el" href="classUdpOutScheduler.html#a58be0295c7d02e0becbc37d9da27572c">UdpOutScheduler</a>.</p>

<p>Referenced by <a class="el" href="realtimescheduler_8cc_source.html#l00046">startRun()</a>.</p>

</div>
</div>
<a class="anchor" id="a62d97e7885e2a1c4e1f6d7cd899df92c"></a><!-- doxytag: member="RealtimeScheduler::receiveUntil" ref="a62d97e7885e2a1c4e1f6d7cd899df92c" args="(const timeval &amp;targetTime)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int RealtimeScheduler::receiveUntil </td>
          <td>(</td>
          <td class="paramtype">const timeval &amp;&nbsp;</td>
          <td class="paramname"> <em>targetTime</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tries to read data until the given time is up. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>targetTime</em>&nbsp;</td><td>stop waiting after this time is up </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 if data is read, -1 if there is an error, 0 if no data is read </dd></dl>

<p>Definition at line <a class="el" href="realtimescheduler_8cc_source.html#l00238">238</a> of file <a class="el" href="realtimescheduler_8cc_source.html">realtimescheduler.cc</a>.</p>

<p>Referenced by <a class="el" href="realtimescheduler_8cc_source.html#l00265">getNextEvent()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">// if there&#39;s more than 200ms to wait, wait in 100ms chunks</span>
    <span class="comment">// in order to keep UI responsiveness by invoking ev.idle()</span>
    timeval curTime;
    gettimeofday(&amp;curTime, NULL);
    <span class="keywordflow">while</span> (targetTime.tv_sec-curTime.tv_sec &gt;=2 ||
            timeval_diff_usec(targetTime, curTime) &gt;= 200000) {
        <span class="keywordflow">if</span> (<a class="code" href="classRealtimeScheduler.html#acc4bd120e7c1cf7ccdf6e7cafc5cc825" title="Waits for incoming data on the tun device.">receiveWithTimeout</a>(100000)) { <span class="comment">// 100ms</span>
            <span class="keywordflow">if</span> (ev.idle()) <span class="keywordflow">return</span> -1;
            <span class="keywordflow">return</span> 1;
        }
        <span class="keywordflow">if</span> (ev.idle()) <span class="keywordflow">return</span> -1;
        gettimeofday(&amp;curTime, NULL);
    }

    <span class="comment">// difference is now at most 100ms, do it at once</span>
    <span class="keywordtype">long</span> usec = timeval_diff_usec(targetTime, curTime);
    <span class="keywordflow">if</span> (usec&gt;0)
        <span class="keywordflow">if</span> (<a class="code" href="classRealtimeScheduler.html#acc4bd120e7c1cf7ccdf6e7cafc5cc825" title="Waits for incoming data on the tun device.">receiveWithTimeout</a>(usec)) {
            <span class="keywordflow">if</span> (ev.idle()) <span class="keywordflow">return</span> -1;
            <span class="keywordflow">return</span> 1;
        }
    <span class="keywordflow">if</span> (ev.idle()) <span class="keywordflow">return</span> -1;
    <span class="keywordflow">return</span> 0;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="acc4bd120e7c1cf7ccdf6e7cafc5cc825"></a><!-- doxytag: member="RealtimeScheduler::receiveWithTimeout" ref="acc4bd120e7c1cf7ccdf6e7cafc5cc825" args="(long usec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RealtimeScheduler::receiveWithTimeout </td>
          <td>(</td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>usec</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Waits for incoming data on the tun device. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>usec</em>&nbsp;</td><td>Timeout after which to quit waiting (in µsec) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if data was read, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="realtimescheduler_8cc_source.html#l00104">104</a> of file <a class="el" href="realtimescheduler_8cc_source.html">realtimescheduler.cc</a>.</p>

<p>Referenced by <a class="el" href="realtimescheduler_8cc_source.html#l00238">receiveUntil()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> newEvent = <span class="keyword">false</span>;
    <span class="comment">// prepare sets for select()</span>
    fd_set readFD;
    readFD = <a class="code" href="classRealtimeScheduler.html#a7468f001f080f62bf567b6a56a3b18d4">all_fds</a>;

    timeval timeout;
    timeout.tv_sec = 0;
    timeout.tv_usec = usec;

    <span class="keywordflow">if</span> (select(FD_SETSIZE, &amp;readFD, NULL, NULL, &amp;timeout) &gt; 0) {
        <span class="comment">// Read on all sockets with data</span>
        <span class="keywordflow">for</span> (SOCKET fd = 0; fd &lt;= <a class="code" href="classRealtimeScheduler.html#a1b483610d98af8787a4fcb36903c7796">maxfd</a>; fd++) {
            <span class="keywordflow">if</span> (FD_ISSET(fd, &amp;readFD)) {
                <span class="comment">// Incoming data on netw_fd</span>
                <span class="keywordflow">if</span> (fd == <a class="code" href="classRealtimeScheduler.html#aee2766bfefbbe385593bd0e7f194eba5">netw_fd</a>) {
                    <span class="keywordtype">char</span>* buf = <span class="keyword">new</span> <span class="keywordtype">char</span>[<a class="code" href="classRealtimeScheduler.html#a499bb2a7b02849be46347533a5ed6761">buffersize</a>];
                    <span class="keywordtype">int</span> nBytes;

                    <span class="comment">// FIXME: Ugly. But we want to support IPv4 and IPv6 here, so we</span>
                    <span class="comment">// reserve enough space for the &quot;bigger&quot; address.</span>
                    sockaddr* from = (sockaddr*) <span class="keyword">new</span> sockaddr_in;
                    socklen_t addrlen = <span class="keyword">sizeof</span>(sockaddr_in);

                    <span class="comment">// FIXME: Ugly...</span>
                    getsockname(<a class="code" href="classRealtimeScheduler.html#aee2766bfefbbe385593bd0e7f194eba5">netw_fd</a>, from, &amp;addrlen);
                    <span class="keywordflow">if</span> ( from-&gt;sa_family != SOCK_DGRAM ) {
                        <span class="keyword">delete</span> from;
                        from = 0;
                        addrlen = 0;
                        <span class="comment">// use read() for TUN device</span>
                        nBytes = read(<a class="code" href="classRealtimeScheduler.html#aee2766bfefbbe385593bd0e7f194eba5">netw_fd</a>, buf, <a class="code" href="classRealtimeScheduler.html#a499bb2a7b02849be46347533a5ed6761">buffersize</a>);
                    } <span class="keywordflow">else</span> {
                        addrlen = <span class="keyword">sizeof</span>(sockaddr_in);
                        nBytes = recvfrom(<a class="code" href="classRealtimeScheduler.html#aee2766bfefbbe385593bd0e7f194eba5">netw_fd</a>, buf, <a class="code" href="classRealtimeScheduler.html#a499bb2a7b02849be46347533a5ed6761">buffersize</a>, 0, from, &amp;addrlen);
                    }

                    <span class="keywordflow">if</span> (nBytes &lt; 0) {
                        ev &lt;&lt; <span class="stringliteral">&quot;[RealtimeScheduler::receiveWithTimeout()]\n&quot;</span>
                            &lt;&lt; <span class="stringliteral">&quot;    Error reading from network: &quot;</span> &lt;&lt; strerror(sock_errno())
                            &lt;&lt; endl;
                        <span class="keyword">delete</span>[] buf;
                        buf = NULL;
                        opp_error(<span class="stringliteral">&quot;Read from network device returned an error&quot;</span>);
                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nBytes == 0) {
                        ev &lt;&lt; <span class="stringliteral">&quot;[RealtimeScheduler::receiveWithTimeout()]\n&quot;</span>
                           &lt;&lt; <span class="stringliteral">&quot;    Received 0 byte long UDP packet!&quot;</span> &lt;&lt; endl;
                        <span class="keyword">delete</span>[] buf;
                        buf = NULL;
                    } <span class="keywordflow">else</span> {
                        <span class="comment">// write data to buffer</span>
                        ev &lt;&lt; <span class="stringliteral">&quot;[RealtimeScheduler::receiveWithTimeout()]\n&quot;</span>
                            &lt;&lt; <span class="stringliteral">&quot;    Received &quot;</span> &lt;&lt; nBytes &lt;&lt; <span class="stringliteral">&quot; bytes&quot;</span>
                            &lt;&lt; endl;
                        <a class="code" href="classRealtimeScheduler.html#afc75606ba879c035fe4be9b939012f03">packetBuffer</a>-&gt;push_back(PacketBufferEntry(buf, nBytes, from, addrlen));
                        <span class="comment">// schedule notificationMsg for the interface module</span>
                        <a class="code" href="classRealtimeScheduler.html#a93b772a5520c804c7a208de45e1a1e16" title="send notification msg to module">sendNotificationMsg</a>(<a class="code" href="classRealtimeScheduler.html#a0ef68f82d35f9463e9288f22c628eba4">notificationMsg</a>, <a class="code" href="classRealtimeScheduler.html#ae22161ac4912efe6f5742157181c8060">module</a>);
                        newEvent = <span class="keyword">true</span>;
                    }
                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( fd == <a class="code" href="classRealtimeScheduler.html#a4a9e4639b06fe4f53b9f6002b23333a0">apptun_fd</a> ) {
                    <span class="comment">// Data on application TUN FD</span>
                    <span class="keywordtype">char</span>* buf = <span class="keyword">new</span> <span class="keywordtype">char</span>[<a class="code" href="classRealtimeScheduler.html#a56ae7cce0fa02720803fbca60f1dee71">appBuffersize</a>];
                    <span class="comment">// use read() for TUN device</span>
                    <span class="keywordtype">int</span> nBytes = read(fd, buf, <a class="code" href="classRealtimeScheduler.html#a56ae7cce0fa02720803fbca60f1dee71">appBuffersize</a>);

                    <span class="keywordflow">if</span> (nBytes &lt; 0) {
                        ev &lt;&lt; <span class="stringliteral">&quot;[RealtimeScheduler::receiveWithTimeout()]\n&quot;</span>
                            &lt;&lt; <span class="stringliteral">&quot;    Error reading from application TUN socket: &quot;</span>
                            &lt;&lt; strerror(sock_errno())
                            &lt;&lt; endl;
                        <span class="keyword">delete</span>[] buf;
                        buf = NULL;
                        opp_error(<span class="stringliteral">&quot;Read from application TUN socket returned &quot;</span>
                                  <span class="stringliteral">&quot;an error&quot;</span>);
                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nBytes == 0) {
                        ev &lt;&lt; <span class="stringliteral">&quot;[RealtimeScheduler::receiveWithTimeout()]\n&quot;</span>
                           &lt;&lt; <span class="stringliteral">&quot;    Received 0 byte long UDP packet!&quot;</span> &lt;&lt; endl;
                        <span class="keyword">delete</span>[] buf;
                        buf = NULL;
                    } <span class="keywordflow">else</span> {
                        <span class="comment">// write data to buffer</span>
                        ev &lt;&lt; <span class="stringliteral">&quot;[RealtimeScheduler::receiveWithTimeout()]\n&quot;</span>
                            &lt;&lt; <span class="stringliteral">&quot;    Received &quot;</span> &lt;&lt; nBytes &lt;&lt; <span class="stringliteral">&quot; bytes&quot;</span>
                            &lt;&lt; endl;

                        <a class="code" href="classRealtimeScheduler.html#a9cf297ceaba1fbb4a66d847b348dae3c">appPacketBuffer</a>-&gt;push_back(PacketBufferEntry(buf,
                            nBytes, <a class="code" href="classRealtimeScheduler_1_1PacketBufferEntry.html#a7a03bec74e01f2a01bdf90ed5515c2e6a5868c2bc5289e475113b9e860698f41b">PacketBufferEntry::PACKET_APPTUN_DATA</a>, fd));

                        <span class="comment">// schedule notificationMsg for the interface module</span>
                        <a class="code" href="classRealtimeScheduler.html#a93b772a5520c804c7a208de45e1a1e16" title="send notification msg to module">sendNotificationMsg</a>(<a class="code" href="classRealtimeScheduler.html#ab4eced162d7a38aeccc4c4cd5381f276">appNotificationMsg</a>, <a class="code" href="classRealtimeScheduler.html#af8eaff4ca345f94aaef1fe26c5be508e">appModule</a>);
                        newEvent = <span class="keyword">true</span>;
                    }
                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( fd == <a class="code" href="classRealtimeScheduler.html#adaa65c6934b915a6129a284f952d18ed">additional_fd</a> ) {
                    <span class="comment">// Data on additional FD</span>
                    <a class="code" href="classRealtimeScheduler.html#ad941843b104a83ee36c4700bb6de9da7" title="This function is called from main loop if data is accessible from &amp;quot;additional_fd&amp;quot;.">additionalFD</a>();
                    newEvent = <span class="keyword">true</span>;
                } <span class="keywordflow">else</span> {
                    <span class="comment">// Data on app FD</span>
                    <span class="keywordtype">char</span>* buf = <span class="keyword">new</span> <span class="keywordtype">char</span>[<a class="code" href="classRealtimeScheduler.html#a56ae7cce0fa02720803fbca60f1dee71">appBuffersize</a>];
                    <span class="keywordtype">int</span> nBytes = recv(fd, buf, <a class="code" href="classRealtimeScheduler.html#a56ae7cce0fa02720803fbca60f1dee71">appBuffersize</a>, 0);
                    <span class="keywordflow">if</span> (nBytes &lt; 0) {
                        <span class="keyword">delete</span>[] buf;
                        buf = NULL;
                        ev &lt;&lt; <span class="stringliteral">&quot;[RealtimeScheduler::receiveWithTimeout()]\n&quot;</span>
                            &lt;&lt; <span class="stringliteral">&quot;    Read error from application socket: &quot;</span>
                            &lt;&lt; strerror(sock_errno()) &lt;&lt; endl;
                        opp_error(<span class="stringliteral">&quot;Read from network device returned an error (App)&quot;</span>);
                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nBytes == 0) {
                        <span class="comment">// Application closed Socket</span>
                        ev &lt;&lt; <span class="stringliteral">&quot;[RealtimeScheduler::receiveWithTimeout()]\n&quot;</span>
                            &lt;&lt; <span class="stringliteral">&quot;    Application closed socket&quot;</span>
                            &lt;&lt; endl;
                        <span class="keyword">delete</span>[] buf;
                        buf = NULL;
                        <a class="code" href="classRealtimeScheduler.html#abcd19c1a27de8c11660f61de68e6a8f5" title="Close the application TCP socket.">closeAppSocket</a>(fd);
                        newEvent = <span class="keyword">true</span>;
                    } <span class="keywordflow">else</span> {
                        <span class="comment">// write data to buffer</span>
                        ev &lt;&lt; <span class="stringliteral">&quot;[RealtimeScheduler::receiveWithTimeout()]\n&quot;</span>
                            &lt;&lt; <span class="stringliteral">&quot;    Received &quot;</span> &lt;&lt; nBytes &lt;&lt; <span class="stringliteral">&quot; bytes&quot;</span>
                            &lt;&lt; endl;
                        <a class="code" href="classRealtimeScheduler.html#a9cf297ceaba1fbb4a66d847b348dae3c">appPacketBuffer</a>-&gt;push_back(PacketBufferEntry(buf, nBytes, <a class="code" href="classRealtimeScheduler_1_1PacketBufferEntry.html#a7a03bec74e01f2a01bdf90ed5515c2e6af92d228cb99e7da79963ba1f86d3f8b0">PacketBufferEntry::PACKET_DATA</a>, fd));
                        <span class="comment">// schedule notificationMsg for the interface module</span>
                        <a class="code" href="classRealtimeScheduler.html#a93b772a5520c804c7a208de45e1a1e16" title="send notification msg to module">sendNotificationMsg</a>(<a class="code" href="classRealtimeScheduler.html#ab4eced162d7a38aeccc4c4cd5381f276">appNotificationMsg</a>, <a class="code" href="classRealtimeScheduler.html#af8eaff4ca345f94aaef1fe26c5be508e">appModule</a>);
                        newEvent = <span class="keyword">true</span>;
                    }
                }
            }
        }
    }
    <span class="keywordflow">return</span> newEvent;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="adb359f57379d33cfa8300cdd5beb2487"></a><!-- doxytag: member="RealtimeScheduler::sendBytes" ref="adb359f57379d33cfa8300cdd5beb2487" args="(const char *buf, size_t numBytes, sockaddr *addr=0, socklen_t addrlen=0, bool isApp=false, SOCKET fd=INVALID_SOCKET)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t RealtimeScheduler::sendBytes </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>numBytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sockaddr *&nbsp;</td>
          <td class="paramname"> <em>addr</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">socklen_t&nbsp;</td>
          <td class="paramname"> <em>addrlen</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>isApp</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SOCKET&nbsp;</td>
          <td class="paramname"> <em>fd</em> = <code>INVALID_SOCKET</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send data to network. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>A pointer to the data to be send </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>numBytes</em>&nbsp;</td><td>the length of the data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>isApp</em>&nbsp;</td><td>set to "true" if called from a realworldApp </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>If needed, the destination address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addrlen</em>&nbsp;</td><td>The length of the address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fd</em>&nbsp;</td><td>If connected to more than one external app, set to the corresponding FD. If left to default and multiple apps are connected, the data will be send to one arbitrarily chosen app. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of bytes written, -1 on error </dd></dl>

<p>Definition at line <a class="el" href="realtimescheduler_8cc_source.html#l00338">338</a> of file <a class="el" href="realtimescheduler_8cc_source.html">realtimescheduler.cc</a>.</p>

<p>Referenced by <a class="el" href="XmlRpcInterface_8cc_source.html#l00722">XmlRpcInterface::deliverTunneledMessage()</a>, <a class="el" href="SimpleGameClient_8cc_source.html#l00239">SimpleGameClient::handleLowerMessage()</a>, <a class="el" href="SimpleGameClient_8cc_source.html#l00366">SimpleGameClient::handleRealworldPacket()</a>, <a class="el" href="SimpleGameClient_8cc_source.html#l00157">SimpleGameClient::handleTimerEvent()</a>, <a class="el" href="RealworldConnector_8cc_source.html#l00122">RealworldConnector::transmitToNetwork()</a>, <a class="el" href="SimpleGameClient_8cc_source.html#l00413">SimpleGameClient::updateNeighbors()</a>, and <a class="el" href="XmlRpcInterface_8cc_source.html#l01062">XmlRpcInterface::writeResponse()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!buf) {
        ev &lt;&lt; <span class="stringliteral">&quot;[RealtimeScheduler::sendBytes()]\n&quot;</span>
        &lt;&lt; <span class="stringliteral">&quot;    Error sending packet: buf = NULL&quot;</span>
        &lt;&lt; endl;
        <span class="keywordflow">return</span> -1;
    }
    <span class="keywordflow">if</span> (!isApp) {
        <span class="keywordflow">if</span>( numBytes &gt; <a class="code" href="classRealtimeScheduler.html#a499bb2a7b02849be46347533a5ed6761">buffersize</a> ) {
            ev &lt;&lt; <span class="stringliteral">&quot;[RealtimeScheduler::sendBytes()]\n&quot;</span>
            &lt;&lt; <span class="stringliteral">&quot;    Trying to send oversized packet: size &quot;</span> &lt;&lt; numBytes &lt;&lt; <span class="stringliteral">&quot; mtu &quot;</span> &lt;&lt; <a class="code" href="classRealtimeScheduler.html#a499bb2a7b02849be46347533a5ed6761">buffersize</a>
            &lt;&lt; endl;
            opp_error(<span class="stringliteral">&quot;Can&#39;t send packet: too large&quot;</span>); <span class="comment">//FIXME: Throw exception instead</span>
        }

        <span class="keywordflow">if</span> ( <a class="code" href="classRealtimeScheduler.html#aee2766bfefbbe385593bd0e7f194eba5">netw_fd</a> == INVALID_SOCKET ) {
            ev &lt;&lt; <span class="stringliteral">&quot;[RealtimeScheduler::sendBytes()]\n&quot;</span>
            &lt;&lt; <span class="stringliteral">&quot;    Can&#39;t send packet to network: no tun/udp socket&quot;</span>
            &lt;&lt; endl;
            <span class="keywordflow">return</span> 0;
        }
        <span class="keywordtype">int</span> nBytes;
        <span class="keywordflow">if</span> (addr) {
            nBytes =  sendto(<a class="code" href="classRealtimeScheduler.html#aee2766bfefbbe385593bd0e7f194eba5">netw_fd</a>, buf, numBytes, 0, addr, addrlen);
        } <span class="keywordflow">else</span> {
            <span class="comment">// TUN</span>
            nBytes =  write(<a class="code" href="classRealtimeScheduler.html#aee2766bfefbbe385593bd0e7f194eba5">netw_fd</a>, buf, numBytes);
        }
        <span class="keywordflow">if</span> (nBytes &lt; 0) {
            ev &lt;&lt; <span class="stringliteral">&quot;[RealtimeScheduler::sendBytes()]\n&quot;</span>
            &lt;&lt; <span class="stringliteral">&quot;    Error sending data to network: &quot;</span> &lt;&lt; strerror(sock_errno()) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>
            &lt;&lt; <span class="stringliteral">&quot;    FD = &quot;</span> &lt;&lt; <a class="code" href="classRealtimeScheduler.html#aee2766bfefbbe385593bd0e7f194eba5">netw_fd</a> &lt;&lt; <span class="stringliteral">&quot;, numBytes = &quot;</span> &lt;&lt; numBytes &lt;&lt;  <span class="stringliteral">&quot;, addrlen = &quot;</span> &lt;&lt; addrlen
            &lt;&lt; endl;
        }
        <span class="keywordflow">return</span> nBytes;

    } <span class="keywordflow">else</span> {
        <span class="keywordflow">if</span> (numBytes &gt; <a class="code" href="classRealtimeScheduler.html#a56ae7cce0fa02720803fbca60f1dee71">appBuffersize</a>) {
            ev &lt;&lt; <span class="stringliteral">&quot;[RealtimeScheduler::sendBytes()]\n&quot;</span>
            &lt;&lt; <span class="stringliteral">&quot;    Trying to send oversized packet: size &quot;</span> &lt;&lt; numBytes &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>
            &lt;&lt; <span class="stringliteral">&quot;    mtu &quot;</span> &lt;&lt; <a class="code" href="classRealtimeScheduler.html#a56ae7cce0fa02720803fbca60f1dee71">appBuffersize</a>
            &lt;&lt; endl;
            opp_error(<span class="stringliteral">&quot;Can&#39;t send packet: too large&quot;</span>); <span class="comment">//FIXME: Throw exception instead</span>
        }
        <span class="comment">// If no fd is given, select a &quot;random&quot; one</span>
        <span class="keywordflow">if</span> (fd == INVALID_SOCKET) {
            <span class="keywordflow">for</span> (fd = 0; fd &lt;= <a class="code" href="classRealtimeScheduler.html#a1b483610d98af8787a4fcb36903c7796">maxfd</a>; fd++) {
                <span class="keywordflow">if</span> (fd == <a class="code" href="classRealtimeScheduler.html#aee2766bfefbbe385593bd0e7f194eba5">netw_fd</a>) <span class="keywordflow">continue</span>;
                <span class="keywordflow">if</span> (fd == <a class="code" href="classRealtimeScheduler.html#adaa65c6934b915a6129a284f952d18ed">additional_fd</a>) <span class="keywordflow">continue</span>;
                <span class="keywordflow">if</span> (FD_ISSET(fd, &amp;<a class="code" href="classRealtimeScheduler.html#a7468f001f080f62bf567b6a56a3b18d4">all_fds</a>)) <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">if</span> (fd &gt; <a class="code" href="classRealtimeScheduler.html#a1b483610d98af8787a4fcb36903c7796">maxfd</a>) {
                <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Can&#39;t send packet to Application: no socket&quot;</span>);
            }
        }
        <span class="keywordflow">if</span> (fd == <a class="code" href="classRealtimeScheduler.html#a4a9e4639b06fe4f53b9f6002b23333a0">apptun_fd</a>) {
            <span class="comment">// Application TUN FD</span>
            <span class="keywordflow">return</span> write(fd, buf, numBytes);
        } <span class="keywordflow">else</span> {
            <span class="keywordflow">return</span> send(fd, buf, numBytes, 0);
        }
    }
    <span class="comment">// TBD check for errors</span>
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a93b772a5520c804c7a208de45e1a1e16"></a><!-- doxytag: member="RealtimeScheduler::sendNotificationMsg" ref="a93b772a5520c804c7a208de45e1a1e16" args="(cMessage *msg, cModule *mod)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RealtimeScheduler::sendNotificationMsg </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cModule *&nbsp;</td>
          <td class="paramname"> <em>mod</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>send notification msg to module </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>The notification Message </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mod</em>&nbsp;</td><td>The destination </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="realtimescheduler_8cc_source.html#l00321">321</a> of file <a class="el" href="realtimescheduler_8cc_source.html">realtimescheduler.cc</a>.</p>

<p>Referenced by <a class="el" href="udpoutscheduler_8cc_source.html#l00146">UdpOutScheduler::additionalFD()</a>, <a class="el" href="tunoutscheduler_8cc_source.html#l00139">TunOutScheduler::additionalFD()</a>, <a class="el" href="apptunoutscheduler_8cc_source.html#l00195">AppTunOutScheduler::additionalFD()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00308">closeAppSocket()</a>, and <a class="el" href="realtimescheduler_8cc_source.html#l00104">receiveWithTimeout()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (msg-&gt;isScheduled()) <span class="keywordflow">return</span>; <span class="comment">// Notification already scheduled</span>
    timeval curTime;
    gettimeofday(&amp;curTime, NULL);
    curTime = timeval_substract(curTime, <a class="code" href="classRealtimeScheduler.html#aee4c436fdd6140549dc04f1de5fb4666">baseTime</a>);
    simtime_t t = curTime.tv_sec + curTime.tv_usec*1e-6;

    <span class="comment">// if t &lt; simTime, clock would go backwards. this would be bad...</span>
    <span class="comment">// (this could happen as timeval has a lower number of digits that simtime_t)</span>
    <span class="keywordflow">if</span> (t &lt; simTime()) t = simTime();

    msg-&gt;setSentFrom(mod, -1, simTime());
    msg-&gt;setArrival(mod,-1,t);
    simulation.msgQueue.insert(msg);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8a23b63956df2045a4b86c9e5cbc2dd0"></a><!-- doxytag: member="RealtimeScheduler::setInterfaceModule" ref="a8a23b63956df2045a4b86c9e5cbc2dd0" args="(cModule *module, cMessage *notificationMsg, PacketBuffer *buffer, int mtu, bool isApp=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RealtimeScheduler::setInterfaceModule </td>
          <td>(</td>
          <td class="paramtype">cModule *&nbsp;</td>
          <td class="paramname"> <em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>notificationMsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRealtimeScheduler.html#a79fbe4a4228382420aadd2e7263b6e0b">PacketBuffer</a> *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>mtu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>isApp</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>To be called from the module which wishes to receive data from the tun device. </p>
<p>The method must be called from the module's initialize() function.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>module</em>&nbsp;</td><td>Pointer to the module that wants to receive the data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>notificationMsg</em>&nbsp;</td><td>A pointer to a message that will be scheduled if there is data to read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>A pointer to the buffer the data will be written into </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mtu</em>&nbsp;</td><td>Max allowed packet size </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>isApp</em>&nbsp;</td><td>set to "true" if called from a realworldApp </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="realtimescheduler_8cc_source.html#l00074">74</a> of file <a class="el" href="realtimescheduler_8cc_source.html">realtimescheduler.cc</a>.</p>

<p>Referenced by <a class="el" href="RealworldConnector_8cc_source.html#l00039">RealworldConnector::initialize()</a>, and <a class="el" href="XmlRpcInterface_8cc_source.html#l00433">XmlRpcInterface::initializeApp()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!mod || !notifMsg || !buffer) {
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;RealtimeScheduler: setInterfaceModule(): &quot;</span>
                                <span class="stringliteral">&quot;arguments must be non-NULL&quot;</span>);
    }

    <span class="keywordflow">if</span> (!isApp) {
        <span class="keywordflow">if</span> (<a class="code" href="classRealtimeScheduler.html#ae22161ac4912efe6f5742157181c8060">module</a>) {
            <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;RealtimeScheduler: setInterfaceModule() &quot;</span>
                                    <span class="stringliteral">&quot;already called&quot;</span>);
        }
        <a class="code" href="classRealtimeScheduler.html#ae22161ac4912efe6f5742157181c8060">module</a> = mod;
        <a class="code" href="classRealtimeScheduler.html#a0ef68f82d35f9463e9288f22c628eba4">notificationMsg</a> = notifMsg;
        <a class="code" href="classRealtimeScheduler.html#afc75606ba879c035fe4be9b939012f03">packetBuffer</a> = buffer;
        <a class="code" href="classRealtimeScheduler.html#a499bb2a7b02849be46347533a5ed6761">buffersize</a> = mtu;
    } <span class="keywordflow">else</span> {
        <span class="keywordflow">if</span> (<a class="code" href="classRealtimeScheduler.html#af8eaff4ca345f94aaef1fe26c5be508e">appModule</a>) {
            <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;RealtimeScheduler: setInterfaceModule() &quot;</span>
                                    <span class="stringliteral">&quot;already called&quot;</span>);
        }
        <a class="code" href="classRealtimeScheduler.html#af8eaff4ca345f94aaef1fe26c5be508e">appModule</a> = mod;
        <a class="code" href="classRealtimeScheduler.html#ab4eced162d7a38aeccc4c4cd5381f276">appNotificationMsg</a> = notifMsg;
        <a class="code" href="classRealtimeScheduler.html#a9cf297ceaba1fbb4a66d847b348dae3c">appPacketBuffer</a> = buffer;
        <a class="code" href="classRealtimeScheduler.html#a56ae7cce0fa02720803fbca60f1dee71">appBuffersize</a> = mtu;
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad17465d8885c0b5f8b00375e3adeb680"></a><!-- doxytag: member="RealtimeScheduler::startRun" ref="ad17465d8885c0b5f8b00375e3adeb680" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RealtimeScheduler::startRun </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called at the beginning of a simulation run. </p>

<p>Definition at line <a class="el" href="realtimescheduler_8cc_source.html#l00046">46</a> of file <a class="el" href="realtimescheduler_8cc_source.html">realtimescheduler.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (initsocketlibonce()!=0)
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;RealtimeScheduler: Cannot initialize socket library&quot;</span>);

    gettimeofday(&amp;<a class="code" href="classRealtimeScheduler.html#aee4c436fdd6140549dc04f1de5fb4666">baseTime</a>, NULL);

    <a class="code" href="classRealtimeScheduler.html#af8eaff4ca345f94aaef1fe26c5be508e">appModule</a> = NULL;
    <a class="code" href="classRealtimeScheduler.html#ab4eced162d7a38aeccc4c4cd5381f276">appNotificationMsg</a> = NULL;
    <a class="code" href="classRealtimeScheduler.html#ae22161ac4912efe6f5742157181c8060">module</a> = NULL;
    <a class="code" href="classRealtimeScheduler.html#a0ef68f82d35f9463e9288f22c628eba4">notificationMsg</a> = NULL;

    <a class="code" href="classRealtimeScheduler.html#ae9fa7c77861365573b4d5b8deaa942c6">appConnectionLimit</a> = ev.getConfig()-&gt;getAsInt(CFGID_EXTERNALAPP_CONNECTION_LIMIT, 0);

    <span class="keywordflow">if</span> (<a class="code" href="classRealtimeScheduler.html#aeebd34c4cfa2c9b1b1d1224117b7be3b" title="Initialize the network.">initializeNetwork</a>()) {
        opp_error(<span class="stringliteral">&quot;realtimeScheduler error: initializeNetwork failed\n&quot;</span>);
    }
}
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="adaa65c6934b915a6129a284f952d18ed"></a><!-- doxytag: member="RealtimeScheduler::additional_fd" ref="adaa65c6934b915a6129a284f952d18ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SOCKET <a class="el" href="classRealtimeScheduler.html#adaa65c6934b915a6129a284f952d18ed">RealtimeScheduler::additional_fd</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00086">86</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

<p>Referenced by <a class="el" href="udpoutscheduler_8cc_source.html#l00146">UdpOutScheduler::additionalFD()</a>, <a class="el" href="tunoutscheduler_8cc_source.html#l00139">TunOutScheduler::additionalFD()</a>, <a class="el" href="apptunoutscheduler_8cc_source.html#l00195">AppTunOutScheduler::additionalFD()</a>, <a class="el" href="udpoutscheduler_8cc_source.html#l00044">UdpOutScheduler::initializeNetwork()</a>, <a class="el" href="tunoutscheduler_8cc_source.html#l00045">TunOutScheduler::initializeNetwork()</a>, <a class="el" href="apptunoutscheduler_8cc_source.html#l00044">AppTunOutScheduler::initializeNetwork()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00034">RealtimeScheduler()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00104">receiveWithTimeout()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00338">sendBytes()</a>, <a class="el" href="apptunoutscheduler_8cc_source.html#l00033">AppTunOutScheduler::~AppTunOutScheduler()</a>, <a class="el" href="tunoutscheduler_8cc_source.html#l00031">TunOutScheduler::~TunOutScheduler()</a>, and <a class="el" href="udpoutscheduler_8cc_source.html#l00033">UdpOutScheduler::~UdpOutScheduler()</a>.</p>

</div>
</div>
<a class="anchor" id="a7468f001f080f62bf567b6a56a3b18d4"></a><!-- doxytag: member="RealtimeScheduler::all_fds" ref="a7468f001f080f62bf567b6a56a3b18d4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fd_set <a class="el" href="classRealtimeScheduler.html#a7468f001f080f62bf567b6a56a3b18d4">RealtimeScheduler::all_fds</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00068">68</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

<p>Referenced by <a class="el" href="udpoutscheduler_8cc_source.html#l00146">UdpOutScheduler::additionalFD()</a>, <a class="el" href="tunoutscheduler_8cc_source.html#l00139">TunOutScheduler::additionalFD()</a>, <a class="el" href="apptunoutscheduler_8cc_source.html#l00195">AppTunOutScheduler::additionalFD()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00308">closeAppSocket()</a>, <a class="el" href="udpoutscheduler_8cc_source.html#l00044">UdpOutScheduler::initializeNetwork()</a>, <a class="el" href="tunoutscheduler_8cc_source.html#l00045">TunOutScheduler::initializeNetwork()</a>, <a class="el" href="apptunoutscheduler_8cc_source.html#l00044">AppTunOutScheduler::initializeNetwork()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00034">RealtimeScheduler()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00104">receiveWithTimeout()</a>, and <a class="el" href="realtimescheduler_8cc_source.html#l00338">sendBytes()</a>.</p>

</div>
</div>
<a class="anchor" id="a56ae7cce0fa02720803fbca60f1dee71"></a><!-- doxytag: member="RealtimeScheduler::appBuffersize" ref="a56ae7cce0fa02720803fbca60f1dee71" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classRealtimeScheduler.html#a56ae7cce0fa02720803fbca60f1dee71">RealtimeScheduler::appBuffersize</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00083">83</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

<p>Referenced by <a class="el" href="realtimescheduler_8cc_source.html#l00104">receiveWithTimeout()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00338">sendBytes()</a>, and <a class="el" href="realtimescheduler_8cc_source.html#l00074">setInterfaceModule()</a>.</p>

</div>
</div>
<a class="anchor" id="ae9fa7c77861365573b4d5b8deaa942c6"></a><!-- doxytag: member="RealtimeScheduler::appConnectionLimit" ref="ae9fa7c77861365573b4d5b8deaa942c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRealtimeScheduler.html#ae9fa7c77861365573b4d5b8deaa942c6">RealtimeScheduler::appConnectionLimit</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00084">84</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

<p>Referenced by <a class="el" href="udpoutscheduler_8cc_source.html#l00146">UdpOutScheduler::additionalFD()</a>, <a class="el" href="tunoutscheduler_8cc_source.html#l00139">TunOutScheduler::additionalFD()</a>, <a class="el" href="apptunoutscheduler_8cc_source.html#l00195">AppTunOutScheduler::additionalFD()</a>, and <a class="el" href="realtimescheduler_8cc_source.html#l00046">startRun()</a>.</p>

</div>
</div>
<a class="anchor" id="af8eaff4ca345f94aaef1fe26c5be508e"></a><!-- doxytag: member="RealtimeScheduler::appModule" ref="af8eaff4ca345f94aaef1fe26c5be508e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cModule* <a class="el" href="classRealtimeScheduler.html#af8eaff4ca345f94aaef1fe26c5be508e">RealtimeScheduler::appModule</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00080">80</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

<p>Referenced by <a class="el" href="udpoutscheduler_8cc_source.html#l00146">UdpOutScheduler::additionalFD()</a>, <a class="el" href="tunoutscheduler_8cc_source.html#l00139">TunOutScheduler::additionalFD()</a>, <a class="el" href="apptunoutscheduler_8cc_source.html#l00195">AppTunOutScheduler::additionalFD()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00308">closeAppSocket()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00104">receiveWithTimeout()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00074">setInterfaceModule()</a>, and <a class="el" href="realtimescheduler_8cc_source.html#l00046">startRun()</a>.</p>

</div>
</div>
<a class="anchor" id="ab4eced162d7a38aeccc4c4cd5381f276"></a><!-- doxytag: member="RealtimeScheduler::appNotificationMsg" ref="ab4eced162d7a38aeccc4c4cd5381f276" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="classRealtimeScheduler.html#ab4eced162d7a38aeccc4c4cd5381f276">RealtimeScheduler::appNotificationMsg</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00081">81</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

<p>Referenced by <a class="el" href="udpoutscheduler_8cc_source.html#l00146">UdpOutScheduler::additionalFD()</a>, <a class="el" href="tunoutscheduler_8cc_source.html#l00139">TunOutScheduler::additionalFD()</a>, <a class="el" href="apptunoutscheduler_8cc_source.html#l00195">AppTunOutScheduler::additionalFD()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00308">closeAppSocket()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00104">receiveWithTimeout()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00074">setInterfaceModule()</a>, and <a class="el" href="realtimescheduler_8cc_source.html#l00046">startRun()</a>.</p>

</div>
</div>
<a class="anchor" id="a9cf297ceaba1fbb4a66d847b348dae3c"></a><!-- doxytag: member="RealtimeScheduler::appPacketBuffer" ref="a9cf297ceaba1fbb4a66d847b348dae3c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRealtimeScheduler.html#a79fbe4a4228382420aadd2e7263b6e0b">PacketBuffer</a>* <a class="el" href="classRealtimeScheduler.html#a9cf297ceaba1fbb4a66d847b348dae3c">RealtimeScheduler::appPacketBuffer</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00082">82</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

<p>Referenced by <a class="el" href="udpoutscheduler_8cc_source.html#l00146">UdpOutScheduler::additionalFD()</a>, <a class="el" href="tunoutscheduler_8cc_source.html#l00139">TunOutScheduler::additionalFD()</a>, <a class="el" href="apptunoutscheduler_8cc_source.html#l00195">AppTunOutScheduler::additionalFD()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00308">closeAppSocket()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00104">receiveWithTimeout()</a>, and <a class="el" href="realtimescheduler_8cc_source.html#l00074">setInterfaceModule()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a9e4639b06fe4f53b9f6002b23333a0"></a><!-- doxytag: member="RealtimeScheduler::apptun_fd" ref="a4a9e4639b06fe4f53b9f6002b23333a0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SOCKET <a class="el" href="classRealtimeScheduler.html#a4a9e4639b06fe4f53b9f6002b23333a0">RealtimeScheduler::apptun_fd</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00073">73</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

<p>Referenced by <a class="el" href="realtimescheduler_8h_source.html#l00203">getAppTunFd()</a>, <a class="el" href="apptunoutscheduler_8cc_source.html#l00044">AppTunOutScheduler::initializeNetwork()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00034">RealtimeScheduler()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00104">receiveWithTimeout()</a>, and <a class="el" href="realtimescheduler_8cc_source.html#l00338">sendBytes()</a>.</p>

</div>
</div>
<a class="anchor" id="aee4c436fdd6140549dc04f1de5fb4666"></a><!-- doxytag: member="RealtimeScheduler::baseTime" ref="aee4c436fdd6140549dc04f1de5fb4666" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">timeval <a class="el" href="classRealtimeScheduler.html#aee4c436fdd6140549dc04f1de5fb4666">RealtimeScheduler::baseTime</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00089">89</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

<p>Referenced by <a class="el" href="realtimescheduler_8cc_source.html#l00068">executionResumed()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00265">getNextEvent()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00321">sendNotificationMsg()</a>, and <a class="el" href="realtimescheduler_8cc_source.html#l00046">startRun()</a>.</p>

</div>
</div>
<a class="anchor" id="a499bb2a7b02849be46347533a5ed6761"></a><!-- doxytag: member="RealtimeScheduler::buffersize" ref="a499bb2a7b02849be46347533a5ed6761" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classRealtimeScheduler.html#a499bb2a7b02849be46347533a5ed6761">RealtimeScheduler::buffersize</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00077">77</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

<p>Referenced by <a class="el" href="realtimescheduler_8cc_source.html#l00104">receiveWithTimeout()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00338">sendBytes()</a>, and <a class="el" href="realtimescheduler_8cc_source.html#l00074">setInterfaceModule()</a>.</p>

</div>
</div>
<a class="anchor" id="a1b483610d98af8787a4fcb36903c7796"></a><!-- doxytag: member="RealtimeScheduler::maxfd" ref="a1b483610d98af8787a4fcb36903c7796" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SOCKET <a class="el" href="classRealtimeScheduler.html#a1b483610d98af8787a4fcb36903c7796">RealtimeScheduler::maxfd</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00069">69</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

<p>Referenced by <a class="el" href="udpoutscheduler_8cc_source.html#l00146">UdpOutScheduler::additionalFD()</a>, <a class="el" href="tunoutscheduler_8cc_source.html#l00139">TunOutScheduler::additionalFD()</a>, <a class="el" href="apptunoutscheduler_8cc_source.html#l00195">AppTunOutScheduler::additionalFD()</a>, <a class="el" href="udpoutscheduler_8cc_source.html#l00044">UdpOutScheduler::initializeNetwork()</a>, <a class="el" href="tunoutscheduler_8cc_source.html#l00045">TunOutScheduler::initializeNetwork()</a>, <a class="el" href="apptunoutscheduler_8cc_source.html#l00044">AppTunOutScheduler::initializeNetwork()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00034">RealtimeScheduler()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00104">receiveWithTimeout()</a>, and <a class="el" href="realtimescheduler_8cc_source.html#l00338">sendBytes()</a>.</p>

</div>
</div>
<a class="anchor" id="ae22161ac4912efe6f5742157181c8060"></a><!-- doxytag: member="RealtimeScheduler::module" ref="ae22161ac4912efe6f5742157181c8060" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cModule* <a class="el" href="classRealtimeScheduler.html#ae22161ac4912efe6f5742157181c8060">RealtimeScheduler::module</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00074">74</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

<p>Referenced by <a class="el" href="realtimescheduler_8cc_source.html#l00265">getNextEvent()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00104">receiveWithTimeout()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00074">setInterfaceModule()</a>, and <a class="el" href="realtimescheduler_8cc_source.html#l00046">startRun()</a>.</p>

</div>
</div>
<a class="anchor" id="aee2766bfefbbe385593bd0e7f194eba5"></a><!-- doxytag: member="RealtimeScheduler::netw_fd" ref="aee2766bfefbbe385593bd0e7f194eba5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SOCKET <a class="el" href="classRealtimeScheduler.html#aee2766bfefbbe385593bd0e7f194eba5">RealtimeScheduler::netw_fd</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00072">72</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

<p>Referenced by <a class="el" href="udpoutscheduler_8cc_source.html#l00146">UdpOutScheduler::additionalFD()</a>, <a class="el" href="tunoutscheduler_8cc_source.html#l00139">TunOutScheduler::additionalFD()</a>, <a class="el" href="apptunoutscheduler_8cc_source.html#l00195">AppTunOutScheduler::additionalFD()</a>, <a class="el" href="udpoutscheduler_8cc_source.html#l00044">UdpOutScheduler::initializeNetwork()</a>, <a class="el" href="tunoutscheduler_8cc_source.html#l00045">TunOutScheduler::initializeNetwork()</a>, <a class="el" href="apptunoutscheduler_8cc_source.html#l00044">AppTunOutScheduler::initializeNetwork()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00034">RealtimeScheduler()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00104">receiveWithTimeout()</a>, and <a class="el" href="realtimescheduler_8cc_source.html#l00338">sendBytes()</a>.</p>

</div>
</div>
<a class="anchor" id="a0ef68f82d35f9463e9288f22c628eba4"></a><!-- doxytag: member="RealtimeScheduler::notificationMsg" ref="a0ef68f82d35f9463e9288f22c628eba4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="classRealtimeScheduler.html#a0ef68f82d35f9463e9288f22c628eba4">RealtimeScheduler::notificationMsg</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00075">75</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

<p>Referenced by <a class="el" href="realtimescheduler_8cc_source.html#l00104">receiveWithTimeout()</a>, <a class="el" href="realtimescheduler_8cc_source.html#l00074">setInterfaceModule()</a>, and <a class="el" href="realtimescheduler_8cc_source.html#l00046">startRun()</a>.</p>

</div>
</div>
<a class="anchor" id="afc75606ba879c035fe4be9b939012f03"></a><!-- doxytag: member="RealtimeScheduler::packetBuffer" ref="afc75606ba879c035fe4be9b939012f03" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRealtimeScheduler.html#a79fbe4a4228382420aadd2e7263b6e0b">PacketBuffer</a>* <a class="el" href="classRealtimeScheduler.html#afc75606ba879c035fe4be9b939012f03">RealtimeScheduler::packetBuffer</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="realtimescheduler_8h_source.html#l00076">76</a> of file <a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a>.</p>

<p>Referenced by <a class="el" href="realtimescheduler_8cc_source.html#l00104">receiveWithTimeout()</a>, and <a class="el" href="realtimescheduler_8cc_source.html#l00074">setInterfaceModule()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="realtimescheduler_8h_source.html">realtimescheduler.h</a></li>
<li><a class="el" href="realtimescheduler_8cc_source.html">realtimescheduler.cc</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 3 2010 14:40:54 for OverSim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
