<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OverSim: BootstrapList Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a>  </div>
  <div class="headertitle">
<h1>BootstrapList Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="BootstrapList" --><!-- doxytag: inherits="BaseApp" -->
<p>The <a class="el" href="classBootstrapList.html" title="The BootstrapList module maintains a list of bootstrap node candidates.">BootstrapList</a> module maintains a list of bootstrap node candidates.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="BootstrapList_8h_source.html">BootstrapList.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for BootstrapList:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classBootstrapList.png" usemap="#BootstrapList_map" alt=""/>
  <map id="BootstrapList_map" name="BootstrapList_map">
<area href="classBaseApp.html" alt="BaseApp" shape="rect" coords="57,112,162,136"/>
<area href="classBaseRpc.html" alt="BaseRpc" shape="rect" coords="0,56,105,80"/>
<area href="classBaseTcpSupport.html" alt="BaseTcpSupport" shape="rect" coords="115,56,220,80"/>
<area href="classRpcListener.html" alt="RpcListener" shape="rect" coords="0,0,105,24"/>
</map>
</div>

<p><a href="classBootstrapList-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a9518805c3b5c30363b771ad6b3afbf62">BootstrapList</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a812a4a0f9bdb357b7a412745d78af485">~BootstrapList</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classTransportAddress.html">TransportAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#af6e1422372d548ba574e136c1a10ccaa">getBootstrapNode</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classGet.html">Get</a> a bootstrap node from the bootstrap list.  <a href="#af6e1422372d548ba574e136c1a10ccaa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a79698f8c7831d65c159f3ef6104657e9">locateBootstrapNode</a> (const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;node)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine locality of a bootstrap node.  <a href="#a79698f8c7831d65c159f3ef6104657e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a86d64b1912983ab53010770fe3c85b28">insertBootstrapCandidate</a> (const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;node, <a class="el" href="BootstrapNodeHandle_8h.html#a68a006cef1615ffd58c7e3a75e79a1fe">BootstrapNodePrioType</a> prio=DNSSD)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Inserts a new bootstrap candidate into the bootstrap list.  <a href="#a86d64b1912983ab53010770fe3c85b28"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a66dd8a1e515b110d979c285bb05c8746">insertBootstrapCandidate</a> (<a class="el" href="classBootstrapNodeHandle.html">BootstrapNodeHandle</a> &amp;node)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a4c10a655a2e88ae6535efd2a593babdc">removeBootstrapCandidate</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;addr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove an unavailable bootstrap candidate from the bootstraplist.  <a href="#a4c10a655a2e88ae6535efd2a593babdc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#ae3599c25687b302037e58d3ca68411cd">removeBootstrapNode</a> (const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;node)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a2b29d94b378a75148b777f560adcef13">registerBootstrapNode</a> (const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;node)</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a3eb9d08b32d70520df0d389731090ec9">pingResponse</a> (<a class="el" href="classPingResponse.html">PingResponse</a> *pingResponse, cPolymorphic *context, int rpcId, simtime_t rtt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a092a947c1ff84f394e21280413422f88">pingTimeout</a> (<a class="el" href="classPingCall.html">PingCall</a> *pingCall, const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;dest, cPolymorphic *context, int rpcId)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#afc728864c09b313a7386620c7a93e8fd">getThisCompType</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a4a17d8ab00df76ffc560cdefe215efdd">initializeApp</a> (int stage)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">initializes derived class-attributes  <a href="#a4a17d8ab00df76ffc560cdefe215efdd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a36d16559b877109776504bf14e857842">finishApp</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">collects statistical data of derived app  <a href="#a36d16559b877109776504bf14e857842"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a465386a586f06798cf30460d1c8b89cd">handleTimerEvent</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a32b8169611d2b335c35477a4b0f7bf6e">handleBootstrapListTimerExpired</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Periodic maintenance method for the bootstrap list.  <a href="#a32b8169611d2b335c35477a4b0f7bf6e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a0c9acb2a493d495172817fa117ba22b8">handleRpcResponse</a> (<a class="el" href="classBaseResponseMessage.html">BaseResponseMessage</a> *msg, cPolymorphic *context, int rpcId, simtime_t rtt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a9ae0f4abe8da6c389ac889591335407c">handleLookupResponse</a> (<a class="el" href="classLookupResponse.html">LookupResponse</a> *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle the response for a lookup rpc.  <a href="#a9ae0f4abe8da6c389ac889591335407c"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="BootstrapList_8h.html#acaca2f91cc129122d49820f698f057ce">BootstrapNodeSet</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a37dfd0340123ec8aaeb7d36a49bad440">timerMsg</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">self-message for periodic maintenance  <a href="#a37dfd0340123ec8aaeb7d36a49bad440"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classZeroconfConnector.html">ZeroconfConnector</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a40d8f1f978f4272b654199d0a642e708">zeroconfConnector</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">pointer to the <a class="el" href="classZeroconfConnector.html" title="Zeroconf module.">ZeroconfConnector</a> module  <a href="#a40d8f1f978f4272b654199d0a642e708"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a59d4c29e9646b9b23326e8ced1e4941f">mergeOverlayPartitions</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">if true, detect and merge overlay partitions  <a href="#a59d4c29e9646b9b23326e8ced1e4941f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#a27e19ec0c850933b931fd2f4ca75e500">maintainList</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">maintain a list of bootstrap candidates and check them periodically  <a href="#a27e19ec0c850933b931fd2f4ca75e500"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBootstrapList.html#ad2b316633621b5c9aa0886d042ace1c9">timerInterval</a> = 10</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the interval of the maintenance timer in seconds  <a href="#ad2b316633621b5c9aa0886d042ace1c9"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The <a class="el" href="classBootstrapList.html" title="The BootstrapList module maintains a list of bootstrap node candidates.">BootstrapList</a> module maintains a list of bootstrap node candidates. </p>
<p>The <a class="el" href="classBootstrapList.html" title="The BootstrapList module maintains a list of bootstrap node candidates.">BootstrapList</a> module maintains a list of bootstrap node candidates received from various sources (<a class="el" href="classGlobalNodeList.html" title="Global module (formerly known as GlobalNodeList) that supports the node bootstrap process and contain...">GlobalNodeList</a> for simulations and <a class="el" href="classZeroconfConnector.html" title="Zeroconf module.">ZeroconfConnector</a> for SingleHostUnderlay). This list is also used to detect overlay partitions and triggers the merging process.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Bin Zheng, Ingmar Baumgart </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classBootstrapList.html" title="The BootstrapList module maintains a list of bootstrap node candidates.">BootstrapList</a> </dd></dl>

<p>Definition at line <a class="el" href="BootstrapList_8h_source.html#l00053">53</a> of file <a class="el" href="BootstrapList_8h_source.html">BootstrapList.h</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a9518805c3b5c30363b771ad6b3afbf62"></a><!-- doxytag: member="BootstrapList::BootstrapList" ref="a9518805c3b5c30363b771ad6b3afbf62" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BootstrapList::BootstrapList </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BootstrapList_8cc_source.html#l00059">59</a> of file <a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classBootstrapList.html#a40d8f1f978f4272b654199d0a642e708" title="pointer to the ZeroconfConnector module">zeroconfConnector</a> = NULL;
    <a class="code" href="classBootstrapList.html#a37dfd0340123ec8aaeb7d36a49bad440" title="self-message for periodic maintenance">timerMsg</a> = NULL;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a812a4a0f9bdb357b7a412745d78af485"></a><!-- doxytag: member="BootstrapList::~BootstrapList" ref="a812a4a0f9bdb357b7a412745d78af485" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BootstrapList::~BootstrapList </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BootstrapList_8cc_source.html#l00066">66</a> of file <a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    cancelAndDelete(<a class="code" href="classBootstrapList.html#a37dfd0340123ec8aaeb7d36a49bad440" title="self-message for periodic maintenance">timerMsg</a>);
}
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a36d16559b877109776504bf14e857842"></a><!-- doxytag: member="BootstrapList::finishApp" ref="a36d16559b877109776504bf14e857842" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BootstrapList::finishApp </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>collects statistical data of derived app </p>

<p>Reimplemented from <a class="el" href="classBaseApp.html#a9702f80de642a3e090aaf5bedea8e4a6">BaseApp</a>.</p>

<p>Definition at line <a class="el" href="BootstrapList_8cc_source.html#l00376">376</a> of file <a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">// dump the list of bootstrap nodes into the local cache only when</span>
    <span class="comment">// using SingleHostUnderlayConfigurator</span>
    <span class="keywordflow">if</span> (<a class="code" href="classBootstrapList.html#a40d8f1f978f4272b654199d0a642e708" title="pointer to the ZeroconfConnector module">zeroconfConnector</a>) {
        ofstream nodeListFile(<span class="stringliteral">&quot;nodelist.dat&quot;</span>, ios::out|ios::trunc);
        <span class="keywordflow">if</span> (!nodeListFile) {
            std::cerr &lt;&lt; <span class="stringliteral">&quot;nodelist.dat could not be opened&quot;</span> &lt;&lt; endl;
        } <span class="keywordflow">else</span> {
            <span class="keywordflow">for</span> (BootstrapNodeSet::iterator iter = <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.begin();
                 iter != <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.end(); iter++) {
                nodeListFile &lt;&lt; iter-&gt;second-&gt;getIp().str() &lt;&lt; <span class="charliteral">&#39; &#39;</span>
                             &lt;&lt; iter-&gt;second-&gt;getPort() &lt;&lt; <span class="charliteral">&#39; &#39;</span>
                             &lt;&lt; iter-&gt;second-&gt;getKey().toString(16) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
            }
            nodeListFile.close();
        }
    }

    <span class="comment">// delete all bootstrap nodes and clear the list</span>
    <span class="keywordflow">for</span> (BootstrapNodeSet::iterator iter = <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.begin();
         iter != <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.end(); iter++) {
        <span class="keyword">delete</span> iter-&gt;second;
    }

    <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.clear();
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="af6e1422372d548ba574e136c1a10ccaa"></a><!-- doxytag: member="BootstrapList::getBootstrapNode" ref="af6e1422372d548ba574e136c1a10ccaa" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classTransportAddress.html">TransportAddress</a> BootstrapList::getBootstrapNode </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classGet.html">Get</a> a bootstrap node from the bootstrap list. </p>
<p>If not using <a class="el" href="classSingleHostUnderlayConfigurator.html">SingleHostUnderlayConfigurator</a> and the list is empty, return a node by asking the <a class="el" href="classGlobalNodeList.html" title="Global module (formerly known as GlobalNodeList) that supports the node bootstrap process and contain...">GlobalNodeList</a>. </p>

<p>Definition at line <a class="el" href="BootstrapList_8cc_source.html#l00236">236</a> of file <a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">BasePastry::baseChangeState()</a>, <a class="el" href="Nice_8cc_source.html#l00246">oversim::Nice::changeState()</a>, <a class="el" href="Gia_8cc_source.html#l00124">Gia::changeState()</a>, <a class="el" href="Chord_8cc_source.html#l00151">oversim::Chord::changeState()</a>, <a class="el" href="Broose_8cc_source.html#l00145">Broose::changeState()</a>, <a class="el" href="NTree_8cc_source.html#l00238">NTree::handleAppMessage()</a>, <a class="el" href="Vast_8cc_source.html#l00721">Vast::handleJoin()</a>, <a class="el" href="Quon_8cc_source.html#l00651">Quon::handleJoin()</a>, and <a class="el" href="Kademlia_8cc_source.html#l00203">Kademlia::joinOverlay()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="classBootstrapList.html#a27e19ec0c850933b931fd2f4ca75e500" title="maintain a list of bootstrap candidates and check them periodically">maintainList</a>) {
        <span class="comment">// TODO: add a parameter to return malicious bootstrap nodes also</span>
        <span class="keywordflow">return</span> <a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7" title="pointer to GlobalNodeList in this node">globalNodeList</a>-&gt;<a class="code" href="classGlobalNodeList.html#a435c92d292f03cb4aca99b9ec84e4f56" title="Returns a random NodeHandle.">getRandomNode</a>(-1, <span class="keyword">true</span>, <span class="keyword">true</span>);
        <span class="comment">// return overlay-&gt;globalNodeList-&gt;getBootstrapNode();</span>
    } <span class="keywordflow">else</span> {
        <span class="keyword">const</span> <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a> *bootstrapNode = &amp;<a class="code" href="classNodeHandle.html#a79bf2c5e29c969cbd0b2581cb188d8a6" title="the unspecified NodeHandle">NodeHandle::UNSPECIFIED_NODE</a>;
        <span class="keywordtype">int</span> i, j = 0;

        <span class="comment">// pick a random node from the list</span>
        <span class="keywordflow">if</span> (!<a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.empty()) {
            i = intrand(<a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.size());
            BootstrapNodeSet::iterator iter = <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.begin();

            <span class="keywordflow">while</span> (j &lt; i) {
                iter++;
                j++;
            }

            bootstrapNode = (<a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a> *)iter-&gt;second;
        } <span class="keywordflow">else</span> {
            <span class="comment">// if the list empty, get a bootstrap node from GlobalNodeList</span>
            <span class="keywordflow">if</span> (!<a class="code" href="classBootstrapList.html#a40d8f1f978f4272b654199d0a642e708" title="pointer to the ZeroconfConnector module">zeroconfConnector</a>)
                bootstrapNode = &amp;<a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7" title="pointer to GlobalNodeList in this node">globalNodeList</a>-&gt;
                        <a class="code" href="classBootstrapList.html#af6e1422372d548ba574e136c1a10ccaa" title="Get a bootstrap node from the bootstrap list.">getBootstrapNode</a>(<a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>());
        }
        <span class="keywordflow">return</span> *bootstrapNode;
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="afc728864c09b313a7386620c7a93e8fd"></a><!-- doxytag: member="BootstrapList::getThisCompType" ref="afc728864c09b313a7386620c7a93e8fd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a> BootstrapList::getThisCompType </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classBaseApp.html#a5125ad4468014966598aeb9630242a45">BaseApp</a>.</p>

<p>Definition at line <a class="el" href="BootstrapList_8h_source.html#l00110">110</a> of file <a class="el" href="BootstrapList_8h_source.html">BootstrapList.h</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> BOOTSTRAPLIST_COMP; };
</pre></div></p>

</div>
</div>
<a class="anchor" id="a32b8169611d2b335c35477a4b0f7bf6e"></a><!-- doxytag: member="BootstrapList::handleBootstrapListTimerExpired" ref="a32b8169611d2b335c35477a4b0f7bf6e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BootstrapList::handleBootstrapListTimerExpired </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Periodic maintenance method for the bootstrap list. </p>

<p>Definition at line <a class="el" href="BootstrapList_8cc_source.html#l00139">139</a> of file <a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a>.</p>

<p>Referenced by <a class="el" href="BootstrapList_8cc_source.html#l00128">handleTimerEvent()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    simtime_t current = simTime();
    <a class="code" href="classBootstrapNodeHandle.html">BootstrapNodeHandle</a> *node;
    BootstrapNodeSet::iterator iter;

    <span class="keywordflow">for</span> (iter = <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.begin(); iter != <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.end(); iter++) {
        node = iter-&gt;second;
        <span class="keywordflow">if</span> (<a class="code" href="classBootstrapList.html#ad2b316633621b5c9aa0886d042ace1c9" title="the interval of the maintenance timer in seconds">timerInterval</a> &lt;= SIMTIME_DBL(current - node-&gt;<a class="code" href="classBootstrapNodeHandle.html#a8474a2bed3ba1e4eb5a5588ef056802e">getLastPing</a>())) {
            <a class="code" href="classBaseRpc.html#a421904b1b501580efed12e6490d3324a" title="ping a node by its TransportAddress">pingNode</a>(*node);
        }
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9ae0f4abe8da6c389ac889591335407c"></a><!-- doxytag: member="BootstrapList::handleLookupResponse" ref="a9ae0f4abe8da6c389ac889591335407c" args="(LookupResponse *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BootstrapList::handleLookupResponse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classLookupResponse.html">LookupResponse</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle the response for a lookup rpc. </p>
<p>This is used to detected foreign overlay partitions</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>The lookup response message </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BootstrapList_8cc_source.html#l00171">171</a> of file <a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a>.</p>

<p>Referenced by <a class="el" href="BootstrapList_8cc_source.html#l00154">handleRpcResponse()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    EV &lt;&lt; <span class="stringliteral">&quot;[BootstrapList::handleLookupResponse() @ &quot;</span>
       &lt;&lt; <a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>().<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
       &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>().<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
       &lt;&lt; <span class="stringliteral">&quot;    Lookup response for key &quot;</span> &lt;&lt; msg-&gt;<a class="code" href="classLookupResponse.html#a0eb7ae69a84948251e35be07be9e3911">getKey</a>()&lt;&lt; <span class="stringliteral">&quot; : &quot;</span>;

    <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="classLookupResponse.html#a86a9d5fd7849c18b989f2e5260cfbf12">getIsValid</a>()) {
        <span class="keywordflow">for</span> (uint32_t i=0; i&lt;msg-&gt;<a class="code" href="classLookupResponse.html#a294d30cb0b365a24c1b1bff9478f45ef">getSiblingsArraySize</a>(); i++) {
            <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="classLookupResponse.html#a4c0f21b5ab1a7865cd23d8f6e3a1640c">getSiblings</a>(i).<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>() == msg-&gt;<a class="code" href="classLookupResponse.html#a0eb7ae69a84948251e35be07be9e3911">getKey</a>()) {
                EV &lt;&lt; <span class="stringliteral">&quot;Key &quot;</span> &lt;&lt; msg-&gt;<a class="code" href="classLookupResponse.html#a4c0f21b5ab1a7865cd23d8f6e3a1640c">getSiblings</a>(i)
                   &lt;&lt; <span class="stringliteral">&quot;belongs to a local node.&quot;</span> &lt;&lt; endl;
                <span class="keywordflow">return</span>;
            }
        }

        EV &lt;&lt; <span class="stringliteral">&quot;New partition discovered, going to join.&quot;</span> &lt;&lt; endl;
        BootstrapNodeSet::iterator iter;
        <span class="keywordflow">for</span> (iter = <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.begin(); iter != <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.end(); iter++) {
            <span class="keywordflow">if</span> (iter-&gt;second-&gt;getKey() == msg-&gt;<a class="code" href="classLookupResponse.html#a0eb7ae69a84948251e35be07be9e3911">getKey</a>())
                <a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseOverlay.html#ad032eda7f8a65884cf8c6d141224331e" title="Join another overlay partition with the given node as bootstrap node.">joinForeignPartition</a>(*iter-&gt;second);
        }

    } <span class="keywordflow">else</span> {
        EV &lt;&lt; <span class="stringliteral">&quot;failed&quot;</span> &lt;&lt; endl;
    }

    <span class="keywordflow">return</span>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0c9acb2a493d495172817fa117ba22b8"></a><!-- doxytag: member="BootstrapList::handleRpcResponse" ref="a0c9acb2a493d495172817fa117ba22b8" args="(BaseResponseMessage *msg, cPolymorphic *context, int rpcId, simtime_t rtt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BootstrapList::handleRpcResponse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseResponseMessage.html">BaseResponseMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPolymorphic *&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rpcId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&nbsp;</td>
          <td class="paramname"> <em>rtt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BootstrapList_8cc_source.html#l00154">154</a> of file <a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="RpcMacros_8h.html#aa75b135e279b574267e1a7dc4ab79da4" title="Marks the beginning of a Remote-Procedure-Call Switch block.">RPC_SWITCH_START</a>(msg)
    <a class="code" href="RpcMacros_8h.html#a0394d2dc4f9f1e15d7e99c9f43da10c7">RPC_ON_RESPONSE</a>(<a class="code" href="classLookup.html">Lookup</a>) {
        <a class="code" href="classBootstrapList.html#a9ae0f4abe8da6c389ac889591335407c" title="Handle the response for a lookup rpc.">handleLookupResponse</a>(_LookupResponse);
        EV &lt;&lt; <span class="stringliteral">&quot;[BootstrapList::handleRpcResponse() @ &quot;</span>
           &lt;&lt; <a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>().<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>().<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    Lookup RPC Response received: id=&quot;</span> &lt;&lt; rpcId &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    msg=&quot;</span> &lt;&lt; *_LookupResponse &lt;&lt; <span class="stringliteral">&quot; rtt=&quot;</span> &lt;&lt; rtt
           &lt;&lt; endl;
    }
    <a class="code" href="RpcMacros_8h.html#a29a8a3f21e67ecb25f58608a54df5191" title="Marks the end of a Remote-Procedure-Call Switch block.">RPC_SWITCH_END</a>( )
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a465386a586f06798cf30460d1c8b89cd"></a><!-- doxytag: member="BootstrapList::handleTimerEvent" ref="a465386a586f06798cf30460d1c8b89cd" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BootstrapList::handleTimerEvent </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BootstrapList_8cc_source.html#l00128">128</a> of file <a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (msg == <a class="code" href="classBootstrapList.html#a37dfd0340123ec8aaeb7d36a49bad440" title="self-message for periodic maintenance">timerMsg</a>) {
        <a class="code" href="classBootstrapList.html#a32b8169611d2b335c35477a4b0f7bf6e" title="Periodic maintenance method for the bootstrap list.">handleBootstrapListTimerExpired</a>();
        scheduleAt(simTime() + <a class="code" href="classBootstrapList.html#ad2b316633621b5c9aa0886d042ace1c9" title="the interval of the maintenance timer in seconds">timerInterval</a>, msg);
    } <span class="keywordflow">else</span> {
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;BootstrapList::handleTimerEvent(): &quot;</span>
                             <span class="stringliteral">&quot;Received unknown self-message!&quot;</span>);
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4a17d8ab00df76ffc560cdefe215efdd"></a><!-- doxytag: member="BootstrapList::initializeApp" ref="a4a17d8ab00df76ffc560cdefe215efdd" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BootstrapList::initializeApp </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>initializes derived class-attributes </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>stage</em>&nbsp;</td><td>the init stage </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classBaseApp.html#ac9a059a2cfb67f4c38f462bb1383e795">BaseApp</a>.</p>

<p>Definition at line <a class="el" href="BootstrapList_8cc_source.html#l00072">72</a> of file <a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (stage != <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532aa906fbde207e9a5d9454f2ffaf341e66">MIN_STAGE_COMPONENTS</a>) {
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="classBootstrapList.html#a59d4c29e9646b9b23326e8ced1e4941f" title="if true, detect and merge overlay partitions">mergeOverlayPartitions</a> = par(<span class="stringliteral">&quot;mergeOverlayPartitions&quot;</span>);
    <a class="code" href="classBootstrapList.html#a27e19ec0c850933b931fd2f4ca75e500" title="maintain a list of bootstrap candidates and check them periodically">maintainList</a> = par(<span class="stringliteral">&quot;maintainList&quot;</span>);

    <span class="keywordflow">if</span> (getParentModule()-&gt;getParentModule()-&gt;getSubmodule(<span class="stringliteral">&quot;zeroconfConnector&quot;</span>, 0)) {
        <a class="code" href="classBootstrapList.html#a40d8f1f978f4272b654199d0a642e708" title="pointer to the ZeroconfConnector module">zeroconfConnector</a> = check_and_cast&lt;<a class="code" href="classZeroconfConnector.html" title="Zeroconf module.">ZeroconfConnector</a> *&gt;(getParentModule()-&gt;
                getParentModule()-&gt;getSubmodule(<span class="stringliteral">&quot;zeroconfConnector&quot;</span>, 0));
        <span class="keywordflow">if</span> (!<a class="code" href="classBootstrapList.html#a40d8f1f978f4272b654199d0a642e708" title="pointer to the ZeroconfConnector module">zeroconfConnector</a>-&gt;<a class="code" href="classZeroconfConnector.html#a83b0b55e7b414b6f98d29f8c301a1a33">isEnabled</a>()) {
            <a class="code" href="classBootstrapList.html#a40d8f1f978f4272b654199d0a642e708" title="pointer to the ZeroconfConnector module">zeroconfConnector</a> = NULL;
        }
    }

    <span class="comment">// load local cache list only when using SingleHostUnderlayConfigurator</span>
    <span class="keywordflow">if</span> (<a class="code" href="classBootstrapList.html#a40d8f1f978f4272b654199d0a642e708" title="pointer to the ZeroconfConnector module">zeroconfConnector</a>) {
        ifstream nodeListFile(<span class="stringliteral">&quot;nodelist.dat&quot;</span>, ios::in);
        <span class="keywordflow">if</span> (!nodeListFile) {
            EV &lt;&lt; <span class="stringliteral">&quot;[BootstrapList::initializeApp() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>().<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
               &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>().<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>() &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
               &lt;&lt; <span class="stringliteral">&quot;    nodelist.dat not found&quot;</span>
               &lt;&lt; endl;
        } <span class="keywordflow">else</span> {
            <span class="keywordtype">char</span> address[16];
            <span class="keywordtype">int</span> port;
            <span class="keywordtype">string</span> key;
            <a class="code" href="classBootstrapNodeHandle.html">BootstrapNodeHandle</a> *node;

            <span class="keywordflow">while</span> (nodeListFile &gt;&gt; address &gt;&gt; port &gt;&gt; key) {
                node = <span class="keyword">new</span> <a class="code" href="classBootstrapNodeHandle.html">BootstrapNodeHandle</a>(<a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>(key, 16),
                                               IPvXAddress(address), port,
                                               <a class="code" href="BootstrapNodeHandle_8h.html#a68a006cef1615ffd58c7e3a75e79a1fea1c40da5431ef614ba2eea7e7e3eed53d">CACHE</a>);
                <span class="keywordflow">if</span> (node)
                    <a class="code" href="classBootstrapList.html#a86d64b1912983ab53010770fe3c85b28" title="Inserts a new bootstrap candidate into the bootstrap list.">insertBootstrapCandidate</a>(*node);
            }
            nodeListFile.close();

            <span class="comment">//TODO</span>
            <span class="keywordflow">if</span> (<a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.size()) <a class="code" href="classBaseApp.html#ac635f18b9774989ad383f6c4e79d0656">sendReadyMessage</a>();
        }
    } <span class="keywordflow">else</span> {
        <a class="code" href="classBaseApp.html#ac635f18b9774989ad383f6c4e79d0656">sendReadyMessage</a>();
    }

    <a class="code" href="hashWatch_8h.html#ae15520d5e275d3c6aef5da79fb633201" title="Makes unordered_maps inspectable in Tkenv.">WATCH_UNORDERED_MAP</a>(<a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>);

    <span class="keywordflow">if</span> (<a class="code" href="classBootstrapList.html#a27e19ec0c850933b931fd2f4ca75e500" title="maintain a list of bootstrap candidates and check them periodically">maintainList</a>) {
        <a class="code" href="classBootstrapList.html#a37dfd0340123ec8aaeb7d36a49bad440" title="self-message for periodic maintenance">timerMsg</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;BootstrapListTimer&quot;</span>);
        scheduleAt(simTime() + <a class="code" href="classBootstrapList.html#ad2b316633621b5c9aa0886d042ace1c9" title="the interval of the maintenance timer in seconds">timerInterval</a>, <a class="code" href="classBootstrapList.html#a37dfd0340123ec8aaeb7d36a49bad440" title="self-message for periodic maintenance">timerMsg</a>);
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a86d64b1912983ab53010770fe3c85b28"></a><!-- doxytag: member="BootstrapList::insertBootstrapCandidate" ref="a86d64b1912983ab53010770fe3c85b28" args="(const NodeHandle &amp;node, BootstrapNodePrioType prio=DNSSD)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BootstrapList::insertBootstrapCandidate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="BootstrapNodeHandle_8h.html#a68a006cef1615ffd58c7e3a75e79a1fe">BootstrapNodePrioType</a>&nbsp;</td>
          <td class="paramname"> <em>prio</em> = <code>DNSSD</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Inserts a new bootstrap candidate into the bootstrap list. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>node</em>&nbsp;</td><td>the bootstrap candidate </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>prio</em>&nbsp;</td><td>priority of the bootstrap node </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true, if bootstrap node is already in the list </dd></dl>

<p>Definition at line <a class="el" href="BootstrapList_8cc_source.html#l00285">285</a> of file <a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a>.</p>

<p>Referenced by <a class="el" href="BootstrapList_8cc_source.html#l00072">initializeApp()</a>, and <a class="el" href="GlobalNodeList_8cc_source.html#l00449">GlobalNodeList::mergeBootstrapNodes()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    Enter_Method_Silent();

    BootstrapNodeSet::iterator iter;
    <a class="code" href="classBootstrapNodeHandle.html">BootstrapNodeHandle</a> *bootstrapNode;

    <span class="comment">// if node already in the list, update its lastPing and nodePrio fields</span>
    <span class="keywordflow">if</span> ((iter = <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.find(node)) != <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.end()) {
        iter-&gt;second-&gt;setLastPing(simTime());
        iter-&gt;second-&gt;setNodePrio(prio);

        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }

    <span class="keywordflow">if</span> ((bootstrapNode = <span class="keyword">new</span> <a class="code" href="classBootstrapNodeHandle.html">BootstrapNodeHandle</a>(node, prio))) {
        bootstrapNode-&gt;<a class="code" href="classBootstrapNodeHandle.html#a4ed6dba23c1020820e2a4429e27277d8">setLastPing</a>(simTime());
        <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.insert(<a class="code" href="BootstrapList_8h.html#a73111df7a3d2967658283b0d5711013f">NodePair</a>(*bootstrapNode, bootstrapNode));
    }

    <a class="code" href="classBootstrapList.html#a79698f8c7831d65c159f3ef6104657e9" title="Determine locality of a bootstrap node.">locateBootstrapNode</a>(node);

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a66dd8a1e515b110d979c285bb05c8746"></a><!-- doxytag: member="BootstrapList::insertBootstrapCandidate" ref="a66dd8a1e515b110d979c285bb05c8746" args="(BootstrapNodeHandle &amp;node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BootstrapList::insertBootstrapCandidate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBootstrapNodeHandle.html">BootstrapNodeHandle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BootstrapList_8cc_source.html#l00312">312</a> of file <a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    Enter_Method_Silent();

    BootstrapNodeSet::iterator iter;

    node.<a class="code" href="classBootstrapNodeHandle.html#a4ed6dba23c1020820e2a4429e27277d8">setLastPing</a>(simTime());

    <span class="comment">// if node already in the list, update its lastPing and nodePrio fields</span>
    <span class="keywordflow">if</span> ((iter = <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.find(node)) != <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.end()) {
        iter-&gt;second-&gt;setLastPing(node.<a class="code" href="classBootstrapNodeHandle.html#a8474a2bed3ba1e4eb5a5588ef056802e">getLastPing</a>());
        iter-&gt;second-&gt;setNodePrio(node.<a class="code" href="classBootstrapNodeHandle.html#aa084201452845297ea8497e2fbc12929">getNodePrio</a>());

        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }

    <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.insert(<a class="code" href="BootstrapList_8h.html#a73111df7a3d2967658283b0d5711013f">NodePair</a>(node, &amp;node));
    <a class="code" href="classBootstrapList.html#a79698f8c7831d65c159f3ef6104657e9" title="Determine locality of a bootstrap node.">locateBootstrapNode</a>(node);

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a79698f8c7831d65c159f3ef6104657e9"></a><!-- doxytag: member="BootstrapList::locateBootstrapNode" ref="a79698f8c7831d65c159f3ef6104657e9" args="(const NodeHandle &amp;node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BootstrapList::locateBootstrapNode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determine locality of a bootstrap node. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>node</em>&nbsp;</td><td>the newly discovered bootstrap node </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BootstrapList_8cc_source.html#l00268">268</a> of file <a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a>.</p>

<p>Referenced by <a class="el" href="BootstrapList_8cc_source.html#l00285">insertBootstrapCandidate()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    Enter_Method_Silent();

    <span class="keywordflow">if</span> ((<a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseOverlay.html#adff10d8324516c75347fe67f11897435">getState</a>() == BaseOverlay::READY) &amp;&amp; (!node.<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>())
            &amp;&amp; <a class="code" href="classBootstrapList.html#a59d4c29e9646b9b23326e8ced1e4941f" title="if true, detect and merge overlay partitions">mergeOverlayPartitions</a>) {
       <a class="code" href="classLookupCall.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">LookupCall</a>* call = <span class="keyword">new</span> <a class="code" href="classLookupCall.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">LookupCall</a>();
       call-&gt;setBitLength(0);
       call-&gt;<a class="code" href="classLookupCall.html#a5b97eef473f8c5a210a743e49a7a9afd">setKey</a>(node.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>());
       call-&gt;<a class="code" href="classLookupCall.html#a6b031f67801b78c6171b7fa02e0fe94a">setNumSiblings</a>(<a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseOverlay.html#acd3058ad15b470e024500dd4872e2f09" title="Query the maximum number of siblings (nodes close to a key) that are maintained by this overlay proto...">getMaxNumSiblings</a>());
       <a class="code" href="classBaseRpc.html#a0dea7eed103c0e97176576d6642f7bfa" title="Sends an internal Remote-Procedure-Call between two tiers ">sendInternalRpcCall</a>(<a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5ead1b904580b02f8adaa1ab2de239c4c79">OVERLAY_COMP</a>, call);
    }

    <span class="keywordflow">return</span>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3eb9d08b32d70520df0d389731090ec9"></a><!-- doxytag: member="BootstrapList::pingResponse" ref="a3eb9d08b32d70520df0d389731090ec9" args="(PingResponse *pingResponse, cPolymorphic *context, int rpcId, simtime_t rtt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BootstrapList::pingResponse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPingResponse.html">PingResponse</a> *&nbsp;</td>
          <td class="paramname"> <em>pingResponse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPolymorphic *&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rpcId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&nbsp;</td>
          <td class="paramname"> <em>rtt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BootstrapList_8cc_source.html#l00202">202</a> of file <a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a> &amp;srcNode = pingResponse-&gt;<a class="code" href="classBaseRpcMessage.html#ada3e122125cfb5acc7350277ca69c45a">getSrcNode</a>();
    BootstrapNodeSet::iterator iter;

    EV &lt;&lt; <span class="stringliteral">&quot;[BootstrapList::pingResponse() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>().<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>().<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>() &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    Ping response from node &quot;</span> &lt;&lt; srcNode
           &lt;&lt; <span class="stringliteral">&quot; with rtt &quot;</span> &lt;&lt; rtt &lt;&lt; endl;

    <span class="comment">// update the lastPing field of the source node</span>
    <span class="keywordflow">if</span> (!srcNode.<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>())
        <span class="keywordflow">if</span> ((iter = <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.find(srcNode)) != <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.end())
            iter-&gt;second-&gt;setLastPing(simTime());

    <span class="keywordflow">return</span>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a092a947c1ff84f394e21280413422f88"></a><!-- doxytag: member="BootstrapList::pingTimeout" ref="a092a947c1ff84f394e21280413422f88" args="(PingCall *pingCall, const TransportAddress &amp;dest, cPolymorphic *context, int rpcId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BootstrapList::pingTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPingCall.html">PingCall</a> *&nbsp;</td>
          <td class="paramname"> <em>pingCall</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPolymorphic *&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rpcId</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BootstrapList_8cc_source.html#l00223">223</a> of file <a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    EV &lt;&lt; <span class="stringliteral">&quot;[BootstrapList::pingTimeout() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>().<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
       &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>().<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>() &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
       &lt;&lt; <span class="stringliteral">&quot;    Ping timeout for node &quot;</span> &lt;&lt; dest &lt;&lt; endl;
    <span class="comment">// destination does not answer, remove it from the list</span>
    <a class="code" href="classBootstrapList.html#a4c10a655a2e88ae6535efd2a593babdc" title="Remove an unavailable bootstrap candidate from the bootstraplist.">removeBootstrapCandidate</a>(dest);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2b29d94b378a75148b777f560adcef13"></a><!-- doxytag: member="BootstrapList::registerBootstrapNode" ref="a2b29d94b378a75148b777f560adcef13" args="(const NodeHandle &amp;node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BootstrapList::registerBootstrapNode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BootstrapList_8cc_source.html#l00364">364</a> of file <a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a>.</p>

<p>Referenced by <a class="el" href="BaseOverlay_8cc_source.html#l01065">BaseOverlay::setOverlayReady()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classBaseApp.html#ac8a54fad527bfd03a05ee6aed434243e" title="pointer to GlobalNodeList in this node">globalNodeList</a>-&gt;<a class="code" href="classGlobalNodeList.html#add76d38932795a481196e5504c5ee98e" title="Bootstraps peers in the peer set.">registerPeer</a>(node);

    <span class="comment">// at this point, we consider this node as booted and therefore have to</span>
    <span class="comment">// announce the boot service for it via zeroconfConnector</span>
    <span class="keywordflow">if</span> (<a class="code" href="classBootstrapList.html#a40d8f1f978f4272b654199d0a642e708" title="pointer to the ZeroconfConnector module">zeroconfConnector</a>) {
        <a class="code" href="classBootstrapList.html#a40d8f1f978f4272b654199d0a642e708" title="pointer to the ZeroconfConnector module">zeroconfConnector</a>-&gt;<a class="code" href="classZeroconfConnector.html#a3e1451bf34db9d8c9fdbe5116cf3458d" title="Announce bootstrap service in the local domain.">announceService</a>(node);
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4c10a655a2e88ae6535efd2a593babdc"></a><!-- doxytag: member="BootstrapList::removeBootstrapCandidate" ref="a4c10a655a2e88ae6535efd2a593babdc" args="(const TransportAddress &amp;addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BootstrapList::removeBootstrapCandidate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>addr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove an unavailable bootstrap candidate from the bootstraplist. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>the address of the bootstrap candidate </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BootstrapList_8cc_source.html#l00335">335</a> of file <a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a>.</p>

<p>Referenced by <a class="el" href="BootstrapList_8cc_source.html#l00223">pingTimeout()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    BootstrapNodeSet::iterator iter;
    <a class="code" href="classBootstrapNodeHandle.html">BootstrapNodeHandle</a>* bootstrapNode;

    <span class="keywordflow">if</span> (!addr.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>()) {
        <span class="keywordflow">if</span> ((iter = <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.find(addr)) != <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.end()) {
            bootstrapNode = iter-&gt;second;
            <a class="code" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">bootstrapList</a>.erase(iter);
            <span class="keyword">delete</span> bootstrapNode;
        }
    }

    <span class="keywordflow">return</span>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae3599c25687b302037e58d3ca68411cd"></a><!-- doxytag: member="BootstrapList::removeBootstrapNode" ref="ae3599c25687b302037e58d3ca68411cd" args="(const NodeHandle &amp;node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BootstrapList::removeBootstrapNode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BootstrapList_8cc_source.html#l00352">352</a> of file <a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">BasePastry::baseChangeState()</a>, <a class="el" href="Nice_8cc_source.html#l00246">oversim::Nice::changeState()</a>, <a class="el" href="Gia_8cc_source.html#l01212">Gia::finishOverlay()</a>, <a class="el" href="Chord_8cc_source.html#l00725">oversim::Chord::finishOverlay()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">BasePastry::finishOverlay()</a>, <a class="el" href="Kademlia_8cc_source.html#l00203">Kademlia::joinOverlay()</a>, and <a class="el" href="BaseOverlay_8cc_source.html#l01065">BaseOverlay::setOverlayReady()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>-&gt;<a class="code" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7" title="pointer to GlobalNodeList in this node">globalNodeList</a>-&gt;<a class="code" href="classGlobalNodeList.html#a95a2d64d3d19185ae4e2f24ec13ee5d4" title="Debootstraps peers in the peer set.">removePeer</a>(node);
    <span class="comment">// at this point, we consider this node not being able to provide the</span>
    <span class="comment">// boot service anymore, therefore we have to revoke</span>
    <span class="comment">// the service via zeroconfConnector</span>
    <span class="keywordflow">if</span> (<a class="code" href="classBootstrapList.html#a40d8f1f978f4272b654199d0a642e708" title="pointer to the ZeroconfConnector module">zeroconfConnector</a>) {
        <a class="code" href="classBootstrapList.html#a40d8f1f978f4272b654199d0a642e708" title="pointer to the ZeroconfConnector module">zeroconfConnector</a>-&gt;<a class="code" href="classZeroconfConnector.html#a23523f8783bace9e884d9a039f2beaea" title="Withdraw bootstrap service in the local domain.">revokeService</a>();
    }
}
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a84a0649240989413c998c4f28d058bef"></a><!-- doxytag: member="BootstrapList::bootstrapList" ref="a84a0649240989413c998c4f28d058bef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="BootstrapList_8h.html#acaca2f91cc129122d49820f698f057ce">BootstrapNodeSet</a> <a class="el" href="classBootstrapList.html#a84a0649240989413c998c4f28d058bef">BootstrapList::bootstrapList</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BootstrapList_8h_source.html#l00110">110</a> of file <a class="el" href="BootstrapList_8h_source.html">BootstrapList.h</a>.</p>

<p>Referenced by <a class="el" href="BootstrapList_8cc_source.html#l00376">finishApp()</a>, <a class="el" href="BootstrapList_8cc_source.html#l00236">getBootstrapNode()</a>, <a class="el" href="BootstrapList_8cc_source.html#l00139">handleBootstrapListTimerExpired()</a>, <a class="el" href="BootstrapList_8cc_source.html#l00171">handleLookupResponse()</a>, <a class="el" href="BootstrapList_8cc_source.html#l00072">initializeApp()</a>, <a class="el" href="BootstrapList_8cc_source.html#l00285">insertBootstrapCandidate()</a>, <a class="el" href="BootstrapList_8cc_source.html#l00202">pingResponse()</a>, and <a class="el" href="BootstrapList_8cc_source.html#l00335">removeBootstrapCandidate()</a>.</p>

</div>
</div>
<a class="anchor" id="a27e19ec0c850933b931fd2f4ca75e500"></a><!-- doxytag: member="BootstrapList::maintainList" ref="a27e19ec0c850933b931fd2f4ca75e500" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBootstrapList.html#a27e19ec0c850933b931fd2f4ca75e500">BootstrapList::maintainList</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>maintain a list of bootstrap candidates and check them periodically </p>

<p>Definition at line <a class="el" href="BootstrapList_8h_source.html#l00147">147</a> of file <a class="el" href="BootstrapList_8h_source.html">BootstrapList.h</a>.</p>

<p>Referenced by <a class="el" href="BootstrapList_8cc_source.html#l00236">getBootstrapNode()</a>, and <a class="el" href="BootstrapList_8cc_source.html#l00072">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a59d4c29e9646b9b23326e8ced1e4941f"></a><!-- doxytag: member="BootstrapList::mergeOverlayPartitions" ref="a59d4c29e9646b9b23326e8ced1e4941f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBootstrapList.html#a59d4c29e9646b9b23326e8ced1e4941f">BootstrapList::mergeOverlayPartitions</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>if true, detect and merge overlay partitions </p>

<p>Definition at line <a class="el" href="BootstrapList_8h_source.html#l00146">146</a> of file <a class="el" href="BootstrapList_8h_source.html">BootstrapList.h</a>.</p>

<p>Referenced by <a class="el" href="BootstrapList_8cc_source.html#l00072">initializeApp()</a>, and <a class="el" href="BootstrapList_8cc_source.html#l00268">locateBootstrapNode()</a>.</p>

</div>
</div>
<a class="anchor" id="ad2b316633621b5c9aa0886d042ace1c9"></a><!-- doxytag: member="BootstrapList::timerInterval" ref="ad2b316633621b5c9aa0886d042ace1c9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="classBootstrapList.html#ad2b316633621b5c9aa0886d042ace1c9">BootstrapList::timerInterval</a> = 10<code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the interval of the maintenance timer in seconds </p>

<p>Definition at line <a class="el" href="BootstrapList_8h_source.html#l00142">142</a> of file <a class="el" href="BootstrapList_8h_source.html">BootstrapList.h</a>.</p>

<p>Referenced by <a class="el" href="BootstrapList_8cc_source.html#l00139">handleBootstrapListTimerExpired()</a>, <a class="el" href="BootstrapList_8cc_source.html#l00128">handleTimerEvent()</a>, and <a class="el" href="BootstrapList_8cc_source.html#l00072">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a37dfd0340123ec8aaeb7d36a49bad440"></a><!-- doxytag: member="BootstrapList::timerMsg" ref="a37dfd0340123ec8aaeb7d36a49bad440" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="classBootstrapList.html#a37dfd0340123ec8aaeb7d36a49bad440">BootstrapList::timerMsg</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>self-message for periodic maintenance </p>

<p>Definition at line <a class="el" href="BootstrapList_8h_source.html#l00144">144</a> of file <a class="el" href="BootstrapList_8h_source.html">BootstrapList.h</a>.</p>

<p>Referenced by <a class="el" href="BootstrapList_8cc_source.html#l00059">BootstrapList()</a>, <a class="el" href="BootstrapList_8cc_source.html#l00128">handleTimerEvent()</a>, <a class="el" href="BootstrapList_8cc_source.html#l00072">initializeApp()</a>, and <a class="el" href="BootstrapList_8cc_source.html#l00066">~BootstrapList()</a>.</p>

</div>
</div>
<a class="anchor" id="a40d8f1f978f4272b654199d0a642e708"></a><!-- doxytag: member="BootstrapList::zeroconfConnector" ref="a40d8f1f978f4272b654199d0a642e708" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classZeroconfConnector.html">ZeroconfConnector</a>* <a class="el" href="classBootstrapList.html#a40d8f1f978f4272b654199d0a642e708">BootstrapList::zeroconfConnector</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>pointer to the <a class="el" href="classZeroconfConnector.html" title="Zeroconf module.">ZeroconfConnector</a> module </p>

<p>Definition at line <a class="el" href="BootstrapList_8h_source.html#l00145">145</a> of file <a class="el" href="BootstrapList_8h_source.html">BootstrapList.h</a>.</p>

<p>Referenced by <a class="el" href="BootstrapList_8cc_source.html#l00059">BootstrapList()</a>, <a class="el" href="BootstrapList_8cc_source.html#l00376">finishApp()</a>, <a class="el" href="BootstrapList_8cc_source.html#l00236">getBootstrapNode()</a>, <a class="el" href="BootstrapList_8cc_source.html#l00072">initializeApp()</a>, <a class="el" href="BootstrapList_8cc_source.html#l00364">registerBootstrapNode()</a>, and <a class="el" href="BootstrapList_8cc_source.html#l00352">removeBootstrapNode()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="BootstrapList_8h_source.html">BootstrapList.h</a></li>
<li><a class="el" href="BootstrapList_8cc_source.html">BootstrapList.cc</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 3 2010 14:40:48 for OverSim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
