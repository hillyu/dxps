<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OverSim: BasePastry Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<h1>BasePastry Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="BasePastry" --><!-- doxytag: inherits="BaseOverlay,ProxListener" -->
<p><code>#include &lt;<a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for BasePastry:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classBasePastry.png" usemap="#BasePastry_map" alt=""/>
  <map id="BasePastry_map" name="BasePastry_map">
<area href="classBaseOverlay.html" alt="BaseOverlay" shape="rect" coords="115,112,220,136"/>
<area href="classProxListener.html" alt="ProxListener" shape="rect" coords="230,112,335,136"/>
<area href="classBaseRpc.html" alt="BaseRpc" shape="rect" coords="0,56,105,80"/>
<area href="classBaseTcpSupport.html" alt="BaseTcpSupport" shape="rect" coords="115,56,220,80"/>
<area href="classTopologyVis.html" alt="TopologyVis" shape="rect" coords="230,56,335,80"/>
<area href="classRpcListener.html" alt="RpcListener" shape="rect" coords="0,0,105,24"/>
<area href="classBamboo.html" alt="Bamboo" shape="rect" coords="115,224,220,248"/>
<area href="classPastry.html" alt="Pastry" shape="rect" coords="230,224,335,248"/>
</map>
</div>

<p><a href="classBasePastry-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBasePastry_1_1PingContext.html">PingContext</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a390bb86e0a5ef6f920fdba1f045f9202">~BasePastry</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a21405811849fbb5c83f9ce6227457b11">pingResponse</a> (<a class="el" href="classPingResponse.html">PingResponse</a> *pingResponse, cPolymorphic *context, int rpcId, simtime_t rtt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a3c673aa6678b1466513a946cced620d0">pingTimeout</a> (<a class="el" href="classPingCall.html">PingCall</a> *call, const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;dest, cPolymorphic *context, int rpcId)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a23fca1965b3c6240fdcfb19bbf8e5a02">getMaxNumSiblings</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#acad786a6138720f76e80ceb9a93d0e12">getMaxNumRedundantNodes</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a20890c824e8987e936a3997c3121aa23">handleAppMessage</a> (<a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">processes messages from application  <a href="#a20890c824e8987e936a3997c3121aa23"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#abc8da91d0187799f60bddb3ddab3e2f6">updateTooltip</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">updates information shown in tk-environment  <a href="#abc8da91d0187799f60bddb3ddab3e2f6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classBaseKeySortedVector.html">NodeVector</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a3f8ba63e19c092f9ecf4d5ecb1817061">findNode</a> (const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;key, int numRedundantNodes, int numSiblings, <a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a1172a453b44856e2fdd7a027f0d03833">handleStateMessage</a> (<a class="el" href="classPastryStateMessage.html">PastryStateMessage</a> *msg)=0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">processes state messages, merging with own state tables  <a href="#a1172a453b44856e2fdd7a027f0d03833"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#aa38739065522ad67152dd4ff604ef759">finishOverlay</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a30a432a8117a6fd6d42f297f7c7113b3">sendStateTables</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;destination, int type=PASTRY_STATE_STD,...)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">send a <a class="el" href="classPastryStateMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryStateMessage</a> directly to a node  <a href="#a30a432a8117a6fd6d42f297f7c7113b3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a5aab2c66183579ae5d84524caddcdea0">sendStateDelayed</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;destination)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">send a standard state message with a small delay  <a href="#a5aab2c66183579ae5d84524caddcdea0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#aa8d7ea4daf5bb613fefc62a4da602f2b">isSiblingFor</a> (const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;node, const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;key, int numSiblings, bool *err)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classAbstractLookup.html">AbstractLookup</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a08fd91b569919795fe56f523ccef846b">createLookup</a> (<a class="el" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551">RoutingType</a> routingType=DEFAULT_ROUTING, const <a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *msg=NULL, const cObject *dummy=NULL, bool appLookup=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a64142ec5a4c2536f6633c1a05dd30726">getBitsPerDigit</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a62226300729854b429ae5d58c8d62ceb">proxCallback</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;node, int rpcId, cPolymorphic *contextPointer, <a class="el" href="structProx.html">Prox</a> prox)</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#acaa5d246e1e904b5196950d335673c94">joins</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a0adf4d1d02388eec7de8b4d0206f7f2e">joinTries</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a805e366ae01f6857dcb0e4a78c7e79d6">joinPartial</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#abfe72c7d75708d9e152375ecb708ce24">joinSeen</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a8fb058e1e4991c923faf29ae72832c05">joinBytesSeen</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a3d1f5f390900492fb714e0f420ded63a">joinReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#ab2be7f6fc3c97b1d93f43f083cff6f6a">joinBytesReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#ae75ddd4630ea3004166c0283436af0e9">joinSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a8bf579a017df30ccb1cf458a78a78f79">joinBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#aadec419a4c2560717f1db3e36866b837">stateSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a43218c86ea28a36b14f76b54b2ccea07">stateBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a26fa765c1f23635923477bc300637c4f">stateReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a8783f5db146cf00be3a347e92c36505e">stateBytesReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a5f05d5cba3283f9b1dd421b036959aff">repairReqSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a9f02a29e59ff2af5c7af5b3a764e711a">repairReqBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a7dcde1eb4abe361da782106038325c04">repairReqReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#aee11180f103683fc2a55d4c8958078d0">repairReqBytesReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#addc36312daa0ac4c85e4e8d77ee17ae5">stateReqSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a79163b2c9ee6767a5844c10b3a273af2">stateReqBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a727d8089dc7486f5f835ec427554c9b2">stateReqReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#adca8e0ca12a6dbbaee7dc5884845ddce">stateReqBytesReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a9fc77f87e2df109185d47c249886f176">totalLookups</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#ac765a923e7799daa443a1f4e1133bd01">responsibleLookups</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a42d36fb42f20de058871d74b8acd7b4c">routingTableLookups</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a7f32c7f9ffc03f346052ac50321d1858">closerNodeLookups</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#ad0deec6321f756622cacaba04d26cdbe">closerNodeLookupsFromNeighborhood</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a26cf01f1f60f7c76ec071d551d2bc77e">leafsetReqSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#ab200043644da860d9d8c260fb6735053">leafsetReqBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a65d0531f806241a4f400613b1dd67384">leafsetReqReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#aa22c5ed0a7bbaf3b2b3ffd2276496251">leafsetReqBytesReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a4c18e956472b6109d8b7f6951af550b5">leafsetSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a4ac5815eec47ea1ec62a25e19dbaf806">leafsetBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a966f88cf985632e3e28ff482c5e5d0a2">leafsetReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a9bdc81ede316e30996bbee5c73f6b472">leafsetBytesReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a30413da700f177a195a011a1e46f4627">routingTableReqSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a0fcc70cc77b501a0827ab426305b8675">routingTableReqBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a9d8bb5f1b8e375adcf29601b06a26966">routingTableReqReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#ac130146fa13b0d04a15a25fdb2571ddd">routingTableReqBytesReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a3636e71cd463bc25499528eba6550867">routingTableSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a2f65f4a9615955af25832d87f043bb40">routingTableBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a93981f405e583d046c1609c075971c6c">routingTableReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a74edb3cc83cb66d94e2f1dc3dd2c42f0">routingTableBytesReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#ad649a2131c80eceecb309cb386b806a6">rowToAsk</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a310811835376494807a09cd0a8d52eb7">StateObject</a> { <a class="el" href="classBasePastry.html#a310811835376494807a09cd0a8d52eb7ade24a23c0404dd3ba4e22feb64fbdf3b">ROUTINGTABLE</a>, 
<a class="el" href="classBasePastry.html#a310811835376494807a09cd0a8d52eb7a9d6e5a7d1d4f7208eb485c882b3bcaed">LEAFSET</a>, 
<a class="el" href="classBasePastry.html#a310811835376494807a09cd0a8d52eb7a544fe8f97d7d893510ac4c658ec4faba">NEIGHBORHOODSET</a>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="classBasePastry.html#acd2b654814d77379002800161cd67981a55b9f4bfbf94d107e8228d1ea9ec95b4">PING_RECEIVED_STATE</a> =  1, 
<a class="el" href="classBasePastry.html#acd2b654814d77379002800161cd67981a42c2a11b38eda6c512669012e9bbb88f">PING_NEXT_HOP</a> =  2, 
<a class="el" href="classBasePastry.html#acd2b654814d77379002800161cd67981aaab166e746fb925df8707610d92af824">PING_SINGLE_NODE</a> =  3, 
<a class="el" href="classBasePastry.html#acd2b654814d77379002800161cd67981a6232e475e9da2c6b20ef4cacd1246601">PING_DISCOVERY</a>
 }</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a8f9160fe1cf9e4050a417cfa7fc0711b">changeState</a> (int toState)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">changes node state  <a href="#a8f9160fe1cf9e4050a417cfa7fc0711b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a1062cac20a1fd1c5368157fe2da8b8fb">checkProxCache</a> (void)=0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">checks whether proxCache is complete, takes appropriate actions depending on the protocol state  <a href="#a1062cac20a1fd1c5368157fe2da8b8fb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a72cdd5dde4fe7886068ebc35b4d96cea">purgeVectors</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">delete all information/messages caching vectors, used for restarting overlay or <a class="el" href="classBaseOverlay.html#aed7e3f36b2c70cbdb0e6daa32925917c" title="collects statistical data">finish()</a>  <a href="#a72cdd5dde4fe7886068ebc35b4d96cea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a0bc39902de2d03ea45714bf8506d983f">baseInit</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">initializes parameters and variables used in both <a class="el" href="classBamboo.html" title="Bamboo overlay module.">Bamboo</a> and <a class="el" href="classPastry.html" title="Pastry overlay module.">Pastry</a>  <a href="#a0bc39902de2d03ea45714bf8506d983f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a1f99c5e7da561015851b206abb4d0f59">baseChangeState</a> (int)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">changes node state, but leaves specific behavour, scheduling tasks in particular, to the inheriting protocols  <a href="#a1f99c5e7da561015851b206abb4d0f59"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOverlayKey.html">OverlayKey</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a5508a66ddde5207ac255edfe042b69a5">distance</a> (const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;x, const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;y, bool useAlternative=false) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a49e37d403457478acc0d352904bf104d">iterativeJoinHook</a> (<a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *msg, bool incrHopCount)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#af6a7090deb645b1f79b33edb0409485c">prePing</a> (const <a class="el" href="classPastryStateMessage.html">PastryStateMessage</a> *stateMsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ping all nodes in a given state message.  <a href="#af6a7090deb645b1f79b33edb0409485c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a445a74a2791f810975bf99b4ff7d9865">pingNodes</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ping all nodes in the pastry state message pointed to by private member stateCache  <a href="#a445a74a2791f810975bf99b4ff7d9865"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a89aba6ca97abfbe6baff748a19969d1e">determineAliveTable</a> (const <a class="el" href="classPastryStateMessage.html">PastryStateMessage</a> *stateMsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">change the aliveTable to match the given stateMsg.  <a href="#a89aba6ca97abfbe6baff748a19969d1e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#ade0791a64218af84150f1da407732397">sendRequest</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;ask, int type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">send a request to a given node  <a href="#ade0791a64218af84150f1da407732397"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a5bc3c9909b2b24250bc6697d2d15c48a">sendLeafset</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;tell, bool pull=false)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">send the leafset to a node  <a href="#a5bc3c9909b2b24250bc6697d2d15c48a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a61fcc4fef7533577ee94b6c452627c0a">sendRoutingRow</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;tell, int row)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">send a row of the routing table to a node  <a href="#a61fcc4fef7533577ee94b6c452627c0a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#aad40d59a6828e343b9f8b64b702128fb">handleRequestMessage</a> (<a class="el" href="classPastryRequestMessage.html">PastryRequestMessage</a> *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">processes state messages, merging with own state tables  <a href="#aad40d59a6828e343b9f8b64b702128fb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a1ea1672c0d5c853e4d823a8095c672b5">handleLeafsetMessage</a> (<a class="el" href="classPastryLeafsetMessage.html">PastryLeafsetMessage</a> *msg, bool mergeSender=false)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">processes leafset messages, merging with own state tables  <a href="#a1ea1672c0d5c853e4d823a8095c672b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a71aa8137f8e2eaf0977a437d7d852189">newLeafs</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classPastry.html" title="Pastry overlay module.">Pastry</a> API: send <a class="el" href="classBasePastry.html#a71aa8137f8e2eaf0977a437d7d852189" title="Pastry API: send newLeafs() to application if enabled.">newLeafs()</a> to application if enabled.  <a href="#a71aa8137f8e2eaf0977a437d7d852189"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a80645aaa29443c4b7dc919d67fb7af81">bitsPerDigit</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#ac57a5211053260e898b18c252c293581">numberOfLeaves</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#ace44a714008e5a5c1f373b7068396721">numberOfNeighbors</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a98b0c284102cd5f1fc78558937b9b19f">readyWaitAmount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a596fc6a02d7b78a6bf804d08cbf73844">joinTimeoutAmount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#aa6d47b84748ac654eb8777abea92c984">repairTimeout</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#ab8f4cd001646782d88dca94134ef0b20">enableNewLeafs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a893a9f746f708dc4c66b5195e04a2f56">useRegularNextHop</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a26f8166e84753ec35921c7cff3ff10d9">alwaysSendUpdate</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a12816a6716823ebb8d4bcfe4d4667051">optimizeLookup</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#af6e8cefc3c62e666203cfedea1532f04">proximityNeighborSelection</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a715b166d2b3b397e047908f52f354be7">nearNodeRtt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a773482c4b45374b82b35a72a4935574a">pingedNodes</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a4ac33dcce9d9a383a740d1227cff76aa">nearNodeImproved</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a3bc59be1790c50873fb64c0e20bd047a">periodicMaintenance</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTransportAddress.html">TransportAddress</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a5216e2031a761a9aeaae0d330b00b741">leaf2ask</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTransportAddress.html">TransportAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#af534020c5663e436cf28aa83a4a790c9">bootstrapNode</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classNodeHandle.html">NodeHandle</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#aaa36dc41f21d16f4e7a03e92911c17ab">nearNode</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a6c7b5c6e2d71db0c8233b80764e63dc6">lastStateChange</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structPastryStateMsgHandle.html">PastryStateMsgHandle</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65">stateCache</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle for processing a single state message.  <a href="#a70d78d4ebef74ab2367fed00f77b2d65"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::queue&lt; <a class="el" href="structPastryStateMsgHandle.html">PastryStateMsgHandle</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a763ec48a49b047252ea3d758b335df70">stateCacheQueue</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Queue of state messages waiting to be processed in READY state.  <a href="#a763ec48a49b047252ea3d758b335df70"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structPastryStateMsgProximity.html">PastryStateMsgProximity</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a22e76d53e4ba89d63eca403923a46da8">aliveTable</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Early update of leaf set: helper structure for marking known-dead nodes.  <a href="#a22e76d53e4ba89d63eca403923a46da8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a1a96c4a089fd9c1b21d7eb9c34d93580">joinHopCount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a62c17b080a85d27ccdd85809c8f14503">joinTimeout</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a87b449a72607334387c2aa3a5d7673b2">readyWait</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a9375a2c0cdee0493f0ea7b4983825934">joinUpdateWait</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classPastrySendState.html">PastrySendState</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#ada6bd66160f1bf192a2d4422b6f8d7b4">sendStateWait</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPastryRoutingTable.html">PastryRoutingTable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPastryLeafSet.html">PastryLeafSet</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPastryNeighborhoodSet.html">PastryNeighborhoodSet</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a66df35d5ace03485bf20db2d2899a98f">neighborhoodSet</a></td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasePastry.html#a4bdc4f15ad57b31d9045a408f5e40478">PastryLeafSet</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00050">50</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="acd2b654814d77379002800161cd67981"></a><!-- doxytag: member="BasePastry::@1" ref="acd2b654814d77379002800161cd67981" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="acd2b654814d77379002800161cd67981a55b9f4bfbf94d107e8228d1ea9ec95b4"></a><!-- doxytag: member="PING_RECEIVED_STATE" ref="acd2b654814d77379002800161cd67981a55b9f4bfbf94d107e8228d1ea9ec95b4" args="" -->PING_RECEIVED_STATE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="acd2b654814d77379002800161cd67981a42c2a11b38eda6c512669012e9bbb88f"></a><!-- doxytag: member="PING_NEXT_HOP" ref="acd2b654814d77379002800161cd67981a42c2a11b38eda6c512669012e9bbb88f" args="" -->PING_NEXT_HOP</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="acd2b654814d77379002800161cd67981aaab166e746fb925df8707610d92af824"></a><!-- doxytag: member="PING_SINGLE_NODE" ref="acd2b654814d77379002800161cd67981aaab166e746fb925df8707610d92af824" args="" -->PING_SINGLE_NODE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="acd2b654814d77379002800161cd67981a6232e475e9da2c6b20ef4cacd1246601"></a><!-- doxytag: member="PING_DISCOVERY" ref="acd2b654814d77379002800161cd67981a6232e475e9da2c6b20ef4cacd1246601" args="" -->PING_DISCOVERY</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00295">295</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <a class="code" href="classBasePastry.html#acd2b654814d77379002800161cd67981a55b9f4bfbf94d107e8228d1ea9ec95b4">PING_RECEIVED_STATE</a> = 1,
        <a class="code" href="classBasePastry.html#acd2b654814d77379002800161cd67981a42c2a11b38eda6c512669012e9bbb88f">PING_NEXT_HOP</a> = 2,
        <a class="code" href="classBasePastry.html#acd2b654814d77379002800161cd67981aaab166e746fb925df8707610d92af824">PING_SINGLE_NODE</a> = 3,
        <a class="code" href="classBasePastry.html#acd2b654814d77379002800161cd67981a6232e475e9da2c6b20ef4cacd1246601">PING_DISCOVERY</a>
    };
</pre></div></p>

</div>
</div>
<a class="anchor" id="a310811835376494807a09cd0a8d52eb7"></a><!-- doxytag: member="BasePastry::StateObject" ref="a310811835376494807a09cd0a8d52eb7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classBasePastry.html#a310811835376494807a09cd0a8d52eb7">BasePastry::StateObject</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a310811835376494807a09cd0a8d52eb7ade24a23c0404dd3ba4e22feb64fbdf3b"></a><!-- doxytag: member="ROUTINGTABLE" ref="a310811835376494807a09cd0a8d52eb7ade24a23c0404dd3ba4e22feb64fbdf3b" args="" -->ROUTINGTABLE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a310811835376494807a09cd0a8d52eb7a9d6e5a7d1d4f7208eb485c882b3bcaed"></a><!-- doxytag: member="LEAFSET" ref="a310811835376494807a09cd0a8d52eb7a9d6e5a7d1d4f7208eb485c882b3bcaed" args="" -->LEAFSET</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a310811835376494807a09cd0a8d52eb7a544fe8f97d7d893510ac4c658ec4faba"></a><!-- doxytag: member="NEIGHBORHOODSET" ref="a310811835376494807a09cd0a8d52eb7a544fe8f97d7d893510ac4c658ec4faba" args="" -->NEIGHBORHOODSET</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00277">277</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        ROUTINGTABLE,
        LEAFSET,
        <a class="code" href="classBasePastry.html#a310811835376494807a09cd0a8d52eb7a544fe8f97d7d893510ac4c658ec4faba">NEIGHBORHOODSET</a>
    };
</pre></div></p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a390bb86e0a5ef6f920fdba1f045f9202"></a><!-- doxytag: member="BasePastry::~BasePastry" ref="a390bb86e0a5ef6f920fdba1f045f9202" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasePastry::~BasePastry </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00997">997</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    cancelAndDelete(<a class="code" href="classBasePastry.html#a62c17b080a85d27ccdd85809c8f14503">joinTimeout</a>);

    <a class="code" href="classBasePastry.html#a72cdd5dde4fe7886068ebc35b4d96cea" title="delete all information/messages caching vectors, used for restarting overlay or finish()">purgeVectors</a>();
}
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a1f99c5e7da561015851b206abb4d0f59"></a><!-- doxytag: member="BasePastry::baseChangeState" ref="a1f99c5e7da561015851b206abb4d0f59" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::baseChangeState </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>toState</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>changes node state, but leaves specific behavour, scheduling tasks in particular, to the inheriting protocols </p>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00196">196</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00149">Pastry::changeState()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00082">Bamboo::changeState()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">switch</span> (toState) {
    <span class="keywordflow">case</span> <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa4c1b397f6c4682baf7db280e7f15520a">INIT</a>:
        <a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> = INIT;

        <span class="keywordflow">if</span> (!<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>())
            <a class="code" href="classBaseOverlay.html#abe4dea93564123116c97d5c4721f0504" title="pointer to the BootstrapList module">bootstrapList</a>-&gt;<a class="code" href="classBootstrapList.html#ae3599c25687b302037e58d3ca68411cd">removeBootstrapNode</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>);

        <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#a62c17b080a85d27ccdd85809c8f14503">joinTimeout</a>-&gt;isScheduled()) cancelEvent(<a class="code" href="classBasePastry.html#a62c17b080a85d27ccdd85809c8f14503">joinTimeout</a>);

        <a class="code" href="classBasePastry.html#a72cdd5dde4fe7886068ebc35b4d96cea" title="delete all information/messages caching vectors, used for restarting overlay or finish()">purgeVectors</a>();

        <a class="code" href="classBasePastry.html#af534020c5663e436cf28aa83a4a790c9">bootstrapNode</a> = <a class="code" href="classBaseOverlay.html#abe4dea93564123116c97d5c4721f0504" title="pointer to the BootstrapList module">bootstrapList</a>-&gt;<a class="code" href="classBootstrapList.html#af6e1422372d548ba574e136c1a10ccaa" title="Get a bootstrap node from the bootstrap list.">getBootstrapNode</a>();

        <a class="code" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a>-&gt;<a class="code" href="classPastryRoutingTable.html#a3a4907994a66da808a72d17a77c93ee2" title="Initializes the routing table.">initializeTable</a>(<a class="code" href="classBasePastry.html#a80645aaa29443c4b7dc919d67fb7af81">bitsPerDigit</a>, <a class="code" href="classBasePastry.html#aa6d47b84748ac654eb8777abea92c984">repairTimeout</a>, <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>);
        <a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#aa2c78d769e86e656409342e553c9af0a" title="Initializes the leaf set.">initializeSet</a>(<a class="code" href="classBasePastry.html#ac57a5211053260e898b18c252c293581">numberOfLeaves</a>, <a class="code" href="classBasePastry.html#a80645aaa29443c4b7dc919d67fb7af81">bitsPerDigit</a>,
                               <a class="code" href="classBasePastry.html#aa6d47b84748ac654eb8777abea92c984">repairTimeout</a>, <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>, <span class="keyword">this</span>);
        <a class="code" href="classBasePastry.html#a66df35d5ace03485bf20db2d2899a98f">neighborhoodSet</a>-&gt;<a class="code" href="classPastryNeighborhoodSet.html#a12f548fd0c008660a2b05457b286dc13" title="Initializes the neighborhood set.">initializeSet</a>(<a class="code" href="classBasePastry.html#ace44a714008e5a5c1f373b7068396721">numberOfNeighbors</a>, <a class="code" href="classBasePastry.html#a80645aaa29443c4b7dc919d67fb7af81">bitsPerDigit</a>,
                                       <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>);

        <a class="code" href="classBasePastry.html#abc8da91d0187799f60bddb3ddab3e2f6" title="updates information shown in tk-environment">updateTooltip</a>();
        <a class="code" href="classBasePastry.html#a6c7b5c6e2d71db0c8233b80764e63dc6">lastStateChange</a> = simTime();

        getParentModule()-&gt;getParentModule()-&gt;bubble(<span class="stringliteral">&quot;entering INIT state&quot;</span>);

        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fae0807b50dbde92e1fcedaa4a9357fec8">JOINING_2</a>:
        <a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> = JOINING_2;

        <span class="comment">// bootstrapNode must be obtained before calling this method,</span>
        <span class="comment">// for example by calling changeState(INIT)</span>

        <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#af534020c5663e436cf28aa83a4a790c9">bootstrapNode</a>.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>()) {
            <span class="comment">// no existing pastry network -&gt; first node of a new one</span>
            <a class="code" href="classBasePastry.html#a8f9160fe1cf9e4050a417cfa7fc0711b" title="changes node state">changeState</a>(<a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>);
            <span class="keywordflow">return</span>;
        }

        cancelEvent(<a class="code" href="classBasePastry.html#a62c17b080a85d27ccdd85809c8f14503">joinTimeout</a>);
        scheduleAt(simTime() + <a class="code" href="classBasePastry.html#a596fc6a02d7b78a6bf804d08cbf73844">joinTimeoutAmount</a>, <a class="code" href="classBasePastry.html#a62c17b080a85d27ccdd85809c8f14503">joinTimeout</a>);

        <a class="code" href="classBasePastry.html#abc8da91d0187799f60bddb3ddab3e2f6" title="updates information shown in tk-environment">updateTooltip</a>();
        getParentModule()-&gt;getParentModule()-&gt;bubble(<span class="stringliteral">&quot;entering JOIN state&quot;</span>);

        <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#a0adf4d1d02388eec7de8b4d0206f7f2e">joinTries</a>++);

        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>:
        assert(<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> != <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>);
        <a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> = READY;

         <span class="comment">//bootstrapList-&gt;registerBootstrapNode(thisNode);</span>

        <span class="comment">// if we are the first node in the network, there&#39;s nothing else</span>
        <span class="comment">// to do</span>
        <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#af534020c5663e436cf28aa83a4a790c9">bootstrapNode</a>.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>()) {
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#a0adf4d1d02388eec7de8b4d0206f7f2e">joinTries</a>++);
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#acaa5d246e1e904b5196950d335673c94">joins</a>++);
            <a class="code" href="classBaseOverlay.html#a9da615809e832cbc4645cc732d510277" title="Sets the overlay ready icon and register/deregisters the node at the GlobalNodeList.">setOverlayReady</a>(<span class="keyword">true</span>);
            <span class="keywordflow">return</span>;
        }

        getParentModule()-&gt;getParentModule()-&gt;bubble(<span class="stringliteral">&quot;entering READY state&quot;</span>);
        <a class="code" href="classBasePastry.html#abc8da91d0187799f60bddb3ddab3e2f6" title="updates information shown in tk-environment">updateTooltip</a>();
        <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#acaa5d246e1e904b5196950d335673c94">joins</a>++);

        <span class="keywordflow">break</span>;

    <span class="keywordflow">default</span>: <span class="comment">// discovery</span>
        <span class="keywordflow">break</span>;
    }
    <a class="code" href="classBaseOverlay.html#a9da615809e832cbc4645cc732d510277" title="Sets the overlay ready icon and register/deregisters the node at the GlobalNodeList.">setOverlayReady</a>(<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0bc39902de2d03ea45714bf8506d983f"></a><!-- doxytag: member="BasePastry::baseInit" ref="a0bc39902de2d03ea45714bf8506d983f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::baseInit </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>initializes parameters and variables used in both <a class="el" href="classBamboo.html" title="Bamboo overlay module.">Bamboo</a> and <a class="el" href="classPastry.html" title="Pastry overlay module.">Pastry</a> </p>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00066">66</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00080">Pastry::initializeOverlay()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00048">Bamboo::initializeOverlay()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classBasePastry.html#a80645aaa29443c4b7dc919d67fb7af81">bitsPerDigit</a> = par(<span class="stringliteral">&quot;bitsPerDigit&quot;</span>);
    <a class="code" href="classBasePastry.html#ac57a5211053260e898b18c252c293581">numberOfLeaves</a> = par(<span class="stringliteral">&quot;numberOfLeaves&quot;</span>);
    <a class="code" href="classBasePastry.html#ace44a714008e5a5c1f373b7068396721">numberOfNeighbors</a> = par(<span class="stringliteral">&quot;numberOfNeighbors&quot;</span>);
    <a class="code" href="classBasePastry.html#a596fc6a02d7b78a6bf804d08cbf73844">joinTimeoutAmount</a> = par(<span class="stringliteral">&quot;joinTimeout&quot;</span>);
    <a class="code" href="classBasePastry.html#aa6d47b84748ac654eb8777abea92c984">repairTimeout</a> = par(<span class="stringliteral">&quot;repairTimeout&quot;</span>);
    <a class="code" href="classBasePastry.html#ab8f4cd001646782d88dca94134ef0b20">enableNewLeafs</a> = par(<span class="stringliteral">&quot;enableNewLeafs&quot;</span>);
    <a class="code" href="classBasePastry.html#a12816a6716823ebb8d4bcfe4d4667051">optimizeLookup</a> = par(<span class="stringliteral">&quot;optimizeLookup&quot;</span>);
    <a class="code" href="classBasePastry.html#a893a9f746f708dc4c66b5195e04a2f56">useRegularNextHop</a> = par(<span class="stringliteral">&quot;useRegularNextHop&quot;</span>);
    <a class="code" href="classBasePastry.html#a26f8166e84753ec35921c7cff3ff10d9">alwaysSendUpdate</a> = par(<span class="stringliteral">&quot;alwaysSendUpdate&quot;</span>);
    <a class="code" href="classBasePastry.html#af6e8cefc3c62e666203cfedea1532f04">proximityNeighborSelection</a> = par(<span class="stringliteral">&quot;proximityNeighborSelection&quot;</span>);

    <span class="keywordflow">if</span> (!<a class="code" href="classBaseRpc.html#ad80237130dc2316d0d76ac6757c50f4f" title="pointer to the neighbor cache">neighborCache</a>-&gt;<a class="code" href="classNeighborCache.html#a2ce120e786b37cb5823d53f31ae82ff3">isEnabled</a>()) {
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;NeighborCache is disabled, which is mandatory &quot;</span>
                                <span class="stringliteral">&quot;for Pastry/Bamboo. Activate it by setting &quot;</span>
                                <span class="stringliteral">&quot;\&quot;**.neighborCache.enableNeighborCache &quot;</span>
                                <span class="stringliteral">&quot;= true\&quot; in your omnetpp.ini!&quot;</span>);
    }

    <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#ac57a5211053260e898b18c252c293581">numberOfLeaves</a> % 2) {
        EV &lt;&lt; <span class="stringliteral">&quot;[BasePastry::baseInit() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    Warning: numberOfLeaves must be even - adding 1.&quot;</span>
           &lt;&lt; endl;
        <a class="code" href="classBasePastry.html#ac57a5211053260e898b18c252c293581">numberOfLeaves</a>++;
    }

    <a class="code" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a> = check_and_cast&lt;<a class="code" href="classPastryRoutingTable.html" title="Routing table module.">PastryRoutingTable</a>*&gt;
        (getParentModule()-&gt;getSubmodule(<span class="stringliteral">&quot;pastryRoutingTable&quot;</span>));
    <a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a> = check_and_cast&lt;<a class="code" href="classPastryLeafSet.html" title="PastryLeafSet module.">PastryLeafSet</a>*&gt;
        (getParentModule()-&gt;getSubmodule(<span class="stringliteral">&quot;pastryLeafSet&quot;</span>));
    <a class="code" href="classBasePastry.html#a66df35d5ace03485bf20db2d2899a98f">neighborhoodSet</a> = check_and_cast&lt;<a class="code" href="classPastryNeighborhoodSet.html" title="PastryNeighborhoodSet module.">PastryNeighborhoodSet</a>*&gt;
        (getParentModule()-&gt;getSubmodule(<span class="stringliteral">&quot;pastryNeighborhoodSet&quot;</span>));

    <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a> = NULL;
    <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a> = NULL;

    <a class="code" href="classBasePastry.html#ad649a2131c80eceecb309cb386b806a6">rowToAsk</a> = 0;

    <span class="comment">// initialize statistics</span>
    <a class="code" href="classBasePastry.html#acaa5d246e1e904b5196950d335673c94">joins</a> = 0;
    <a class="code" href="classBasePastry.html#a0adf4d1d02388eec7de8b4d0206f7f2e">joinTries</a> = 0;
    <a class="code" href="classBasePastry.html#a805e366ae01f6857dcb0e4a78c7e79d6">joinPartial</a> = 0;
    <a class="code" href="classBasePastry.html#abfe72c7d75708d9e152375ecb708ce24">joinSeen</a> = 0;
    <a class="code" href="classBasePastry.html#a3d1f5f390900492fb714e0f420ded63a">joinReceived</a> = 0;
    <a class="code" href="classBasePastry.html#ae75ddd4630ea3004166c0283436af0e9">joinSent</a> = 0;
    <a class="code" href="classBasePastry.html#aadec419a4c2560717f1db3e36866b837">stateSent</a> = 0;
    <a class="code" href="classBasePastry.html#a26fa765c1f23635923477bc300637c4f">stateReceived</a> = 0;
    <a class="code" href="classBasePastry.html#a5f05d5cba3283f9b1dd421b036959aff">repairReqSent</a> = 0;
    <a class="code" href="classBasePastry.html#a7dcde1eb4abe361da782106038325c04">repairReqReceived</a> = 0;
    <a class="code" href="classBasePastry.html#addc36312daa0ac4c85e4e8d77ee17ae5">stateReqSent</a> = 0;
    <a class="code" href="classBasePastry.html#a727d8089dc7486f5f835ec427554c9b2">stateReqReceived</a> = 0;

    <a class="code" href="classBasePastry.html#a8fb058e1e4991c923faf29ae72832c05">joinBytesSeen</a> = 0;
    <a class="code" href="classBasePastry.html#ab2be7f6fc3c97b1d93f43f083cff6f6a">joinBytesReceived</a> = 0;
    <a class="code" href="classBasePastry.html#a8bf579a017df30ccb1cf458a78a78f79">joinBytesSent</a> = 0;
    <a class="code" href="classBasePastry.html#a43218c86ea28a36b14f76b54b2ccea07">stateBytesSent</a> = 0;
    <a class="code" href="classBasePastry.html#a8783f5db146cf00be3a347e92c36505e">stateBytesReceived</a> = 0;
    <a class="code" href="classBasePastry.html#a9f02a29e59ff2af5c7af5b3a764e711a">repairReqBytesSent</a> = 0;
    <a class="code" href="classBasePastry.html#aee11180f103683fc2a55d4c8958078d0">repairReqBytesReceived</a> = 0;
    <a class="code" href="classBasePastry.html#a79163b2c9ee6767a5844c10b3a273af2">stateReqBytesSent</a> = 0;
    <a class="code" href="classBasePastry.html#adca8e0ca12a6dbbaee7dc5884845ddce">stateReqBytesReceived</a> = 0;

    <a class="code" href="classBasePastry.html#a9fc77f87e2df109185d47c249886f176">totalLookups</a> = 0;
    <a class="code" href="classBasePastry.html#ac765a923e7799daa443a1f4e1133bd01">responsibleLookups</a> = 0;
    <a class="code" href="classBasePastry.html#a42d36fb42f20de058871d74b8acd7b4c">routingTableLookups</a> = 0;
    <a class="code" href="classBasePastry.html#a7f32c7f9ffc03f346052ac50321d1858">closerNodeLookups</a> = 0;
    <a class="code" href="classBasePastry.html#ad0deec6321f756622cacaba04d26cdbe">closerNodeLookupsFromNeighborhood</a> = 0;

    <a class="code" href="classBasePastry.html#a26cf01f1f60f7c76ec071d551d2bc77e">leafsetReqSent</a> = 0;
    <a class="code" href="classBasePastry.html#ab200043644da860d9d8c260fb6735053">leafsetReqBytesSent</a> = 0;
    <a class="code" href="classBasePastry.html#a65d0531f806241a4f400613b1dd67384">leafsetReqReceived</a> = 0;
    <a class="code" href="classBasePastry.html#aa22c5ed0a7bbaf3b2b3ffd2276496251">leafsetReqBytesReceived</a> = 0;
    <a class="code" href="classBasePastry.html#a4c18e956472b6109d8b7f6951af550b5">leafsetSent</a> = 0;
    <a class="code" href="classBasePastry.html#a4ac5815eec47ea1ec62a25e19dbaf806">leafsetBytesSent</a> = 0;
    <a class="code" href="classBasePastry.html#a966f88cf985632e3e28ff482c5e5d0a2">leafsetReceived</a> = 0;
    <a class="code" href="classBasePastry.html#a9bdc81ede316e30996bbee5c73f6b472">leafsetBytesReceived</a> = 0;

    <a class="code" href="classBasePastry.html#a30413da700f177a195a011a1e46f4627">routingTableReqSent</a> = 0;
    <a class="code" href="classBasePastry.html#a0fcc70cc77b501a0827ab426305b8675">routingTableReqBytesSent</a> = 0;
    <a class="code" href="classBasePastry.html#a9d8bb5f1b8e375adcf29601b06a26966">routingTableReqReceived</a> = 0;
    <a class="code" href="classBasePastry.html#ac130146fa13b0d04a15a25fdb2571ddd">routingTableReqBytesReceived</a> = 0;
    <a class="code" href="classBasePastry.html#a3636e71cd463bc25499528eba6550867">routingTableSent</a> = 0;
    <a class="code" href="classBasePastry.html#a2f65f4a9615955af25832d87f043bb40">routingTableBytesSent</a> = 0;
    <a class="code" href="classBasePastry.html#a93981f405e583d046c1609c075971c6c">routingTableReceived</a> = 0;
    <a class="code" href="classBasePastry.html#a74edb3cc83cb66d94e2f1dc3dd2c42f0">routingTableBytesReceived</a> = 0;

    WATCH(<a class="code" href="classBasePastry.html#acaa5d246e1e904b5196950d335673c94">joins</a>);
    WATCH(<a class="code" href="classBasePastry.html#a0adf4d1d02388eec7de8b4d0206f7f2e">joinTries</a>);
    WATCH(<a class="code" href="classBasePastry.html#abfe72c7d75708d9e152375ecb708ce24">joinSeen</a>);
    WATCH(<a class="code" href="classBasePastry.html#a8fb058e1e4991c923faf29ae72832c05">joinBytesSeen</a>);
    WATCH(<a class="code" href="classBasePastry.html#a3d1f5f390900492fb714e0f420ded63a">joinReceived</a>);
    WATCH(<a class="code" href="classBasePastry.html#ab2be7f6fc3c97b1d93f43f083cff6f6a">joinBytesReceived</a>);
    WATCH(<a class="code" href="classBasePastry.html#ae75ddd4630ea3004166c0283436af0e9">joinSent</a>);
    WATCH(<a class="code" href="classBasePastry.html#a8bf579a017df30ccb1cf458a78a78f79">joinBytesSent</a>);
    WATCH(<a class="code" href="classBasePastry.html#aadec419a4c2560717f1db3e36866b837">stateSent</a>);
    WATCH(<a class="code" href="classBasePastry.html#a43218c86ea28a36b14f76b54b2ccea07">stateBytesSent</a>);
    WATCH(<a class="code" href="classBasePastry.html#a26fa765c1f23635923477bc300637c4f">stateReceived</a>);
    WATCH(<a class="code" href="classBasePastry.html#a8783f5db146cf00be3a347e92c36505e">stateBytesReceived</a>);
    WATCH(<a class="code" href="classBasePastry.html#a5f05d5cba3283f9b1dd421b036959aff">repairReqSent</a>);
    WATCH(<a class="code" href="classBasePastry.html#a9f02a29e59ff2af5c7af5b3a764e711a">repairReqBytesSent</a>);
    WATCH(<a class="code" href="classBasePastry.html#a7dcde1eb4abe361da782106038325c04">repairReqReceived</a>);
    WATCH(<a class="code" href="classBasePastry.html#aee11180f103683fc2a55d4c8958078d0">repairReqBytesReceived</a>);
    WATCH(<a class="code" href="classBasePastry.html#addc36312daa0ac4c85e4e8d77ee17ae5">stateReqSent</a>);
    WATCH(<a class="code" href="classBasePastry.html#a79163b2c9ee6767a5844c10b3a273af2">stateReqBytesSent</a>);
    WATCH(<a class="code" href="classBasePastry.html#a727d8089dc7486f5f835ec427554c9b2">stateReqReceived</a>);
    WATCH(<a class="code" href="classBasePastry.html#adca8e0ca12a6dbbaee7dc5884845ddce">stateReqBytesReceived</a>);
    WATCH(<a class="code" href="classBasePastry.html#a6c7b5c6e2d71db0c8233b80764e63dc6">lastStateChange</a>);

    WATCH(<a class="code" href="classBasePastry.html#a26cf01f1f60f7c76ec071d551d2bc77e">leafsetReqSent</a>);
    WATCH(<a class="code" href="classBasePastry.html#ab200043644da860d9d8c260fb6735053">leafsetReqBytesSent</a>);
    WATCH(<a class="code" href="classBasePastry.html#a65d0531f806241a4f400613b1dd67384">leafsetReqReceived</a>);
    WATCH(<a class="code" href="classBasePastry.html#aa22c5ed0a7bbaf3b2b3ffd2276496251">leafsetReqBytesReceived</a>);
    WATCH(<a class="code" href="classBasePastry.html#a4c18e956472b6109d8b7f6951af550b5">leafsetSent</a>);
    WATCH(<a class="code" href="classBasePastry.html#a4ac5815eec47ea1ec62a25e19dbaf806">leafsetBytesSent</a>);
    WATCH(<a class="code" href="classBasePastry.html#a966f88cf985632e3e28ff482c5e5d0a2">leafsetReceived</a>);
    WATCH(<a class="code" href="classBasePastry.html#a9bdc81ede316e30996bbee5c73f6b472">leafsetBytesReceived</a>);

    WATCH(<a class="code" href="classBasePastry.html#a30413da700f177a195a011a1e46f4627">routingTableReqSent</a>);
    WATCH(<a class="code" href="classBasePastry.html#a0fcc70cc77b501a0827ab426305b8675">routingTableReqBytesSent</a>);
    WATCH(<a class="code" href="classBasePastry.html#a9d8bb5f1b8e375adcf29601b06a26966">routingTableReqReceived</a>);
    WATCH(<a class="code" href="classBasePastry.html#ac130146fa13b0d04a15a25fdb2571ddd">routingTableReqBytesReceived</a>);
    WATCH(<a class="code" href="classBasePastry.html#a3636e71cd463bc25499528eba6550867">routingTableSent</a>);
    WATCH(<a class="code" href="classBasePastry.html#a2f65f4a9615955af25832d87f043bb40">routingTableBytesSent</a>);
    WATCH(<a class="code" href="classBasePastry.html#a93981f405e583d046c1609c075971c6c">routingTableReceived</a>);
    WATCH(<a class="code" href="classBasePastry.html#a74edb3cc83cb66d94e2f1dc3dd2c42f0">routingTableBytesReceived</a>);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8f9160fe1cf9e4050a417cfa7fc0711b"></a><!-- doxytag: member="BasePastry::changeState" ref="a8f9160fe1cf9e4050a417cfa7fc0711b" args="(int toState)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::changeState </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>toState</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>changes node state </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>toState</em>&nbsp;</td><td>state to change to </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classPastry.html#a2b363b914b911dcbc411da940efec08f">Pastry</a>.</p>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00289">289</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">baseChangeState()</a>.</p>

<p><div class="fragment"><pre class="fragment">{

}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1062cac20a1fd1c5368157fe2da8b8fb"></a><!-- doxytag: member="BasePastry::checkProxCache" ref="a1062cac20a1fd1c5368157fe2da8b8fb" args="(void)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BasePastry::checkProxCache </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>checks whether proxCache is complete, takes appropriate actions depending on the protocol state </p>

<p>Implemented in <a class="el" href="classPastry.html#a851bb0830162f5db79ef515f32c78465">Pastry</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00472">pingNodes()</a>, <a class="el" href="BasePastry_8cc_source.html#l00295">pingResponse()</a>, <a class="el" href="BasePastry_8cc_source.html#l00661">pingTimeout()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00375">proxCallback()</a>.</p>

</div>
</div>
<a class="anchor" id="a08fd91b569919795fe56f523ccef846b"></a><!-- doxytag: member="BasePastry::createLookup" ref="a08fd91b569919795fe56f523ccef846b" args="(RoutingType routingType=DEFAULT_ROUTING, const BaseOverlayMessage *msg=NULL, const cObject *dummy=NULL, bool appLookup=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAbstractLookup.html">AbstractLookup</a> * BasePastry::createLookup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551">RoutingType</a>&nbsp;</td>
          <td class="paramname"> <em>routingType</em> = <code>DEFAULT_ROUTING</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cObject *&nbsp;</td>
          <td class="paramname"> <em>dummy</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>appLookup</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l01212">1212</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00384">Bamboo::doGlobalTuning()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    assert(dummy == NULL);
    <a class="code" href="classPastryFindNodeExtData.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryFindNodeExtData</a>* findNodeExt =
        <span class="keyword">new</span> <a class="code" href="classPastryFindNodeExtData.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryFindNodeExtData</a>(<span class="stringliteral">&quot;findNodeExt&quot;</span>);

    <span class="keywordflow">if</span> (msg) {
        <span class="keyword">const</span> <a class="code" href="classPastryMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryMessage</a>* pmsg =
            <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classPastryMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryMessage</a>*<span class="keyword">&gt;</span>(msg-&gt;getEncapsulatedPacket());
        <span class="keywordflow">if</span> ((pmsg) &amp;&amp; (pmsg-&gt;<a class="code" href="classPastryMessage.html#a9e66d5e8500b6ad714cbbe3fa2078d73">getPastryMsgType</a>() == PASTRY_MSG_JOIN)) {
            <span class="keyword">const</span> <a class="code" href="classPastryJoinMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryJoinMessage</a>* jmsg =
                check_and_cast&lt;<span class="keyword">const</span> <a class="code" href="classPastryJoinMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryJoinMessage</a>*&gt;(pmsg);
            findNodeExt-&gt;<a class="code" href="classPastryFindNodeExtData.html#a48dc33430fdd88027b63b29e2d478ee1">setSendStateTo</a>(jmsg-&gt;<a class="code" href="classPastryJoinMessage.html#a30282b3d0a1413406fa4520c4df53a3f">getSendStateTo</a>());
            findNodeExt-&gt;<a class="code" href="classPastryFindNodeExtData.html#a1aa6c83e9fcd10444ebe94d798c80a7a">setJoinHopCount</a>(1);
        }
    }
    findNodeExt-&gt;setBitLength(<a class="code" href="PastryMessage__m_8h.html#a3194cc18d316439cb276491e29295c70">PASTRYFINDNODEEXTDATA_L</a>);

    <a class="code" href="classAbstractLookup.html" title="This class declares an abstract iterative lookup.">AbstractLookup</a>* newLookup = <a class="code" href="classBasePastry.html#a08fd91b569919795fe56f523ccef846b">BaseOverlay::createLookup</a>(routingType,
                                                          msg, findNodeExt,
                                                          appLookup);

    <span class="keyword">delete</span> findNodeExt;
    <span class="keywordflow">return</span> newLookup;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a89aba6ca97abfbe6baff748a19969d1e"></a><!-- doxytag: member="BasePastry::determineAliveTable" ref="a89aba6ca97abfbe6baff748a19969d1e" args="(const PastryStateMessage *stateMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::determineAliveTable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classPastryStateMessage.html">PastryStateMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>stateMsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>change the aliveTable to match the given stateMsg. </p>
<p>each node that's knowm to be dead from our neighborCache gets a value of PASTRY_PROX_INFINITE, all other nodes just get a value of 1 </p>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00537">537</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00481">Bamboo::handleStateMessage()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    uint32_t rt_size = stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a2abf365a56348d30b99e9733c6905065">getRoutingTableArraySize</a>();
    <a class="code" href="classBasePastry.html#a22e76d53e4ba89d63eca403923a46da8" title="Early update of leaf set: helper structure for marking known-dead nodes.">aliveTable</a>.<a class="code" href="structPastryStateMsgProximity.html#afc10e12f0e7f2806255ce8277ece0a62">pr_rt</a>.clear();
    <a class="code" href="classBasePastry.html#a22e76d53e4ba89d63eca403923a46da8" title="Early update of leaf set: helper structure for marking known-dead nodes.">aliveTable</a>.<a class="code" href="structPastryStateMsgProximity.html#afc10e12f0e7f2806255ce8277ece0a62">pr_rt</a>.resize(rt_size, 1);

    uint32_t ls_size = stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#ad792f9b41aee54969504dee46452252c">getLeafSetArraySize</a>();
    <a class="code" href="classBasePastry.html#a22e76d53e4ba89d63eca403923a46da8" title="Early update of leaf set: helper structure for marking known-dead nodes.">aliveTable</a>.<a class="code" href="structPastryStateMsgProximity.html#adbadfcad7fd962f6b3a12c003f873dfb">pr_ls</a>.clear();
    <a class="code" href="classBasePastry.html#a22e76d53e4ba89d63eca403923a46da8" title="Early update of leaf set: helper structure for marking known-dead nodes.">aliveTable</a>.<a class="code" href="structPastryStateMsgProximity.html#adbadfcad7fd962f6b3a12c003f873dfb">pr_ls</a>.resize(ls_size, 1);

    uint32_t ns_size = stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a88929cf3d5340cda73e6305c25714788">getNeighborhoodSetArraySize</a>();
    <a class="code" href="classBasePastry.html#a22e76d53e4ba89d63eca403923a46da8" title="Early update of leaf set: helper structure for marking known-dead nodes.">aliveTable</a>.<a class="code" href="structPastryStateMsgProximity.html#a564d4bd5da4adead22fc4ef02d9c1c91">pr_ns</a>.clear();
    <a class="code" href="classBasePastry.html#a22e76d53e4ba89d63eca403923a46da8" title="Early update of leaf set: helper structure for marking known-dead nodes.">aliveTable</a>.<a class="code" href="structPastryStateMsgProximity.html#a564d4bd5da4adead22fc4ef02d9c1c91">pr_ns</a>.resize(ns_size, 1);

    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; rt_size + ls_size + ns_size; i++) {
        <span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>* node;
        std::vector&lt;simtime_t&gt;::iterator tblPos;
        <span class="keywordflow">if</span> (i &lt; rt_size) {
            node = &amp;(stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a0e4a031d7e3a30bd94c3867d0862288e">getRoutingTable</a>(i));
            tblPos = <a class="code" href="classBasePastry.html#a22e76d53e4ba89d63eca403923a46da8" title="Early update of leaf set: helper structure for marking known-dead nodes.">aliveTable</a>.<a class="code" href="structPastryStateMsgProximity.html#afc10e12f0e7f2806255ce8277ece0a62">pr_rt</a>.begin() + i;
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( i &lt; (rt_size + ls_size) ) {
            node = &amp;(stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a27c65fc289c9baa8121a8be1977839cd">getLeafSet</a>(i - rt_size));
            tblPos = <a class="code" href="classBasePastry.html#a22e76d53e4ba89d63eca403923a46da8" title="Early update of leaf set: helper structure for marking known-dead nodes.">aliveTable</a>.<a class="code" href="structPastryStateMsgProximity.html#adbadfcad7fd962f6b3a12c003f873dfb">pr_ls</a>.begin() + (i - rt_size);
        } <span class="keywordflow">else</span> {
            node = &amp;(stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a359b5a6fff11286993c16b9eec3da15a">getNeighborhoodSet</a>(i - rt_size - ls_size));
            tblPos = <a class="code" href="classBasePastry.html#a22e76d53e4ba89d63eca403923a46da8" title="Early update of leaf set: helper structure for marking known-dead nodes.">aliveTable</a>.<a class="code" href="structPastryStateMsgProximity.html#a564d4bd5da4adead22fc4ef02d9c1c91">pr_ns</a>.begin() + (i - rt_size - ls_size);
        }
        <span class="keywordflow">if</span> (<a class="code" href="classBaseRpc.html#ad80237130dc2316d0d76ac6757c50f4f" title="pointer to the neighbor cache">neighborCache</a>-&gt;<a class="code" href="classNeighborCache.html#ab934be8fb503f9629cf6eb83e7d1b576" title="Gets the proximity of a node.">getProx</a>(*node, <a class="code" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccbaa7fa0fb5215e636f2694f8d021d44f8b">NEIGHBORCACHE_DEFAULT_IMMEDIATELY</a>) ==
                <a class="code" href="structProx.html#a5ded765f6344797ea0e9c35c85cd61af">Prox::PROX_TIMEOUT</a>) {
            *tblPos = PASTRY_PROX_INFINITE;
        }
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5508a66ddde5207ac255edfe042b69a5"></a><!-- doxytag: member="BasePastry::distance" ref="a5508a66ddde5207ac255edfe042b69a5" args="(const OverlayKey &amp;x, const OverlayKey &amp;y, bool useAlternative=false) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOverlayKey.html">OverlayKey</a> BasePastry::distance </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>useAlternative</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l01275">1275</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!useAlternative) <span class="keywordflow">return</span> <a class="code" href="classKeyRingMetric.html" title="OverlayKey Ring Metric.">KeyRingMetric</a>().distance(x, y);
    <span class="keywordflow">return</span> <a class="code" href="classKeyPrefixMetric.html" title="OverlayKey prefix metric.">KeyPrefixMetric</a>().distance(x, y);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3f8ba63e19c092f9ecf4d5ecb1817061"></a><!-- doxytag: member="BasePastry::findNode" ref="a3f8ba63e19c092f9ecf4d5ecb1817061" args="(const OverlayKey &amp;key, int numRedundantNodes, int numSiblings, BaseOverlayMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBaseKeySortedVector.html">NodeVector</a> * BasePastry::findNode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numRedundantNodes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numSiblings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l01100">1100</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ((numRedundantNodes &gt; <a class="code" href="classBasePastry.html#acad786a6138720f76e80ceb9a93d0e12">getMaxNumRedundantNodes</a>()) ||
        (numSiblings &gt; <a class="code" href="classBasePastry.html#a23fca1965b3c6240fdcfb19bbf8e5a02">getMaxNumSiblings</a>())) {

        opp_error(<span class="stringliteral">&quot;(Pastry::findNode()) numRedundantNodes or numSiblings &quot;</span>
                  <span class="stringliteral">&quot;too big!&quot;</span>);
    }
    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#a9fc77f87e2df109185d47c249886f176">totalLookups</a>++);

    <a class="code" href="classBaseKeySortedVector.html">NodeVector</a>* nextHops = <span class="keyword">new</span> <a class="code" href="NodeVector_8h.html#a442f90b66b22aa9fca51f83c5ce1b02b">NodeVector</a>(numRedundantNodes);

    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> != <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>) {
        <span class="keywordflow">return</span> nextHops;
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key.<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>() || <a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#aa525adf4fc0334d812fbb70a50b78ca5" title="checks if we are the closest node to key destination in the overlay">isClosestNode</a>(key)) {
        <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#ac765a923e7799daa443a1f4e1133bd01">responsibleLookups</a>++);
        nextHops-&gt;<a class="code" href="classBaseKeySortedVector.html#a3fdb759e6bb3232ec8ce9d572637429e" title="adds an element of type T in increasing order to the NodeVector and returns the position of the added...">add</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>);
    } <span class="keywordflow">else</span> {
        <span class="keyword">const</span> <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>* next = &amp;(<a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#a8d3bbe87fe682fc513a83df7a0d69f57" title="gets the final node according to the Pastry routing scheme.">getDestinationNode</a>(key));

        <span class="keywordflow">if</span> (next-&gt;<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>()) {
            next = &amp;(<a class="code" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a>-&gt;<a class="code" href="classPastryRoutingTable.html#a0a3497ae41535458b14e31be32d5f6fc" title="gets the next hop according to the Pastry routing scheme.">lookupNextHop</a>(key));
            <span class="keywordflow">if</span> (!next-&gt;<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>()) {
                <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#a42d36fb42f20de058871d74b8acd7b4c">routingTableLookups</a>++);
            }
        } <span class="keywordflow">else</span> {
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#ac765a923e7799daa443a1f4e1133bd01">responsibleLookups</a>++);
        }

        <span class="keywordflow">if</span> (next-&gt;<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>()) {
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#a7f32c7f9ffc03f346052ac50321d1858">closerNodeLookups</a>++);
            <span class="comment">// call findCloserNode() on all state objects</span>
            <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#a12816a6716823ebb8d4bcfe4d4667051">optimizeLookup</a>) {
                <span class="keyword">const</span> <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>* tmp;
                next = &amp;(<a class="code" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a>-&gt;<a class="code" href="classPastryRoutingTable.html#a9f43c06e0a2d98f01c9b3809da0efae6" title="try to find a node numerically closer to a given key with the same shared prefix as the current node ...">findCloserNode</a>(key, <span class="keyword">true</span>));
                tmp = &amp;(<a class="code" href="classBasePastry.html#a66df35d5ace03485bf20db2d2899a98f">neighborhoodSet</a>-&gt;<a class="code" href="classPastryNeighborhoodSet.html#aa17a22a731c6aba55fda5ac962df1de3" title="try to find a node numerically closer to a given key with the same shared prefix as the current node ...">findCloserNode</a>(key, <span class="keyword">true</span>));

                <span class="keywordflow">if</span> ((! tmp-&gt;<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>()) &amp;&amp;
                    (<a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryStateObject.html#ace8eed35caedb59412a49132c4538917" title="test a given NodeHandle if it is closer to a given destination">isCloser</a>(*tmp, key, *next))) {
                    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#ad0deec6321f756622cacaba04d26cdbe">closerNodeLookupsFromNeighborhood</a>++);
                    next = tmp;
                }

                tmp = &amp;(<a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#ae42c594976b0f7dbc1a24269b3cc6c89" title="try to find a node numerically closer to a given key with the same shared prefix as the current node ...">findCloserNode</a>(key, <span class="keyword">true</span>));
                <span class="keywordflow">if</span> ((! tmp-&gt;<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>()) &amp;&amp;
                    (<a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryStateObject.html#ace8eed35caedb59412a49132c4538917" title="test a given NodeHandle if it is closer to a given destination">isCloser</a>(*tmp, key, *next))) {
                    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#ad0deec6321f756622cacaba04d26cdbe">closerNodeLookupsFromNeighborhood</a>--);
                    next = tmp;
                }
            } <span class="keywordflow">else</span> {
                next = &amp;(<a class="code" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a>-&gt;<a class="code" href="classPastryRoutingTable.html#a9f43c06e0a2d98f01c9b3809da0efae6" title="try to find a node numerically closer to a given key with the same shared prefix as the current node ...">findCloserNode</a>(key));

                <span class="keywordflow">if</span> (next-&gt;<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>()) {
                    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#ad0deec6321f756622cacaba04d26cdbe">closerNodeLookupsFromNeighborhood</a>++);
                    next = &amp;(<a class="code" href="classBasePastry.html#a66df35d5ace03485bf20db2d2899a98f">neighborhoodSet</a>-&gt;<a class="code" href="classPastryNeighborhoodSet.html#aa17a22a731c6aba55fda5ac962df1de3" title="try to find a node numerically closer to a given key with the same shared prefix as the current node ...">findCloserNode</a>(key));
                }

                <span class="keywordflow">if</span> (next-&gt;<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>()) {
                    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#ad0deec6321f756622cacaba04d26cdbe">closerNodeLookupsFromNeighborhood</a>--);
                    next = &amp;(<a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#ae42c594976b0f7dbc1a24269b3cc6c89" title="try to find a node numerically closer to a given key with the same shared prefix as the current node ...">findCloserNode</a>(key));
                }
            }
        }

        <a class="code" href="classBasePastry.html#a49e37d403457478acc0d352904bf104d">iterativeJoinHook</a>(msg, !next-&gt;<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>());

        <span class="keywordflow">if</span> (!next-&gt;<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>()) {
            nextHops-&gt;<a class="code" href="classBaseKeySortedVector.html#a3fdb759e6bb3232ec8ce9d572637429e" title="adds an element of type T in increasing order to the NodeVector and returns the position of the added...">add</a>(*next);
        }
    }

    <span class="keywordtype">bool</span> err;

    <span class="comment">// if we&#39;re a sibling, return all numSiblings</span>
    <span class="keywordflow">if</span> ((numSiblings &gt;= 0) &amp;&amp; <a class="code" href="classBasePastry.html#aa8d7ea4daf5bb613fefc62a4da602f2b">isSiblingFor</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>, key, numSiblings, &amp;err)) {
        <span class="keywordflow">if</span> (err == <span class="keyword">false</span>) {
            <span class="keyword">delete</span> nextHops;
            <span class="keywordflow">return</span>  <a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#a8e35d7891d1a32e48fce420555ff2b4d">createSiblingVector</a>(key, numSiblings);
        }
    }

    <span class="keywordflow">if</span> (<span class="comment">/*(nextHops-&gt;size() &gt; 0) &amp;&amp;*/</span> (numRedundantNodes &gt; 1)) {

        <span class="comment">//memleak... comp should be a ptr and deleted in NodeVector::~NodeVector()...</span>
        <span class="comment">//KeyDistanceComparator&lt;KeyRingMetric&gt;* comp =</span>
        <span class="comment">//    new KeyDistanceComparator&lt;KeyRingMetric&gt;( key );</span>

        <a class="code" href="classKeyDistanceComparator.html" title="OverlayKey distance comparator.">KeyDistanceComparator&lt;KeyRingMetric&gt;</a> comp(key);
        <span class="comment">//KeyDistanceComparator&lt;KeyPrefixMetric&gt; comp(key);</span>
        <a class="code" href="classBaseKeySortedVector.html">NodeVector</a>* additionalHops = <span class="keyword">new</span> <a class="code" href="NodeVector_8h.html#a442f90b66b22aa9fca51f83c5ce1b02b">NodeVector</a>( numRedundantNodes, &amp;comp );

        <a class="code" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a>-&gt;<a class="code" href="classPastryRoutingTable.html#a0604bf72a6a6143d4cb8eb6a55e0b0f3">findCloserNodes</a>(key, additionalHops);
        <a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#a54cf1b5716243dc9ea4f840e3076c720">findCloserNodes</a>(key, additionalHops);
        <a class="code" href="classBasePastry.html#a66df35d5ace03485bf20db2d2899a98f">neighborhoodSet</a>-&gt;<a class="code" href="classPastryNeighborhoodSet.html#a1b15fe9598b91dbb26294ed6193235f2">findCloserNodes</a>(key, additionalHops);

        <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#a893a9f746f708dc4c66b5195e04a2f56">useRegularNextHop</a> &amp;&amp; (nextHops-&gt;size() &gt; 0) &amp;&amp;
            (*additionalHops)[0] != (*nextHops)[0]) {
            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; additionalHops-&gt;size(); i++) {
                <span class="keywordflow">if</span> ((*additionalHops)[i] != (*nextHops)[0])
                    nextHops-&gt;push_back((*additionalHops)[i]);
            }
            <span class="keyword">delete</span> additionalHops;
        } <span class="keywordflow">else</span> {
            <span class="keyword">delete</span> nextHops;
            <span class="keywordflow">return</span> additionalHops;
        }
    }
    <span class="keywordflow">return</span> nextHops;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa38739065522ad67152dd4ff604ef759"></a><!-- doxytag: member="BasePastry::finishOverlay" ref="aa38739065522ad67152dd4ff604ef759" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::finishOverlay </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l01004">1004</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">// remove this node from the bootstrap list</span>
    <span class="keywordflow">if</span> (!<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>()) <a class="code" href="classBaseOverlay.html#abe4dea93564123116c97d5c4721f0504" title="pointer to the BootstrapList module">bootstrapList</a>-&gt;<a class="code" href="classBootstrapList.html#ae3599c25687b302037e58d3ca68411cd">removeBootstrapNode</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>);

    <span class="comment">// collect statistics</span>
    simtime_t time = <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a610799ebfbf64696c59b811870cc8300">calcMeasuredLifetime</a>(<a class="code" href="classBaseOverlay.html#af0eebaddea732ee4ab4d247c388e62bd" title="simtime when the node has been created">creationTime</a>);
    <span class="keywordflow">if</span> (time &lt; <a class="code" href="classGlobalStatistics.html#a169810c78519b271f7e32fdc7c9fc641" title="minimum useful measured lifetime in seconds">GlobalStatistics::MIN_MEASURED</a>) <span class="keywordflow">return</span>;

    <span class="comment">// join statistics</span>
    <span class="comment">//if (joinTries &gt; joins)</span>
        <span class="comment">//std::cout &lt;&lt; thisNode &lt;&lt; &quot; jt:&quot; &lt;&lt; joinTries &lt;&lt; &quot; j:&quot; &lt;&lt; joins &lt;&lt; &quot; jts:&quot;</span>
        <span class="comment">//          &lt;&lt; joinTimeout-&gt;isScheduled() &lt;&lt; &quot; rws:&quot; &lt;&lt; readyWait-&gt;isScheduled()</span>
        <span class="comment">//          &lt;&lt; &quot; state:&quot; &lt;&lt; state &lt;&lt; &quot; time:&quot; &lt;&lt; time &lt;&lt; std::endl;</span>
    <span class="comment">// join is on the way...</span>
    <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#a0adf4d1d02388eec7de8b4d0206f7f2e">joinTries</a> &gt; 0 &amp;&amp; <a class="code" href="classBasePastry.html#a62c17b080a85d27ccdd85809c8f14503">joinTimeout</a>-&gt;isScheduled()) <a class="code" href="classBasePastry.html#a0adf4d1d02388eec7de8b4d0206f7f2e">joinTries</a>--;
    <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#a0adf4d1d02388eec7de8b4d0206f7f2e">joinTries</a> &gt; 0) {
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: join success ratio&quot;</span>, (<span class="keywordtype">double</span>)<a class="code" href="classBasePastry.html#acaa5d246e1e904b5196950d335673c94">joins</a> / (<span class="keywordtype">double</span>)<a class="code" href="classBasePastry.html#a0adf4d1d02388eec7de8b4d0206f7f2e">joinTries</a>);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: join tries&quot;</span>, joinTries);
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>) {
        <span class="comment">// nodes has joined in init-/transition-phase</span>
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: join success ratio&quot;</span>, 1);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: join tries&quot;</span>, 1);
    } <span class="keywordflow">else</span> {
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: join success ratio&quot;</span>, 0);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: join tries&quot;</span>, 1);
    }

    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: joins with missing replies from routing path/s&quot;</span>,
                                <a class="code" href="classBasePastry.html#a805e366ae01f6857dcb0e4a78c7e79d6">joinPartial</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: JOIN Messages seen/s&quot;</span>, <a class="code" href="classBasePastry.html#abfe72c7d75708d9e152375ecb708ce24">joinSeen</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of JOIN Messages seen/s&quot;</span>, <a class="code" href="classBasePastry.html#a8fb058e1e4991c923faf29ae72832c05">joinBytesSeen</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: JOIN Messages received/s&quot;</span>, <a class="code" href="classBasePastry.html#a3d1f5f390900492fb714e0f420ded63a">joinReceived</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of JOIN Messages received/s&quot;</span>,
                                <a class="code" href="classBasePastry.html#ab2be7f6fc3c97b1d93f43f083cff6f6a">joinBytesReceived</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: JOIN Messages sent/s&quot;</span>, <a class="code" href="classBasePastry.html#ae75ddd4630ea3004166c0283436af0e9">joinSent</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of JOIN Messages sent/s&quot;</span>, <a class="code" href="classBasePastry.html#a8bf579a017df30ccb1cf458a78a78f79">joinBytesSent</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: STATE Messages sent/s&quot;</span>, <a class="code" href="classBasePastry.html#aadec419a4c2560717f1db3e36866b837">stateSent</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of STATE Messages sent/s&quot;</span>, <a class="code" href="classBasePastry.html#a43218c86ea28a36b14f76b54b2ccea07">stateBytesSent</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: STATE Messages received/s&quot;</span>, <a class="code" href="classBasePastry.html#a26fa765c1f23635923477bc300637c4f">stateReceived</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of STATE Messages received/s&quot;</span>,
                                <a class="code" href="classBasePastry.html#a8783f5db146cf00be3a347e92c36505e">stateBytesReceived</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: REPAIR Requests sent/s&quot;</span>, <a class="code" href="classBasePastry.html#a5f05d5cba3283f9b1dd421b036959aff">repairReqSent</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of REPAIR Requests sent/s&quot;</span>,
                                <a class="code" href="classBasePastry.html#a9f02a29e59ff2af5c7af5b3a764e711a">repairReqBytesSent</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: REPAIR Requests received/s&quot;</span>, <a class="code" href="classBasePastry.html#a7dcde1eb4abe361da782106038325c04">repairReqReceived</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of REPAIR Requests received/s&quot;</span>,
                                <a class="code" href="classBasePastry.html#aee11180f103683fc2a55d4c8958078d0">repairReqBytesReceived</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: STATE Requests sent/s&quot;</span>, <a class="code" href="classBasePastry.html#addc36312daa0ac4c85e4e8d77ee17ae5">stateReqSent</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of STATE Requests sent/s&quot;</span>, <a class="code" href="classBasePastry.html#a79163b2c9ee6767a5844c10b3a273af2">stateReqBytesSent</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: STATE Requests received/s&quot;</span>, <a class="code" href="classBasePastry.html#a727d8089dc7486f5f835ec427554c9b2">stateReqReceived</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of STATE Requests received/s&quot;</span>,
                                <a class="code" href="classBasePastry.html#adca8e0ca12a6dbbaee7dc5884845ddce">stateReqBytesReceived</a> / time);

    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of STATE Requests received/s&quot;</span>,
                                <a class="code" href="classBasePastry.html#adca8e0ca12a6dbbaee7dc5884845ddce">stateReqBytesReceived</a> / time);

    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: total number of lookups&quot;</span>, <a class="code" href="classBasePastry.html#a9fc77f87e2df109185d47c249886f176">totalLookups</a>);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: responsible lookups&quot;</span>, <a class="code" href="classBasePastry.html#ac765a923e7799daa443a1f4e1133bd01">responsibleLookups</a>);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: lookups in routing table&quot;</span>, <a class="code" href="classBasePastry.html#a42d36fb42f20de058871d74b8acd7b4c">routingTableLookups</a>);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: lookups using closerNode()&quot;</span>, <a class="code" href="classBasePastry.html#a7f32c7f9ffc03f346052ac50321d1858">closerNodeLookups</a>);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: lookups using closerNode() with result from &quot;</span>
                                <span class="stringliteral">&quot;neighborhood set&quot;</span>, <a class="code" href="classBasePastry.html#ad0deec6321f756622cacaba04d26cdbe">closerNodeLookupsFromNeighborhood</a>);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: LEAFSET Requests sent/s&quot;</span>, <a class="code" href="classBasePastry.html#a26cf01f1f60f7c76ec071d551d2bc77e">leafsetReqSent</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of LEAFSET Requests sent/s&quot;</span>, <a class="code" href="classBasePastry.html#ab200043644da860d9d8c260fb6735053">leafsetReqBytesSent</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: LEAFSET Requests received/s&quot;</span>, <a class="code" href="classBasePastry.html#a65d0531f806241a4f400613b1dd67384">leafsetReqReceived</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of LEAFSET Requests received/s&quot;</span>,
                                <a class="code" href="classBasePastry.html#aa22c5ed0a7bbaf3b2b3ffd2276496251">leafsetReqBytesReceived</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: LEAFSET Messages sent/s&quot;</span>, <a class="code" href="classBasePastry.html#a4c18e956472b6109d8b7f6951af550b5">leafsetSent</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of LEAFSET Messages sent/s&quot;</span>, <a class="code" href="classBasePastry.html#a4ac5815eec47ea1ec62a25e19dbaf806">leafsetBytesSent</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: LEAFSET Messages received/s&quot;</span>, <a class="code" href="classBasePastry.html#a966f88cf985632e3e28ff482c5e5d0a2">leafsetReceived</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of LEAFSET Messages received/s&quot;</span>,
                                <a class="code" href="classBasePastry.html#a9bdc81ede316e30996bbee5c73f6b472">leafsetBytesReceived</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: ROUTING TABLE Requests sent/s&quot;</span>, <a class="code" href="classBasePastry.html#a30413da700f177a195a011a1e46f4627">routingTableReqSent</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of ROUTING TABLE Requests sent/s&quot;</span>, <a class="code" href="classBasePastry.html#a0fcc70cc77b501a0827ab426305b8675">routingTableReqBytesSent</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: ROUTING TABLE Requests received/s&quot;</span>, <a class="code" href="classBasePastry.html#a9d8bb5f1b8e375adcf29601b06a26966">routingTableReqReceived</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of ROUTING TABLE Requests received/s&quot;</span>,
                                <a class="code" href="classBasePastry.html#ac130146fa13b0d04a15a25fdb2571ddd">routingTableReqBytesReceived</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: ROUTING TABLE Messages sent/s&quot;</span>, <a class="code" href="classBasePastry.html#a3636e71cd463bc25499528eba6550867">routingTableSent</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of ROUTING TABLE Messages sent/s&quot;</span>, <a class="code" href="classBasePastry.html#a2f65f4a9615955af25832d87f043bb40">routingTableBytesSent</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: ROUTING TABLE Messages received/s&quot;</span>, <a class="code" href="classBasePastry.html#a93981f405e583d046c1609c075971c6c">routingTableReceived</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Pastry: bytes of ROUTING TABLE Messages received/s&quot;</span>,
                                <a class="code" href="classBasePastry.html#a74edb3cc83cb66d94e2f1dc3dd2c42f0">routingTableBytesReceived</a> / time);

}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a64142ec5a4c2536f6633c1a05dd30726"></a><!-- doxytag: member="BasePastry::getBitsPerDigit" ref="a64142ec5a4c2536f6633c1a05dd30726" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t BasePastry::getBitsPerDigit </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00134">134</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="classBasePastry.html#a80645aaa29443c4b7dc919d67fb7af81">bitsPerDigit</a>; };
</pre></div></p>

</div>
</div>
<a class="anchor" id="acad786a6138720f76e80ceb9a93d0e12"></a><!-- doxytag: member="BasePastry::getMaxNumRedundantNodes" ref="acad786a6138720f76e80ceb9a93d0e12" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BasePastry::getMaxNumRedundantNodes </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l01095">1095</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l01100">findNode()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)floor(<a class="code" href="classBasePastry.html#ac57a5211053260e898b18c252c293581">numberOfLeaves</a>);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a23fca1965b3c6240fdcfb19bbf8e5a02"></a><!-- doxytag: member="BasePastry::getMaxNumSiblings" ref="a23fca1965b3c6240fdcfb19bbf8e5a02" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BasePastry::getMaxNumSiblings </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l01090">1090</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l01100">findNode()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)floor(<a class="code" href="classBasePastry.html#ac57a5211053260e898b18c252c293581">numberOfLeaves</a> / 2.0);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a20890c824e8987e936a3997c3121aa23"></a><!-- doxytag: member="BasePastry::handleAppMessage" ref="a20890c824e8987e936a3997c3121aa23" args="(BaseOverlayMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::handleAppMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>processes messages from application </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>message from application </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00968">968</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keyword">delete</span> msg;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1ea1672c0d5c853e4d823a8095c672b5"></a><!-- doxytag: member="BasePastry::handleLeafsetMessage" ref="a1ea1672c0d5c853e4d823a8095c672b5" args="(PastryLeafsetMessage *msg, bool mergeSender=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::handleLeafsetMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPastryLeafsetMessage.html">PastryLeafsetMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>mergeSender</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>processes leafset messages, merging with own state tables </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>the pastry state message </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mergeSender</em>&nbsp;</td><td>should the sender also be merged </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00892">892</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00165">Bamboo::handleUDPMessage()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    uint32_t lsSize = msg-&gt;<a class="code" href="classPastryLeafsetMessage.html#a135fa5f4053605495e6c96fda2da6207">getLeafSetArraySize</a>();
    <a class="code" href="classPastryStateMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryStateMessage</a>* stateMsg;

    stateMsg = <span class="keyword">new</span> <a class="code" href="classPastryStateMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryStateMessage</a>(<span class="stringliteral">&quot;STATE&quot;</span>);
    stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a25b3219dabfe526aea8c5a1c3a8bed93">setTimestamp</a>(msg-&gt;<a class="code" href="classPastryLeafsetMessage.html#a061fd2a1a732752a56995e03421b2601">getTimestamp</a>());
    stateMsg-&gt;<a class="code" href="classPastryMessage.html#a35ce0a801eb70c11600258bb2dabf5be">setPastryMsgType</a>(<a class="code" href="PastryMessage__m_8h.html#aa40c6a04c877642da910442b18529d00a3fc217f62b60d4208e70416527c0bd83">PASTRY_MSG_STATE</a>);
    stateMsg-&gt;<a class="code" href="classBaseOverlayMessage.html#a46fd21016c6fad4f167d5510f0481f49">setStatType</a>(<a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfad7989a419a7028d382d7b6e6d17e88c5">MAINTENANCE_STAT</a>);
    stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a9778899b911fe623a773b4e17974fa65">setSender</a>(msg-&gt;<a class="code" href="classPastryLeafsetMessage.html#a5ec47532c707423c57064955a9fd0cbf">getSender</a>());
    stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#ac3f254bf54612f480dde0eef3a1204bf">setLeafSetArraySize</a>(lsSize);
    stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a78bd1834c1a5aa9e80321f55fd3d3cf1">setNeighborhoodSetArraySize</a>(0);
    stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a1432ce9c20f9ef89f14fa3fb1384d3f3">setRoutingTableArraySize</a>(0);

    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; lsSize; i++) {
        stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#ad8e9818e66d5e66ca42d2279245bdbfc">setLeafSet</a>(i, msg-&gt;<a class="code" href="classPastryLeafsetMessage.html#a205f40fcdaa84d30d9b634bd3023a152">getLeafSet</a>(i));
    }

    <span class="keywordflow">if</span> (mergeSender) {
        stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#ac3f254bf54612f480dde0eef3a1204bf">setLeafSetArraySize</a>(lsSize+1);
        stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#ad8e9818e66d5e66ca42d2279245bdbfc">setLeafSet</a>(lsSize, msg-&gt;<a class="code" href="classPastryLeafsetMessage.html#a5ec47532c707423c57064955a9fd0cbf">getSender</a>());
    }

    <a class="code" href="classBasePastry.html#a1172a453b44856e2fdd7a027f0d03833" title="processes state messages, merging with own state tables">handleStateMessage</a>(stateMsg);
    <span class="keyword">delete</span> msg;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="aad40d59a6828e343b9f8b64b702128fb"></a><!-- doxytag: member="BasePastry::handleRequestMessage" ref="aad40d59a6828e343b9f8b64b702128fb" args="(PastryRequestMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::handleRequestMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPastryRequestMessage.html">PastryRequestMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>processes state messages, merging with own state tables </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>the pastry state message </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00844">844</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00165">Bamboo::handleUDPMessage()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    assert(msg-&gt;<a class="code" href="classPastryRequestMessage.html#a0648200c598b91bfc7a911f01d16bc62">getSendStateTo</a>() != <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>);
    uint32_t reqtype = msg-&gt;<a class="code" href="classPastryRequestMessage.html#a9779c1cafc551f8897499f93c0a86c02">getPastryReqType</a>();
    <span class="keywordflow">if</span> (reqtype == <a class="code" href="PastryMessage__m_8h.html#aa40c6a04c877642da910442b18529d00a9754cb9213665759246e8d4698f527f4">PASTRY_REQ_REPAIR</a>) {
        <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#a7dcde1eb4abe361da782106038325c04">repairReqReceived</a>++; <a class="code" href="classBasePastry.html#aee11180f103683fc2a55d4c8958078d0">repairReqBytesReceived</a> +=
            msg-&gt;getByteLength());
        <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>)
            <a class="code" href="classBasePastry.html#a30a432a8117a6fd6d42f297f7c7113b3" title="send a PastryStateMessage directly to a node">sendStateTables</a>(msg-&gt;<a class="code" href="classPastryRequestMessage.html#a0648200c598b91bfc7a911f01d16bc62">getSendStateTo</a>(),
                            PASTRY_STATE_REPAIR);
        <span class="keywordflow">else</span>
            EV &lt;&lt; <span class="stringliteral">&quot;[BasePastry::handleRequestMessage() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
            &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
            &lt;&lt; <span class="stringliteral">&quot;    received repair request before reaching&quot;</span>
            &lt;&lt; <span class="stringliteral">&quot; READY state, dropping message!&quot;</span>
            &lt;&lt; endl;
        <span class="keyword">delete</span> msg;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (reqtype == <a class="code" href="PastryMessage__m_8h.html#aa40c6a04c877642da910442b18529d00a4d4daffa9327b1e1c9a57b79e92b7c83">PASTRY_REQ_STATE</a>) {
        <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#a727d8089dc7486f5f835ec427554c9b2">stateReqReceived</a>++; <a class="code" href="classBasePastry.html#adca8e0ca12a6dbbaee7dc5884845ddce">stateReqBytesReceived</a> +=
            msg-&gt;getByteLength());
        <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>)
            <a class="code" href="classBasePastry.html#a30a432a8117a6fd6d42f297f7c7113b3" title="send a PastryStateMessage directly to a node">sendStateTables</a>(msg-&gt;<a class="code" href="classPastryRequestMessage.html#a0648200c598b91bfc7a911f01d16bc62">getSendStateTo</a>());
        <span class="keywordflow">else</span>
            EV &lt;&lt; <span class="stringliteral">&quot;[BasePastry::handleRequestMessage() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
            &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
            &lt;&lt; <span class="stringliteral">&quot;    received state request before reaching&quot;</span>
            &lt;&lt; <span class="stringliteral">&quot; READY state, dropping message!&quot;</span>
            &lt;&lt; endl;
        <span class="keyword">delete</span> msg;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="PastryMessage__m_8h.html#aa40c6a04c877642da910442b18529d00aa1e0b92435e08d44a42f799bc904cd4d">PASTRY_REQ_LEAFSET</a>) {
        <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#a65d0531f806241a4f400613b1dd67384">leafsetReqReceived</a>++; <a class="code" href="classBasePastry.html#aa22c5ed0a7bbaf3b2b3ffd2276496251">leafsetReqBytesReceived</a> +=
            msg-&gt;getByteLength());
        <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>) {
            <a class="code" href="classBasePastry.html#a5bc3c9909b2b24250bc6697d2d15c48a" title="send the leafset to a node">sendLeafset</a>(msg-&gt;<a class="code" href="classPastryRequestMessage.html#a0648200c598b91bfc7a911f01d16bc62">getSendStateTo</a>());
        }
        <span class="keywordflow">else</span>
            EV &lt;&lt; <span class="stringliteral">&quot;[BasePastry::handleRequestMessage() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
            &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
            &lt;&lt; <span class="stringliteral">&quot;    received leafset request before reaching&quot;</span>
            &lt;&lt; <span class="stringliteral">&quot; READY state, dropping message!&quot;</span>
            &lt;&lt; endl;
        <span class="keyword">delete</span> msg;
    }

}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1172a453b44856e2fdd7a027f0d03833"></a><!-- doxytag: member="BasePastry::handleStateMessage" ref="a1172a453b44856e2fdd7a027f0d03833" args="(PastryStateMessage *msg)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BasePastry::handleStateMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPastryStateMessage.html">PastryStateMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>processes state messages, merging with own state tables </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>the pastry state message </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classPastry.html#a1dece33e7864cc0f823374daa28da6c9">Pastry</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00892">handleLeafsetMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="aa8d7ea4daf5bb613fefc62a4da602f2b"></a><!-- doxytag: member="BasePastry::isSiblingFor" ref="aa8d7ea4daf5bb613fefc62a4da602f2b" args="(const NodeHandle &amp;node, const OverlayKey &amp;key, int numSiblings, bool *err)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BasePastry::isSiblingFor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numSiblings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&nbsp;</td>
          <td class="paramname"> <em>err</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00919">919</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l01100">findNode()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (key.<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>())
        <a class="code" href="yang_8cc.html#adb989392f8aada21b0f7ec2f7a41dc00">error</a>(<span class="stringliteral">&quot;Pastry::isSiblingFor(): key is unspecified!&quot;</span>);

    <span class="keywordflow">if</span> ((numSiblings == 1) &amp;&amp; (node == <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>)) {
        <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#aa525adf4fc0334d812fbb70a50b78ca5" title="checks if we are the closest node to key destination in the overlay">isClosestNode</a>(key)) {
            *err = <span class="keyword">false</span>;
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        } <span class="keywordflow">else</span> {
            *err = <span class="keyword">false</span>;
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }

    <a class="code" href="classBaseKeySortedVector.html">NodeVector</a>* result =  <a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#a8e35d7891d1a32e48fce420555ff2b4d">createSiblingVector</a>(key, numSiblings);

    <span class="keywordflow">if</span> (result == NULL) {
        *err = <span class="keyword">true</span>;
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">if</span> (result-&gt;<a class="code" href="classBaseKeySortedVector.html#abf85609f6ad627b0fb6fe51c5ae91494" title="Searches for an OverlayKey in NodeVector and returns true, if it is found.">contains</a>(node.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>())) {
        <span class="keyword">delete</span> result;
        *err = <span class="keyword">false</span>;
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    } <span class="keywordflow">else</span> {
        <span class="keyword">delete</span> result;
        *err = <span class="keyword">true</span>;
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="comment">/*</span>
<span class="comment">      const NodeHandle&amp; dest = leafSet-&gt;getDestinationNode(key);</span>
<span class="comment">      if (!dest.isUnspecified()) {</span>
<span class="comment">      *err = false;</span>
<span class="comment">      return true;</span>
<span class="comment">      } else {</span>
<span class="comment"></span>
<span class="comment">      *err = true;</span>
<span class="comment">      return false;</span>
<span class="comment">      }</span>
<span class="comment">    */</span>
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a49e37d403457478acc0d352904bf104d"></a><!-- doxytag: member="BasePastry::iterativeJoinHook" ref="a49e37d403457478acc0d352904bf104d" args="(BaseOverlayMessage *msg, bool incrHopCount)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BasePastry::iterativeJoinHook </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>incrHopCount</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="classPastry.html#ac202a93b3945381918d13b92060ff1da">Pastry</a>.</p>

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00274">274</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l01100">findNode()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                      { };
</pre></div></p>

</div>
</div>
<a class="anchor" id="a71aa8137f8e2eaf0977a437d7d852189"></a><!-- doxytag: member="BasePastry::newLeafs" ref="a71aa8137f8e2eaf0977a437d7d852189" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::newLeafs </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classPastry.html" title="Pastry overlay module.">Pastry</a> API: send <a class="el" href="classBasePastry.html#a71aa8137f8e2eaf0977a437d7d852189" title="Pastry API: send newLeafs() to application if enabled.">newLeafs()</a> to application if enabled. </p>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00274">274</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00725">Pastry::handleFailedNode()</a>, <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>, <a class="el" href="Bamboo_8cc_source.html#l00481">Bamboo::handleStateMessage()</a>, and <a class="el" href="Pastry_8cc_source.html#l00975">Pastry::mergeState()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (! <a class="code" href="classBasePastry.html#ab8f4cd001646782d88dca94134ef0b20">enableNewLeafs</a>) <span class="keywordflow">return</span>;

    <a class="code" href="classPastryNewLeafsMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryNewLeafsMessage</a>* msg = <a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#a3d51346450731df0d955386d19f45f72" title="generates a newLeafs-message if LeafSet changed since last call to this method.">getNewLeafsMessage</a>();
    <span class="keywordflow">if</span> (msg) {
        send(msg, <span class="stringliteral">&quot;appOut&quot;</span>);
        EV &lt;&lt; <span class="stringliteral">&quot;[BasePastry::newLeafs() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    newLeafs() called.&quot;</span>
           &lt;&lt; endl;
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a445a74a2791f810975bf99b4ff7d9865"></a><!-- doxytag: member="BasePastry::pingNodes" ref="a445a74a2791f810975bf99b4ff7d9865" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::pingNodes </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ping all nodes in the pastry state message pointed to by private member stateCache </p>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00472">472</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00432">Bamboo::checkProxCache()</a>, <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>, <a class="el" href="Bamboo_8cc_source.html#l00481">Bamboo::handleStateMessage()</a>, and <a class="el" href="Pastry_8cc_source.html#l01296">Pastry::processState()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    EV &lt;&lt; <span class="stringliteral">&quot;[BasePastry::pingNodes() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
       &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]&quot;</span> &lt;&lt; endl;

    <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a> == NULL) <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;no state msg&quot;</span>);

    assert(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a> == NULL);
    <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a> = <span class="keyword">new</span> <a class="code" href="structPastryStateMsgProximity.html" title="struct-type for temporary proximity metrics to a STATE message">PastryStateMsgProximity</a>();

    uint32_t rt_size = <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a>-&gt;<a class="code" href="classPastryStateMessage.html#a2abf365a56348d30b99e9733c6905065">getRoutingTableArraySize</a>();
    <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#afc10e12f0e7f2806255ce8277ece0a62">pr_rt</a>.resize(rt_size, <a class="code" href="PastryTypes_8h.html#ac72c42e64b55779864ac448c6a71a0e2" title="value for undefined proximity:">PASTRY_PROX_UNDEF</a>);

    uint32_t ls_size = <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a>-&gt;<a class="code" href="classPastryStateMessage.html#ad792f9b41aee54969504dee46452252c">getLeafSetArraySize</a>();
    <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#adbadfcad7fd962f6b3a12c003f873dfb">pr_ls</a>.resize(ls_size, <a class="code" href="PastryTypes_8h.html#ac72c42e64b55779864ac448c6a71a0e2" title="value for undefined proximity:">PASTRY_PROX_UNDEF</a>);

    uint32_t ns_size = <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a>-&gt;<a class="code" href="classPastryStateMessage.html#a88929cf3d5340cda73e6305c25714788">getNeighborhoodSetArraySize</a>();
    <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#a564d4bd5da4adead22fc4ef02d9c1c91">pr_ns</a>.resize(ns_size, <a class="code" href="PastryTypes_8h.html#ac72c42e64b55779864ac448c6a71a0e2" title="value for undefined proximity:">PASTRY_PROX_UNDEF</a>);

    std::vector&lt; std::pair&lt;const NodeHandle*, PingContext*&gt; &gt; nodesToPing;
    <span class="comment">// set prox state</span>
    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; rt_size + ls_size + ns_size; i++) {
        <span class="keyword">const</span> <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>* node;
        std::vector&lt;simtime_t&gt;::iterator proxPos;
        PingContext* pingContext = NULL;
        <a class="code" href="classBasePastry.html#a310811835376494807a09cd0a8d52eb7">StateObject</a> stateObject;
        uint32_t index;
        <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a> == NULL) <span class="keywordflow">break</span>;
        <span class="keywordflow">if</span> (i &lt; rt_size) {
            node = &amp;(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a>-&gt;<a class="code" href="classPastryStateMessage.html#a0e4a031d7e3a30bd94c3867d0862288e">getRoutingTable</a>(i));
            proxPos = <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#afc10e12f0e7f2806255ce8277ece0a62">pr_rt</a>.begin() + i;
            stateObject = ROUTINGTABLE;
            index = i;
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( i &lt; (rt_size + ls_size) ) {
            node = &amp;(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a>-&gt;<a class="code" href="classPastryStateMessage.html#a27c65fc289c9baa8121a8be1977839cd">getLeafSet</a>(i - rt_size));
            proxPos = <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#adbadfcad7fd962f6b3a12c003f873dfb">pr_ls</a>.begin() + (i - rt_size);
            stateObject = LEAFSET;
            index = i - rt_size;
        } <span class="keywordflow">else</span> {
            node = &amp;(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a>-&gt;<a class="code" href="classPastryStateMessage.html#a359b5a6fff11286993c16b9eec3da15a">getNeighborhoodSet</a>(i - rt_size - ls_size));
            proxPos = <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#a564d4bd5da4adead22fc4ef02d9c1c91">pr_ns</a>.begin() + (i - rt_size - ls_size);
            stateObject = NEIGHBORHOODSET;
            index = i - rt_size - ls_size;
        }
        <span class="comment">// proximity is undefined for unspecified nodes:</span>
        <span class="keywordflow">if</span> (!node-&gt;<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>()) {
            pingContext = <span class="keyword">new</span> PingContext(stateObject, index,
                                          <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#af0e150b4085e24920cc0499b6a7c589f">nonce</a>);

            <a class="code" href="structProx.html">Prox</a> prox = <a class="code" href="classBaseRpc.html#ad80237130dc2316d0d76ac6757c50f4f" title="pointer to the neighbor cache">neighborCache</a>-&gt;<a class="code" href="classNeighborCache.html#ab934be8fb503f9629cf6eb83e7d1b576" title="Gets the proximity of a node.">getProx</a>(*node, <a class="code" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccba751bede7ee708c74811f4bd49ee74cea">NEIGHBORCACHE_DEFAULT</a>, -1,
                                               <span class="keyword">this</span>, pingContext);
            <span class="keywordflow">if</span> (prox == <a class="code" href="structProx.html#ae33fb924891e14e0161708bfadf8f033">Prox::PROX_SELF</a>) {
                *proxPos = 0;
            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (prox == <a class="code" href="structProx.html#a5ded765f6344797ea0e9c35c85cd61af">Prox::PROX_TIMEOUT</a>) {
                *proxPos = PASTRY_PROX_INFINITE;
            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (prox == <a class="code" href="structProx.html#aa7ac832a04fe61863222d8631526647b">Prox::PROX_UNKNOWN</a>) {
                *proxPos = PASTRY_PROX_PENDING;
            } <span class="keywordflow">else</span> {
                *proxPos = prox.<a class="code" href="structProx.html#aeb8eca3cac2c681c5e7f1060fcbd7b6f">proximity</a>;
            }
        }
    }
    <a class="code" href="classBasePastry.html#a1062cac20a1fd1c5368157fe2da8b8fb" title="checks whether proxCache is complete, takes appropriate actions depending on the protocol state...">checkProxCache</a>();
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a21405811849fbb5c83f9ce6227457b11"></a><!-- doxytag: member="BasePastry::pingResponse" ref="a21405811849fbb5c83f9ce6227457b11" args="(PingResponse *pingResponse, cPolymorphic *context, int rpcId, simtime_t rtt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::pingResponse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPingResponse.html">PingResponse</a> *&nbsp;</td>
          <td class="paramname"> <em>pingResponse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPolymorphic *&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rpcId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&nbsp;</td>
          <td class="paramname"> <em>rtt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="classPastry.html#a5d3a97713d0a9653e64d252297d41c15">Pastry</a>.</p>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00295">295</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    EV &lt;&lt; <span class="stringliteral">&quot;[BasePastry::pingResponse() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
       &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
       &lt;&lt; <span class="stringliteral">&quot;    Pong (or Ping-context from NeighborCache) received (from &quot;</span>
       &lt;&lt; msg-&gt;getSrcNode().getIp() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>
       &lt;&lt; endl;

    <span class="keyword">const</span> <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>&amp; src = msg-&gt;getSrcNode();
    assert(!src.<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>());

    <span class="comment">// merge single pinged nodes (bamboo global tuning)</span>
    <span class="keywordflow">if</span> (rpcId == <a class="code" href="classBasePastry.html#acd2b654814d77379002800161cd67981aaab166e746fb925df8707610d92af824">PING_SINGLE_NODE</a>) {
        <a class="code" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a>-&gt;<a class="code" href="classPastryRoutingTable.html#a92eb6e9176f873cb0a7106ce6e97a53e" title="merge a node in the IRoutingTable">mergeNode</a>(src, <a class="code" href="classBasePastry.html#af6e8cefc3c62e666203cfedea1532f04">proximityNeighborSelection</a> ?
                                     rtt : SimTime::getMaxTime());
        <span class="keywordflow">return</span>;
    }

    <span class="comment">/*// a node with the an equal ID has responded</span>
<span class="comment">    if ((src.getKey() == thisNode.getKey()) &amp;&amp; (src.getIp() != thisNode.getIp())) {</span>
<span class="comment">        EV &lt;&lt; &quot;[BasePastry::pingResponse() @ &quot; &lt;&lt; thisNode.getIp()</span>
<span class="comment">           &lt;&lt; &quot; (&quot; &lt;&lt; thisNode.getKey().toString(16) &lt;&lt; &quot;)]\n&quot;</span>
<span class="comment">           &lt;&lt; &quot;    a node with the an equal ID has responded, rejoining&quot; &lt;&lt; endl;</span>
<span class="comment">        delete context;</span>
<span class="comment">        //joinOverlay();</span>
<span class="comment">        return;</span>
<span class="comment">    }*/</span>

    <span class="keywordflow">if</span> (context != NULL &amp;&amp; <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a> &amp;&amp; <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>) {
        PingContext* pingContext = check_and_cast&lt;PingContext*&gt;(context);
        <span class="keywordflow">if</span> (pingContext-&gt;nonce != <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#af0e150b4085e24920cc0499b6a7c589f">nonce</a>) {
            <span class="keyword">delete</span> context;
            <span class="keywordflow">return</span>;
            <span class="comment">//throw cRuntimeError(&quot;response doesn&#39;t fit stateCache&quot;);</span>
        }
        <span class="keywordflow">switch</span> (pingContext-&gt;stateObject) {
            <span class="keywordflow">case</span> <a class="code" href="classBasePastry.html#a310811835376494807a09cd0a8d52eb7ade24a23c0404dd3ba4e22feb64fbdf3b">ROUTINGTABLE</a>: {
                <span class="comment">/*node = &amp;(stateCache.msg-&gt;getRoutingTable(pingContext-&gt;index));</span>
<span class="comment">                if((node-&gt;isUnspecified()) || (*node != src)) {</span>
<span class="comment">                    std::cout &lt;&lt; simTime() &lt;&lt; &quot; &quot; &lt;&lt; thisNode.getIp() &lt;&lt; &quot; rt: state from &quot;</span>
<span class="comment">                              &lt;&lt; stateCache.msg-&gt;getSender().getIp() &lt;&lt; &quot; *** failed: node &quot;</span>
<span class="comment">                              &lt;&lt; node-&gt;ip &lt;&lt; &quot; src &quot; &lt;&lt; src.getIp() &lt;&lt; std::endl;</span>
<span class="comment">                    break;</span>
<span class="comment">                }*/</span>
                *(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#afc10e12f0e7f2806255ce8277ece0a62">pr_rt</a>.begin() + pingContext-&gt;index) = rtt;
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">case</span> <a class="code" href="classBasePastry.html#a310811835376494807a09cd0a8d52eb7a9d6e5a7d1d4f7208eb485c882b3bcaed">LEAFSET</a>: {
                <span class="comment">/*node = &amp;(stateCache.msg-&gt;getLeafSet(pingContext-&gt;index));</span>
<span class="comment">                if ((node-&gt;isUnspecified()) || (*node != src)) {</span>
<span class="comment">                    std::cout &lt;&lt; simTime() &lt;&lt; &quot; &quot; &lt;&lt; thisNode.getIp() &lt;&lt; &quot; ls: state from &quot;</span>
<span class="comment">                              &lt;&lt; stateCache.msg-&gt;getSender().getIp() &lt;&lt; &quot; *** failed: node &quot;</span>
<span class="comment">                              &lt;&lt; node-&gt;ip &lt;&lt; &quot; src &quot; &lt;&lt; src.getIp() &lt;&lt; std::endl;</span>
<span class="comment">                    break;</span>
<span class="comment">                }*/</span>
                *(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#adbadfcad7fd962f6b3a12c003f873dfb">pr_ls</a>.begin() + pingContext-&gt;index) = rtt;
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">case</span> <a class="code" href="classBasePastry.html#a310811835376494807a09cd0a8d52eb7a544fe8f97d7d893510ac4c658ec4faba">NEIGHBORHOODSET</a>: {
                <span class="comment">/*node = &amp;(stateCache.msg-&gt;getNeighborhoodSet(pingContext-&gt;index));</span>
<span class="comment">                if((node-&gt;isUnspecified()) || (*node != src)) {</span>
<span class="comment">                    std::cout &lt;&lt; simTime() &lt;&lt; &quot; &quot; &lt;&lt; thisNode.getIp() &lt;&lt; &quot; ns: state from &quot;</span>
<span class="comment">                              &lt;&lt; stateCache.msg-&gt;getSender().getIp() &lt;&lt; &quot; *** failed: node &quot;</span>
<span class="comment">                              &lt;&lt; node-&gt;ip &lt;&lt; &quot; src &quot; &lt;&lt; src.getIp() &lt;&lt; std::endl;</span>
<span class="comment">                    break;</span>
<span class="comment">                }*/</span>
                *(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#a564d4bd5da4adead22fc4ef02d9c1c91">pr_ns</a>.begin() + pingContext-&gt;index) = rtt;
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">default</span>: {
                <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;wrong state object type!&quot;</span>);
            }
        }
        <a class="code" href="classBasePastry.html#a1062cac20a1fd1c5368157fe2da8b8fb" title="checks whether proxCache is complete, takes appropriate actions depending on the protocol state...">checkProxCache</a>();
    }
    <span class="keyword">delete</span> context;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3c673aa6678b1466513a946cced620d0"></a><!-- doxytag: member="BasePastry::pingTimeout" ref="a3c673aa6678b1466513a946cced620d0" args="(PingCall *call, const TransportAddress &amp;dest, cPolymorphic *context, int rpcId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::pingTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPingCall.html">PingCall</a> *&nbsp;</td>
          <td class="paramname"> <em>call</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPolymorphic *&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rpcId</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00661">661</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    EV &lt;&lt; <span class="stringliteral">&quot;[BasePastry::sendStateDelayed() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
       &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
       &lt;&lt; <span class="stringliteral">&quot;    Ping timeout occurred (&quot;</span> &lt;&lt; dest.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>
       &lt;&lt; endl;

    <span class="comment">// handle failed node</span>
    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>) {
        <a class="code" href="classBaseOverlay.html#aa53ca4e1b4720ba0d2874afe29eacbf7" title="Handles a failed node.">handleFailedNode</a>(dest); <span class="comment">// TODO</span>
        <a class="code" href="classBasePastry.html#abc8da91d0187799f60bddb3ddab3e2f6" title="updates information shown in tk-environment">updateTooltip</a>();

        <span class="comment">// this could initiate a re-join, exit the handler in that</span>
        <span class="comment">// case because all local data was erased:</span>
        <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> != <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>) {
            <span class="keyword">delete</span> context;
            <span class="keywordflow">return</span>;
        }
    }

    <span class="comment">//TODO must be removed</span>
    <span class="keywordflow">if</span> (context &amp;&amp; <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a> &amp;&amp; <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a> &amp;&amp;
        rpcId == <a class="code" href="classBasePastry.html#acd2b654814d77379002800161cd67981a55b9f4bfbf94d107e8228d1ea9ec95b4">PING_RECEIVED_STATE</a>) {
        PingContext* pingContext = check_and_cast&lt;PingContext*&gt;(context);
        <span class="keywordflow">if</span> (pingContext-&gt;nonce != <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#af0e150b4085e24920cc0499b6a7c589f">nonce</a>) {
            <span class="keyword">delete</span> context;
            <span class="keywordflow">return</span>;
            <span class="comment">//std::stringstream temp;</span>
            <span class="comment">//temp &lt;&lt; thisNode &lt;&lt; &quot; timeout/call doesn&#39;t fit stateCache&quot;;</span>
            <span class="comment">//throw cRuntimeError(temp.str().c_str());</span>
        }
        <span class="comment">//const NodeHandle* node;</span>
        <span class="keywordflow">switch</span> (pingContext-&gt;stateObject) {
            <span class="keywordflow">case</span> <a class="code" href="classBasePastry.html#a310811835376494807a09cd0a8d52eb7ade24a23c0404dd3ba4e22feb64fbdf3b">ROUTINGTABLE</a>: {
                <span class="comment">/*if (pingContext-&gt;index &gt;=</span>
<span class="comment">                    stateCache.msg-&gt;getRoutingTableArraySize()) {</span>
<span class="comment">                    std::cout &lt;&lt; &quot;*** FAILED ***&quot; &lt;&lt; std::endl;</span>
<span class="comment">                    break;</span>
<span class="comment">                }</span>
<span class="comment">                node = &amp;(stateCache.msg-&gt;getRoutingTable(pingContext-&gt;index));</span>
<span class="comment">                if((node-&gt;isUnspecified()) || (dest != *node)) {</span>
<span class="comment">                    std::cout &lt;&lt; msg-&gt;getNonce() &lt;&lt; &quot; &quot; &lt;&lt; simTime() &lt;&lt; &quot; &quot; &lt;&lt; thisNode.getIp() &lt;&lt; &quot; rt: state from &quot;</span>
<span class="comment">                    &lt;&lt; stateCache.msg-&gt;getSender().getIp() &lt;&lt; &quot; *** failed: node &quot;</span>
<span class="comment">                    &lt;&lt; node-&gt;ip &lt;&lt; &quot; failed dest &quot; &lt;&lt; dest.getIp() &lt;&lt; std::endl;</span>
<span class="comment">                    break;</span>
<span class="comment">                }*/</span>
                *(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#afc10e12f0e7f2806255ce8277ece0a62">pr_rt</a>.begin() + pingContext-&gt;index) =
                    <a class="code" href="PastryTypes_8h.html#ac63315d5b1f74062305fa0ef8ad8c2f7" title="value for infinite proximity (ping timeout):">PASTRY_PROX_INFINITE</a>;
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">case</span> <a class="code" href="classBasePastry.html#a310811835376494807a09cd0a8d52eb7a9d6e5a7d1d4f7208eb485c882b3bcaed">LEAFSET</a>: {
                <span class="comment">/*if (pingContext-&gt;index &gt;=</span>
<span class="comment">                    stateCache.msg-&gt;getLeafSetArraySize()) {</span>
<span class="comment">                    std::cout &lt;&lt; &quot;*** FAILED ***&quot; &lt;&lt; std::endl;</span>
<span class="comment">                    break;</span>
<span class="comment">                }</span>
<span class="comment">                node = &amp;(stateCache.msg-&gt;getLeafSet(pingContext-&gt;index));</span>
<span class="comment">                if((node-&gt;isUnspecified()) || (dest != *node)) {</span>
<span class="comment">                    std::cout &lt;&lt; msg-&gt;getNonce() &lt;&lt; &quot; &quot; &lt;&lt; simTime() &lt;&lt; &quot; &quot; &lt;&lt; thisNode.getIp() &lt;&lt; &quot; ls: state from &quot;</span>
<span class="comment">                    &lt;&lt; stateCache.msg-&gt;getSender().getIp() &lt;&lt; &quot; *** failed: node &quot;</span>
<span class="comment">                    &lt;&lt; node-&gt;ip &lt;&lt; &quot; failed dest &quot; &lt;&lt; dest.getIp() &lt;&lt; std::endl;</span>
<span class="comment">                    break;</span>
<span class="comment">                }*/</span>
                *(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#adbadfcad7fd962f6b3a12c003f873dfb">pr_ls</a>.begin() + pingContext-&gt;index) =
                    <a class="code" href="PastryTypes_8h.html#ac63315d5b1f74062305fa0ef8ad8c2f7" title="value for infinite proximity (ping timeout):">PASTRY_PROX_INFINITE</a>;
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">case</span> <a class="code" href="classBasePastry.html#a310811835376494807a09cd0a8d52eb7a544fe8f97d7d893510ac4c658ec4faba">NEIGHBORHOODSET</a>: {
                <span class="comment">/*if (pingContext-&gt;index &gt;=</span>
<span class="comment">                    stateCache.msg-&gt;getNeighborhoodSetArraySize()) {</span>
<span class="comment">                    std::cout &lt;&lt; &quot;*** FAILED ***&quot; &lt;&lt; std::endl;</span>
<span class="comment">                    break;</span>
<span class="comment">                }</span>
<span class="comment">                node = &amp;(stateCache.msg-&gt;getNeighborhoodSet(pingContext-&gt;index));</span>
<span class="comment">                if((node-&gt;isUnspecified()) || (dest != *node)) {</span>
<span class="comment">                    std::cout &lt;&lt; msg-&gt;getNonce() &lt;&lt; &quot; &quot; &lt;&lt; simTime() &lt;&lt; &quot; &quot; &lt;&lt; thisNode.getIp() &lt;&lt; &quot; ns: state from &quot;</span>
<span class="comment">                    &lt;&lt; stateCache.msg-&gt;getSender().getIp() &lt;&lt; &quot; *** failed: node &quot;</span>
<span class="comment">                    &lt;&lt; node-&gt;ip &lt;&lt; &quot; failed dest &quot; &lt;&lt; dest.getIp() &lt;&lt; std::endl;</span>
<span class="comment">                    break;</span>
<span class="comment">                }*/</span>
                *(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#a564d4bd5da4adead22fc4ef02d9c1c91">pr_ns</a>.begin() + pingContext-&gt;index) =
                    <a class="code" href="PastryTypes_8h.html#ac63315d5b1f74062305fa0ef8ad8c2f7" title="value for infinite proximity (ping timeout):">PASTRY_PROX_INFINITE</a>;
                <span class="keywordflow">break</span>;
            }
        }
        <a class="code" href="classBasePastry.html#a1062cac20a1fd1c5368157fe2da8b8fb" title="checks whether proxCache is complete, takes appropriate actions depending on the protocol state...">checkProxCache</a>();
    }

    <span class="keyword">delete</span> context;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="af6a7090deb645b1f79b33edb0409485c"></a><!-- doxytag: member="BasePastry::prePing" ref="af6a7090deb645b1f79b33edb0409485c" args="(const PastryStateMessage *stateMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::prePing </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classPastryStateMessage.html">PastryStateMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>stateMsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ping all nodes in a given state message. </p>
<p>this is called when a state message arrives while another one is still being processed. </p>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00439">439</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00650">Pastry::doSecondStage()</a>, <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00481">Bamboo::handleStateMessage()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    uint32_t rt_size = stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a2abf365a56348d30b99e9733c6905065">getRoutingTableArraySize</a>();
    uint32_t ls_size = stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#ad792f9b41aee54969504dee46452252c">getLeafSetArraySize</a>();
    uint32_t ns_size = stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a88929cf3d5340cda73e6305c25714788">getNeighborhoodSetArraySize</a>();

    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; rt_size + ls_size + ns_size; i++) {
        <span class="keyword">const</span> <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>* node;
        <span class="keywordflow">if</span> (i &lt; rt_size) {
            node = &amp;(stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a0e4a031d7e3a30bd94c3867d0862288e">getRoutingTable</a>(i));
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i &lt; (rt_size + ls_size) ) {
            node = &amp;(stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a27c65fc289c9baa8121a8be1977839cd">getLeafSet</a>(i - rt_size));
        }
        <span class="keywordflow">else</span> {
            node = &amp;(stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a359b5a6fff11286993c16b9eec3da15a">getNeighborhoodSet</a>(i - rt_size - ls_size));
        }
        <span class="keywordflow">if</span> ((node-&gt;<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>()) || (*node == <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>)) {
            <span class="keywordflow">continue</span>;
        }
        <span class="comment">/*if (node-&gt;key == thisNode.getKey()) {</span>
<span class="comment">            cerr &lt;&lt; &quot;Pastry Warning: Other node with same key found, &quot;</span>
<span class="comment">                &quot;restarting!&quot; &lt;&lt; endl;</span>
<span class="comment">            opp_error(&quot;TODO: Other node with same key found...&quot;);</span>
<span class="comment">            joinOverlay(); //segfault</span>
<span class="comment">            //return;</span>
<span class="comment">            continue;</span>
<span class="comment">        }*/</span>

        <a class="code" href="classBaseRpc.html#ad80237130dc2316d0d76ac6757c50f4f" title="pointer to the neighbor cache">neighborCache</a>-&gt;<a class="code" href="classNeighborCache.html#ab934be8fb503f9629cf6eb83e7d1b576" title="Gets the proximity of a node.">getProx</a>(*node, <a class="code" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccba751bede7ee708c74811f4bd49ee74cea">NEIGHBORCACHE_DEFAULT</a>, <a class="code" href="classBasePastry.html#acd2b654814d77379002800161cd67981a55b9f4bfbf94d107e8228d1ea9ec95b4">PING_RECEIVED_STATE</a>, <span class="keyword">this</span>, NULL);
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a62226300729854b429ae5d58c8d62ceb"></a><!-- doxytag: member="BasePastry::proxCallback" ref="a62226300729854b429ae5d58c8d62ceb" args="(const TransportAddress &amp;node, int rpcId, cPolymorphic *contextPointer, Prox prox)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::proxCallback </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rpcId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPolymorphic *&nbsp;</td>
          <td class="paramname"> <em>contextPointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structProx.html">Prox</a>&nbsp;</td>
          <td class="paramname"> <em>prox</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <a class="el" href="classProxListener.html#a9bf3b6acf121217a24a44cc2accfeeb3">ProxListener</a>.</p>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00375">375</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    Enter_Method(<span class="stringliteral">&quot;proxCallback()&quot;</span>);

    EV &lt;&lt; <span class="stringliteral">&quot;[BasePastry::proxCallback() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    Pong received (from &quot;</span>
           &lt;&lt; node.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>
           &lt;&lt; endl;

    <span class="keywordtype">double</span> rtt = ((prox == <a class="code" href="structProx.html#a5ded765f6344797ea0e9c35c85cd61af">Prox::PROX_TIMEOUT</a>) ? <a class="code" href="PastryTypes_8h.html#ac63315d5b1f74062305fa0ef8ad8c2f7" title="value for infinite proximity (ping timeout):">PASTRY_PROX_INFINITE</a>
                                               : prox.<a class="code" href="structProx.html#aeb8eca3cac2c681c5e7f1060fcbd7b6f">proximity</a>);

    <span class="comment">// merge single pinged nodes (bamboo global tuning)</span>
    <span class="keywordflow">if</span> (rpcId == <a class="code" href="classBasePastry.html#acd2b654814d77379002800161cd67981aaab166e746fb925df8707610d92af824">PING_SINGLE_NODE</a>) {
        <a class="code" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a>-&gt;<a class="code" href="classPastryRoutingTable.html#a92eb6e9176f873cb0a7106ce6e97a53e" title="merge a node in the IRoutingTable">mergeNode</a>((<span class="keyword">const</span> <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>&amp;)node,
                                <a class="code" href="classBasePastry.html#af6e8cefc3c62e666203cfedea1532f04">proximityNeighborSelection</a> ?
                                rtt : SimTime::getMaxTime());
        <span class="keyword">delete</span> contextPointer;
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">if</span> (contextPointer != NULL &amp;&amp; <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a> &amp;&amp; <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>) {
        PingContext* pingContext = check_and_cast&lt;PingContext*&gt;(contextPointer);

        <span class="keywordflow">if</span> (pingContext-&gt;nonce != <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#af0e150b4085e24920cc0499b6a7c589f">nonce</a>) {
            <span class="keyword">delete</span> contextPointer;
            <span class="keywordflow">return</span>;
        }
        <span class="comment">// handle failed node</span>
        <span class="keywordflow">if</span> (rtt == <a class="code" href="PastryTypes_8h.html#ac63315d5b1f74062305fa0ef8ad8c2f7" title="value for infinite proximity (ping timeout):">PASTRY_PROX_INFINITE</a> &amp;&amp; <a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a>== <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>) {
            <a class="code" href="classBaseOverlay.html#aa53ca4e1b4720ba0d2874afe29eacbf7" title="Handles a failed node.">handleFailedNode</a>(node); <span class="comment">// TODO</span>
            <a class="code" href="classBasePastry.html#abc8da91d0187799f60bddb3ddab3e2f6" title="updates information shown in tk-environment">updateTooltip</a>();

            <span class="comment">// this could initiate a re-join, exit the handler in that</span>
            <span class="comment">// case because all local data was erased:</span>
            <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> != <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>) {
                <span class="keyword">delete</span> contextPointer;
                <span class="keywordflow">return</span>;
            }
        }
        <span class="keywordflow">switch</span> (pingContext-&gt;stateObject) {
        <span class="keywordflow">case</span> <a class="code" href="classBasePastry.html#a310811835376494807a09cd0a8d52eb7ade24a23c0404dd3ba4e22feb64fbdf3b">ROUTINGTABLE</a>:
            *(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#afc10e12f0e7f2806255ce8277ece0a62">pr_rt</a>.begin() + pingContext-&gt;index) = rtt;
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="classBasePastry.html#a310811835376494807a09cd0a8d52eb7a9d6e5a7d1d4f7208eb485c882b3bcaed">LEAFSET</a>:
            *(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#adbadfcad7fd962f6b3a12c003f873dfb">pr_ls</a>.begin() + pingContext-&gt;index) = rtt;
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="classBasePastry.html#a310811835376494807a09cd0a8d52eb7a544fe8f97d7d893510ac4c658ec4faba">NEIGHBORHOODSET</a>:
            *(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#a564d4bd5da4adead22fc4ef02d9c1c91">pr_ns</a>.begin() + pingContext-&gt;index) = rtt;
            <span class="keywordflow">break</span>;

        <span class="keywordflow">default</span>:
            <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;wrong state object type!&quot;</span>);
        }
        <a class="code" href="classBasePastry.html#a1062cac20a1fd1c5368157fe2da8b8fb" title="checks whether proxCache is complete, takes appropriate actions depending on the protocol state...">checkProxCache</a>();
    }
    <span class="keyword">delete</span> contextPointer;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a72cdd5dde4fe7886068ebc35b4d96cea"></a><!-- doxytag: member="BasePastry::purgeVectors" ref="a72cdd5dde4fe7886068ebc35b4d96cea" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::purgeVectors </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>delete all information/messages caching vectors, used for restarting overlay or <a class="el" href="classBaseOverlay.html#aed7e3f36b2c70cbdb0e6daa32925917c" title="collects statistical data">finish()</a> </p>

<p>Reimplemented in <a class="el" href="classPastry.html#a8899e17ebdaf922877b308b6e6408feb">Pastry</a>.</p>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00040">40</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">baseChangeState()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00997">~BasePastry()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">// purge Queue for processing multiple STATE messages:</span>
    <span class="keywordflow">while</span> (! <a class="code" href="classBasePastry.html#a763ec48a49b047252ea3d758b335df70" title="Queue of state messages waiting to be processed in READY state.">stateCacheQueue</a>.empty()) {
        <span class="keyword">delete</span> <a class="code" href="classBasePastry.html#a763ec48a49b047252ea3d758b335df70" title="Queue of state messages waiting to be processed in READY state.">stateCacheQueue</a>.front().msg;
        <span class="keyword">delete</span> <a class="code" href="classBasePastry.html#a763ec48a49b047252ea3d758b335df70" title="Queue of state messages waiting to be processed in READY state.">stateCacheQueue</a>.front().prox;
        <a class="code" href="classBasePastry.html#a763ec48a49b047252ea3d758b335df70" title="Queue of state messages waiting to be processed in READY state.">stateCacheQueue</a>.pop();
    }

    <span class="comment">// delete cached state message:</span>
    <span class="keyword">delete</span> <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a>;
    <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a> = NULL;
    <span class="keyword">delete</span> <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>;
    <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a> = NULL;

    <span class="comment">// purge vector of waiting sendState messages:</span>
    <span class="keywordflow">if</span> (! <a class="code" href="classBasePastry.html#ada6bd66160f1bf192a2d4422b6f8d7b4">sendStateWait</a>.empty()) {
        <span class="keywordflow">for</span> (std::vector&lt;PastrySendState*&gt;::iterator it =
                 <a class="code" href="classBasePastry.html#ada6bd66160f1bf192a2d4422b6f8d7b4">sendStateWait</a>.begin(); it != <a class="code" href="classBasePastry.html#ada6bd66160f1bf192a2d4422b6f8d7b4">sendStateWait</a>.end(); it++) {
            <span class="keywordflow">if</span> ( (*it)-&gt;isScheduled() ) cancelEvent(*it);
            <span class="keyword">delete</span> *it;
        }
        <a class="code" href="classBasePastry.html#ada6bd66160f1bf192a2d4422b6f8d7b4">sendStateWait</a>.clear();
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5bc3c9909b2b24250bc6697d2d15c48a"></a><!-- doxytag: member="BasePastry::sendLeafset" ref="a5bc3c9909b2b24250bc6697d2d15c48a" args="(const TransportAddress &amp;tell, bool pull=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::sendLeafset </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>tell</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>pull</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>send the leafset to a node </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tell</em>&nbsp;</td><td>the node to send to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pull</em>&nbsp;</td><td>true requests his leafset </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00805">805</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00318">Bamboo::doLeafsetMaintenance()</a>, <a class="el" href="BasePastry_8cc_source.html#l00844">handleRequestMessage()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00165">Bamboo::handleUDPMessage()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (tell.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>())
        opp_error(<span class="stringliteral">&quot;Pastry::sendLeafset(): send leafset to &quot;</span>
                  <span class="stringliteral">&quot;unspecified node!&quot;</span>);

    <a class="code" href="classPastryLeafsetMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryLeafsetMessage</a>* msg = <span class="keyword">new</span> <a class="code" href="classPastryLeafsetMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryLeafsetMessage</a>(<span class="stringliteral">&quot;Leafset&quot;</span>);
    <span class="keywordflow">if</span> (pull) msg-&gt;<a class="code" href="classPastryMessage.html#a35ce0a801eb70c11600258bb2dabf5be">setPastryMsgType</a>(<a class="code" href="PastryMessage__m_8h.html#aa40c6a04c877642da910442b18529d00a5092b38982db1db0e073681b5bea653b">PASTRY_MSG_LEAFSET_PULL</a>);
    <span class="keywordflow">else</span> msg-&gt;<a class="code" href="classPastryMessage.html#a35ce0a801eb70c11600258bb2dabf5be">setPastryMsgType</a>(<a class="code" href="PastryMessage__m_8h.html#aa40c6a04c877642da910442b18529d00acf999654230db12963475fe7578f84d0">PASTRY_MSG_LEAFSET</a>);
    msg-&gt;<a class="code" href="classPastryLeafsetMessage.html#a9547f079d77a736d520abe1b5c04eafd">setTimestamp</a>(simTime());
    msg-&gt;<a class="code" href="classBaseOverlayMessage.html#a46fd21016c6fad4f167d5510f0481f49">setStatType</a>(<a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfad7989a419a7028d382d7b6e6d17e88c5">MAINTENANCE_STAT</a>);
    msg-&gt;<a class="code" href="classPastryLeafsetMessage.html#ae414a8510aec8202bef114582450e2fb">setSender</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>);
    msg-&gt;<a class="code" href="classPastryLeafsetMessage.html#a245c7f5793280b6739362423b5e0355b">setSendStateTo</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>);
    <a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#a86d0046df97f4d54384d2a0b3936c53e" title="dump content of the set to a PastryStateMessage">dumpToStateMessage</a>(msg);
    msg-&gt;setBitLength(<a class="code" href="PastryMessage__m_8h.html#af773c8f0dc1681c295ea9195dbdc7177">PASTRYLEAFSET_L</a>(msg));
    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#a4c18e956472b6109d8b7f6951af550b5">leafsetSent</a>++; <a class="code" href="classBasePastry.html#a4ac5815eec47ea1ec62a25e19dbaf806">leafsetBytesSent</a> += msg-&gt;getByteLength());
    <a class="code" href="classBaseOverlay.html#a124850e5bc8d81b3eb4f3aec75868449" title="Sends message to underlay.">sendMessageToUDP</a>(tell, msg);


}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ade0791a64218af84150f1da407732397"></a><!-- doxytag: member="BasePastry::sendRequest" ref="ade0791a64218af84150f1da407732397" args="(const TransportAddress &amp;ask, int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::sendRequest </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>ask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>send a request to a given node </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ask</em>&nbsp;</td><td>request from this node </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>specifies the data requested </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00755">755</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00149">Pastry::changeState()</a>, <a class="el" href="Pastry_8cc_source.html#l00765">Pastry::checkProxCache()</a>, <a class="el" href="Pastry_8cc_source.html#l00650">Pastry::doSecondStage()</a>, <a class="el" href="Pastry_8cc_source.html#l00725">Pastry::handleFailedNode()</a>, and <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    assert(ask != <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>);
    std::string msgName(<span class="stringliteral">&quot;Req: &quot;</span>);
    <span class="keywordflow">switch</span> (type) {
    <span class="keywordflow">case</span> <a class="code" href="PastryMessage__m_8h.html#aa40c6a04c877642da910442b18529d00a9754cb9213665759246e8d4698f527f4">PASTRY_REQ_REPAIR</a>:
        <span class="keywordflow">if</span> (ask.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>())
            <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Pastry::sendRequest(): asked for repair from &quot;</span>
                                <span class="stringliteral">&quot;unspecified node!&quot;</span>);
        msgName += <span class="stringliteral">&quot;Repair&quot;</span>;
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="PastryMessage__m_8h.html#aa40c6a04c877642da910442b18529d00a4d4daffa9327b1e1c9a57b79e92b7c83">PASTRY_REQ_STATE</a>:
        <span class="keywordflow">if</span> (ask.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>())
            <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Pastry::sendRequest(): asked for state from &quot;</span>
                                <span class="stringliteral">&quot;unspecified node!&quot;</span>);
        msgName += <span class="stringliteral">&quot;State&quot;</span>;
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="PastryMessage__m_8h.html#aa40c6a04c877642da910442b18529d00aa1e0b92435e08d44a42f799bc904cd4d">PASTRY_REQ_LEAFSET</a>:
        <span class="keywordflow">if</span> (ask.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>())
            <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Pastry::sendRequest(): asked for leafset from &quot;</span>
                  <span class="stringliteral">&quot;unspecified node!&quot;</span>);
        msgName += <span class="stringliteral">&quot;Leafset&quot;</span>;
        <span class="keywordflow">break</span>;
    }
    <a class="code" href="classPastryRequestMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryRequestMessage</a>* msg = <span class="keyword">new</span> <a class="code" href="classPastryRequestMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryRequestMessage</a>(msgName.c_str());
    msg-&gt;<a class="code" href="classPastryMessage.html#a35ce0a801eb70c11600258bb2dabf5be">setPastryMsgType</a>(<a class="code" href="PastryMessage__m_8h.html#aa40c6a04c877642da910442b18529d00ab425e857aeb7247b770716d6038fc527">PASTRY_MSG_REQ</a>);
    msg-&gt;<a class="code" href="classPastryRequestMessage.html#a90060ae1154e15f3b68bd72f02738c61">setPastryReqType</a>(type);
    msg-&gt;<a class="code" href="classBaseOverlayMessage.html#a46fd21016c6fad4f167d5510f0481f49">setStatType</a>(<a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfad7989a419a7028d382d7b6e6d17e88c5">MAINTENANCE_STAT</a>);
    msg-&gt;<a class="code" href="classPastryRequestMessage.html#ab8806edf0f6287a47d0b555740d0c8f3">setSendStateTo</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>);
    msg-&gt;setBitLength(<a class="code" href="PastryMessage__m_8h.html#ae6f8838f4c09a9f176dda3b83a34a51b">PASTRYREQ_L</a>(msg));
    <a class="code" href="classBaseOverlay.html#a124850e5bc8d81b3eb4f3aec75868449" title="Sends message to underlay.">sendMessageToUDP</a>(ask, msg); <span class="comment">//TODO RPCs</span>

    <span class="keywordflow">switch</span> (type) {
    <span class="keywordflow">case</span> <a class="code" href="PastryMessage__m_8h.html#aa40c6a04c877642da910442b18529d00a9754cb9213665759246e8d4698f527f4">PASTRY_REQ_REPAIR</a>:
        <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#a5f05d5cba3283f9b1dd421b036959aff">repairReqSent</a>++; <a class="code" href="classBasePastry.html#a9f02a29e59ff2af5c7af5b3a764e711a">repairReqBytesSent</a> += msg-&gt;getByteLength());
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="PastryMessage__m_8h.html#aa40c6a04c877642da910442b18529d00a4d4daffa9327b1e1c9a57b79e92b7c83">PASTRY_REQ_STATE</a>:
        <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#addc36312daa0ac4c85e4e8d77ee17ae5">stateReqSent</a>++; <a class="code" href="classBasePastry.html#a79163b2c9ee6767a5844c10b3a273af2">stateReqBytesSent</a> += msg-&gt;getByteLength());
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="PastryMessage__m_8h.html#aa40c6a04c877642da910442b18529d00aa1e0b92435e08d44a42f799bc904cd4d">PASTRY_REQ_LEAFSET</a>:
        <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#a26cf01f1f60f7c76ec071d551d2bc77e">leafsetReqSent</a>++; <a class="code" href="classBasePastry.html#ab200043644da860d9d8c260fb6735053">leafsetReqBytesSent</a> += msg-&gt;getByteLength());
        <span class="keywordflow">break</span>;
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a61fcc4fef7533577ee94b6c452627c0a"></a><!-- doxytag: member="BasePastry::sendRoutingRow" ref="a61fcc4fef7533577ee94b6c452627c0a" args="(const TransportAddress &amp;tell, int row)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::sendRoutingRow </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>tell</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>row</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>send a row of the routing table to a node </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tell</em>&nbsp;</td><td>the node to send to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>row</em>&nbsp;</td><td>the number of the row </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00826">826</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00165">Bamboo::handleUDPMessage()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (tell.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>())
        opp_error(<span class="stringliteral">&quot;Pastry::sendRoutingTable(): asked for routing Table from &quot;</span>
                  <span class="stringliteral">&quot;unspecified node!&quot;</span>);

    <a class="code" href="classPastryRoutingRowMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryRoutingRowMessage</a>* msg = <span class="keyword">new</span> <a class="code" href="classPastryRoutingRowMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryRoutingRowMessage</a>(<span class="stringliteral">&quot;Routing Row&quot;</span>);
    msg-&gt;<a class="code" href="classPastryMessage.html#a35ce0a801eb70c11600258bb2dabf5be">setPastryMsgType</a>(<a class="code" href="PastryMessage__m_8h.html#aa40c6a04c877642da910442b18529d00af6b2263d326f61d280fca5230df2ee82">PASTRY_MSG_RROW</a>);
    msg-&gt;<a class="code" href="classBaseOverlayMessage.html#a46fd21016c6fad4f167d5510f0481f49">setStatType</a>(<a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfad7989a419a7028d382d7b6e6d17e88c5">MAINTENANCE_STAT</a>);
    <span class="comment">//msg-&gt;setSendStateTo(thisNode);</span>
    msg-&gt;<a class="code" href="classPastryRoutingRowMessage.html#ab2e32a75c476854d8274b8f96d5402b7">setSender</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>);
    msg-&gt;<a class="code" href="classPastryRoutingRowMessage.html#af87a06250192dda1c228f379b8fe8ba9">setRow</a>(row);
    <a class="code" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a>-&gt;<a class="code" href="classPastryRoutingTable.html#a2a2385560da288a32fdc1ad9edd3339c" title="dump content of a single row of the routing table to a message">dumpRowToMessage</a>(msg, row);
    msg-&gt;setBitLength(<a class="code" href="PastryMessage__m_8h.html#a2725537d99fbc45ebe017177f6069344">PASTRYRTABLE_L</a>(msg));
    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#a3636e71cd463bc25499528eba6550867">routingTableSent</a>++; <a class="code" href="classBasePastry.html#a2f65f4a9615955af25832d87f043bb40">routingTableBytesSent</a> += msg-&gt;getByteLength());
    <a class="code" href="classBaseOverlay.html#a124850e5bc8d81b3eb4f3aec75868449" title="Sends message to underlay.">sendMessageToUDP</a>(tell, msg);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5aab2c66183579ae5d84524caddcdea0"></a><!-- doxytag: member="BasePastry::sendStateDelayed" ref="a5aab2c66183579ae5d84524caddcdea0" args="(const TransportAddress &amp;destination)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::sendStateDelayed </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>destination</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>send a standard state message with a small delay </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>destination</em>&nbsp;</td><td>destination node </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00653">653</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00765">Pastry::checkProxCache()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classPastrySendState.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastrySendState</a>* selfMsg = <span class="keyword">new</span> <a class="code" href="classPastrySendState.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastrySendState</a>(<span class="stringliteral">&quot;sendStateWait&quot;</span>);
    selfMsg-&gt;<a class="code" href="classPastrySendState.html#a3204fbdbc7c451412c8e8889288bda7d">setDest</a>(destination);
    <a class="code" href="classBasePastry.html#ada6bd66160f1bf192a2d4422b6f8d7b4">sendStateWait</a>.push_back(selfMsg);
    scheduleAt(simTime() + 0.0001, selfMsg);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a30a432a8117a6fd6d42f297f7c7113b3"></a><!-- doxytag: member="BasePastry::sendStateTables" ref="a30a432a8117a6fd6d42f297f7c7113b3" args="(const TransportAddress &amp;destination, int type=PASTRY_STATE_STD,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::sendStateTables </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>destination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em> = <code>PASTRY_STATE_STD</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>send a <a class="el" href="classPastryStateMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryStateMessage</a> directly to a node </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>destination</em>&nbsp;</td><td>destination node </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>the type of the state message to be sent </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>...</em>&nbsp;</td><td>additional arguments for some types: <br/>
 PASTRY_STATE_JOIN: <code>int</code> <em>hops</em> number of hops to destination node <br/>
 PASTRY_STATE_JOIN: <code>bool</code> <em>last</em> mark the state message to originate from closest node found <br/>
 PASTRY_STATE_UPDATE: <code>simtime_t*</code> <em>timestamp</em> pointer use this timestamp for the uptade message </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00571">571</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00617">Pastry::doJoinUpdate()</a>, <a class="el" href="Pastry_8cc_source.html#l00944">Pastry::endProcessingState()</a>, <a class="el" href="BasePastry_8cc_source.html#l00844">handleRequestMessage()</a>, <a class="el" href="Pastry_8cc_source.html#l00243">Pastry::handleTimerEvent()</a>, <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>, <a class="el" href="Pastry_8cc_source.html#l00591">Pastry::iterativeJoinHook()</a>, and <a class="el" href="Pastry_8cc_source.html#l00562">Pastry::recursiveRoutingHook()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (destination.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>() == <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>())
        opp_error(<span class="stringliteral">&quot;Pastry: trying to send state to self!&quot;</span>);

    <span class="keywordtype">int</span> hops = 0;
    <span class="keywordtype">bool</span> last = <span class="keyword">false</span>;
    simtime_t timestamp = 0;

    <span class="keywordflow">if</span> ((type == <a class="code" href="PastryMessage__m_8h.html#a36b8c7a9b6b9c184ab518606946446c7a2ca6c13943a398b19f55c7d53529ab4f">PASTRY_STATE_JOIN</a>) ||
        (type == PASTRY_STATE_MINJOIN) ||
        (type == <a class="code" href="PastryMessage__m_8h.html#a36b8c7a9b6b9c184ab518606946446c7a54b61d3690155bcd38468f1a14de088e">PASTRY_STATE_UPDATE</a>)) {
        <span class="comment">// additional parameters needed:</span>
        va_list ap;
        va_start(ap, type);
        <span class="keywordflow">if</span> (type == <a class="code" href="PastryMessage__m_8h.html#a36b8c7a9b6b9c184ab518606946446c7a2ca6c13943a398b19f55c7d53529ab4f">PASTRY_STATE_JOIN</a> || type == <a class="code" href="PastryMessage__m_8h.html#a36b8c7a9b6b9c184ab518606946446c7abfbb059d5d48ab5c68f49eb88464171d">PASTRY_STATE_MINJOIN</a>) {
            hops = va_arg(ap, <span class="keywordtype">int</span>);
            last = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(va_arg(ap, <span class="keywordtype">int</span>));
        } <span class="keywordflow">else</span> {
            timestamp = *va_arg(ap, simtime_t*);
        }
        va_end(ap);
    }

    <span class="comment">// create new state msg and set special fields for some types:</span>
    <a class="code" href="classPastryStateMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryStateMessage</a>* stateMsg;
    <span class="keywordflow">if</span> (type == <a class="code" href="PastryMessage__m_8h.html#a36b8c7a9b6b9c184ab518606946446c7a2ca6c13943a398b19f55c7d53529ab4f">PASTRY_STATE_JOIN</a> || type == <a class="code" href="PastryMessage__m_8h.html#a36b8c7a9b6b9c184ab518606946446c7abfbb059d5d48ab5c68f49eb88464171d">PASTRY_STATE_MINJOIN</a>) {
        stateMsg = <span class="keyword">new</span> <a class="code" href="classPastryStateMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryStateMessage</a>(<span class="stringliteral">&quot;STATE (Join)&quot;</span>);
        stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#ab2a1a89c09bb9ab2af6ac398d0b68060">setJoinHopCount</a>(hops);
        stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#aa6bc68ccaf1ec1e11b5202e4d655c77c">setLastHop</a>(last);
        stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a25b3219dabfe526aea8c5a1c3a8bed93">setTimestamp</a>(simTime());
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="PastryMessage__m_8h.html#a36b8c7a9b6b9c184ab518606946446c7a54b61d3690155bcd38468f1a14de088e">PASTRY_STATE_UPDATE</a>) {
        stateMsg = <span class="keyword">new</span> <a class="code" href="classPastryStateMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryStateMessage</a>(<span class="stringliteral">&quot;STATE (Update)&quot;</span>);
        EV &lt;&lt; <span class="stringliteral">&quot;[BasePastry::sendStateTables() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    sending state (update) to &quot;</span> &lt;&lt; destination
           &lt;&lt; endl;
        stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a25b3219dabfe526aea8c5a1c3a8bed93">setTimestamp</a>(timestamp);
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="PastryMessage__m_8h.html#a36b8c7a9b6b9c184ab518606946446c7a51f4659797b81e09bc35edfded346b7b">PASTRY_STATE_REPAIR</a>) {
        stateMsg = <span class="keyword">new</span> <a class="code" href="classPastryStateMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryStateMessage</a>(<span class="stringliteral">&quot;STATE (Repair)&quot;</span>);
        stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a25b3219dabfe526aea8c5a1c3a8bed93">setTimestamp</a>(timestamp);
        EV &lt;&lt; <span class="stringliteral">&quot;[BasePastry::sendStateTables() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    sending state (repair) to &quot;</span> &lt;&lt; destination
           &lt;&lt; endl;
    } <span class="keywordflow">else</span> {
        stateMsg = <span class="keyword">new</span> <a class="code" href="classPastryStateMessage.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">PastryStateMessage</a>(<span class="stringliteral">&quot;STATE&quot;</span>);
        EV &lt;&lt; <span class="stringliteral">&quot;[BasePastry::sendStateTables() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    sending state (standard) to &quot;</span> &lt;&lt; destination
           &lt;&lt; endl;
    }

    <span class="comment">// fill in standard content:</span>
    stateMsg-&gt;<a class="code" href="classPastryMessage.html#a35ce0a801eb70c11600258bb2dabf5be">setPastryMsgType</a>(<a class="code" href="PastryMessage__m_8h.html#aa40c6a04c877642da910442b18529d00a3fc217f62b60d4208e70416527c0bd83">PASTRY_MSG_STATE</a>);
    stateMsg-&gt;<a class="code" href="classBaseOverlayMessage.html#a46fd21016c6fad4f167d5510f0481f49">setStatType</a>(<a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfad7989a419a7028d382d7b6e6d17e88c5">MAINTENANCE_STAT</a>);
    stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#ae975186961523cda3e2a8d4973eb9ee3">setPastryStateMsgType</a>(type);
    stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a9778899b911fe623a773b4e17974fa65">setSender</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>);

    <span class="comment">// the following part of the new join works on the assumption, that the node</span>
    <span class="comment">// routing the join message is close to the joining node</span>
    <span class="comment">// therefore its switched on together with the discovery algorithm</span>
    <span class="keywordflow">if</span> (type == <a class="code" href="PastryMessage__m_8h.html#a36b8c7a9b6b9c184ab518606946446c7abfbb059d5d48ab5c68f49eb88464171d">PASTRY_STATE_MINJOIN</a>) {
        <span class="comment">//send just the needed row for new join protocol</span>
        <a class="code" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a>-&gt;<a class="code" href="classPastryRoutingTable.html#a2a2385560da288a32fdc1ad9edd3339c" title="dump content of a single row of the routing table to a message">dumpRowToMessage</a>(stateMsg, hops);
        <span class="keywordflow">if</span> (last) <a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#a86d0046df97f4d54384d2a0b3936c53e" title="dump content of the set to a PastryStateMessage">dumpToStateMessage</a>(stateMsg);
        <span class="keywordflow">else</span> stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#ac3f254bf54612f480dde0eef3a1204bf">setLeafSetArraySize</a>(0);
        <span class="keywordflow">if</span> (hops == 1) <a class="code" href="classBasePastry.html#a66df35d5ace03485bf20db2d2899a98f">neighborhoodSet</a>-&gt;<a class="code" href="classPastryNeighborhoodSet.html#a401ee530fc0a5b89cfc2ccda3a0a7250" title="dump content of the set to a PastryStateMessage">dumpToStateMessage</a>(stateMsg);
        <span class="keywordflow">else</span> stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a78bd1834c1a5aa9e80321f55fd3d3cf1">setNeighborhoodSetArraySize</a>(0);
    } <span class="keywordflow">else</span> {
        <a class="code" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a>-&gt;<a class="code" href="classPastryRoutingTable.html#a1d4e337dda181b732aa96cd5d5007a42" title="dump content of the table to a PastryStateMessage">dumpToStateMessage</a>(stateMsg);
        <a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#a86d0046df97f4d54384d2a0b3936c53e" title="dump content of the set to a PastryStateMessage">dumpToStateMessage</a>(stateMsg);
        <a class="code" href="classBasePastry.html#a66df35d5ace03485bf20db2d2899a98f">neighborhoodSet</a>-&gt;<a class="code" href="classPastryNeighborhoodSet.html#a401ee530fc0a5b89cfc2ccda3a0a7250" title="dump content of the set to a PastryStateMessage">dumpToStateMessage</a>(stateMsg);
    }

    <span class="comment">// send...</span>
    stateMsg-&gt;setBitLength(<a class="code" href="PastryMessage__m_8h.html#a106839fe14025799ce4116d15d14fed7">PASTRYSTATE_L</a>(stateMsg));
    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#aadec419a4c2560717f1db3e36866b837">stateSent</a>++; <a class="code" href="classBasePastry.html#a43218c86ea28a36b14f76b54b2ccea07">stateBytesSent</a> += stateMsg-&gt;getByteLength());
    <a class="code" href="classBaseOverlay.html#a124850e5bc8d81b3eb4f3aec75868449" title="Sends message to underlay.">sendMessageToUDP</a>(destination, stateMsg);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="abc8da91d0187799f60bddb3ddab3e2f6"></a><!-- doxytag: member="BasePastry::updateTooltip" ref="abc8da91d0187799f60bddb3ddab3e2f6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePastry::updateTooltip </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>updates information shown in tk-environment </p>

<p>Definition at line <a class="el" href="BasePastry_8cc_source.html#l00973">973</a> of file <a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">baseChangeState()</a>, <a class="el" href="Pastry_8cc_source.html#l00765">Pastry::checkProxCache()</a>, <a class="el" href="Bamboo_8cc_source.html#l00432">Bamboo::checkProxCache()</a>, <a class="el" href="Pastry_8cc_source.html#l00617">Pastry::doJoinUpdate()</a>, <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>, <a class="el" href="Bamboo_8cc_source.html#l00481">Bamboo::handleStateMessage()</a>, <a class="el" href="BasePastry_8cc_source.html#l00661">pingTimeout()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00375">proxCallback()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (ev.isGUI()) {
        std::stringstream ttString;

        <span class="comment">// show our predecessor and successor in tooltip</span>
        ttString &lt;&lt; <a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#aa6b310e05c4fd88e015092740665e98f" title="return predecessor node for visualizing">getPredecessor</a>() &lt;&lt; endl &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a> &lt;&lt; endl
                 &lt;&lt; <a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#ab613105c42c31ecf5b4353a213036b63" title="return successor node for visualizing">getSuccessor</a>();

        getParentModule()-&gt;getParentModule()-&gt;getDisplayString().
            setTagArg(<span class="stringliteral">&quot;tt&quot;</span>, 0, ttString.str().c_str());
        getParentModule()-&gt;getDisplayString().
            setTagArg(<span class="stringliteral">&quot;tt&quot;</span>, 0, ttString.str().c_str());
        getDisplayString().setTagArg(<span class="stringliteral">&quot;tt&quot;</span>, 0, ttString.str().c_str());

        <span class="comment">// draw arrows:</span>
        <a class="code" href="classTopologyVis.html#a4fe67c060004c8ca76658c7b41514a4a" title="Draws an arrow from this node to neighbor.">showOverlayNeighborArrow</a>(<a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#ab613105c42c31ecf5b4353a213036b63" title="return successor node for visualizing">getSuccessor</a>(), <span class="keyword">true</span>,
                                 <span class="stringliteral">&quot;m=m,50,0,50,0;ls=red,1&quot;</span>);
        <a class="code" href="classTopologyVis.html#a4fe67c060004c8ca76658c7b41514a4a" title="Draws an arrow from this node to neighbor.">showOverlayNeighborArrow</a>(<a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#aa6b310e05c4fd88e015092740665e98f" title="return predecessor node for visualizing">getPredecessor</a>(), <span class="keyword">false</span>,
                                 <span class="stringliteral">&quot;m=m,50,100,50,100;ls=green,1&quot;</span>);

    }
}
</pre></div></p>

</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="a4bdc4f15ad57b31d9045a408f5e40478"></a><!-- doxytag: member="BasePastry::PastryLeafSet" ref="a4bdc4f15ad57b31d9045a408f5e40478" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classPastryLeafSet.html">PastryLeafSet</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00366">366</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a22e76d53e4ba89d63eca403923a46da8"></a><!-- doxytag: member="BasePastry::aliveTable" ref="a22e76d53e4ba89d63eca403923a46da8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structPastryStateMsgProximity.html">PastryStateMsgProximity</a> <a class="el" href="classBasePastry.html#a22e76d53e4ba89d63eca403923a46da8">BasePastry::aliveTable</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Early update of leaf set: helper structure for marking known-dead nodes. </p>

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00235">235</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00537">determineAliveTable()</a>, <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00481">Bamboo::handleStateMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a26f8166e84753ec35921c7cff3ff10d9"></a><!-- doxytag: member="BasePastry::alwaysSendUpdate" ref="a26f8166e84753ec35921c7cff3ff10d9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBasePastry.html#a26f8166e84753ec35921c7cff3ff10d9">BasePastry::alwaysSendUpdate</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00204">204</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, and <a class="el" href="Pastry_8cc_source.html#l00944">Pastry::endProcessingState()</a>.</p>

</div>
</div>
<a class="anchor" id="a80645aaa29443c4b7dc919d67fb7af81"></a><!-- doxytag: member="BasePastry::bitsPerDigit" ref="a80645aaa29443c4b7dc919d67fb7af81" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classBasePastry.html#a80645aaa29443c4b7dc919d67fb7af81">BasePastry::bitsPerDigit</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00196">196</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">baseChangeState()</a>, <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00384">Bamboo::doGlobalTuning()</a>.</p>

</div>
</div>
<a class="anchor" id="af534020c5663e436cf28aa83a4a790c9"></a><!-- doxytag: member="BasePastry::bootstrapNode" ref="af534020c5663e436cf28aa83a4a790c9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTransportAddress.html">TransportAddress</a> <a class="el" href="classBasePastry.html#af534020c5663e436cf28aa83a4a790c9">BasePastry::bootstrapNode</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00217">217</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">baseChangeState()</a>, <a class="el" href="Pastry_8cc_source.html#l00149">Pastry::changeState()</a>, <a class="el" href="Bamboo_8cc_source.html#l00082">Bamboo::changeState()</a>, <a class="el" href="Pastry_8cc_source.html#l00134">Pastry::joinOverlay()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00069">Bamboo::joinOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="a7f32c7f9ffc03f346052ac50321d1858"></a><!-- doxytag: member="BasePastry::closerNodeLookups" ref="a7f32c7f9ffc03f346052ac50321d1858" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a7f32c7f9ffc03f346052ac50321d1858">BasePastry::closerNodeLookups</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00161">161</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01100">findNode()</a>, and <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="ad0deec6321f756622cacaba04d26cdbe"></a><!-- doxytag: member="BasePastry::closerNodeLookupsFromNeighborhood" ref="ad0deec6321f756622cacaba04d26cdbe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#ad0deec6321f756622cacaba04d26cdbe">BasePastry::closerNodeLookupsFromNeighborhood</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00162">162</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01100">findNode()</a>, and <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="ab8f4cd001646782d88dca94134ef0b20"></a><!-- doxytag: member="BasePastry::enableNewLeafs" ref="ab8f4cd001646782d88dca94134ef0b20" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBasePastry.html#ab8f4cd001646782d88dca94134ef0b20">BasePastry::enableNewLeafs</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00202">202</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00274">newLeafs()</a>.</p>

</div>
</div>
<a class="anchor" id="ab2be7f6fc3c97b1d93f43f083cff6f6a"></a><!-- doxytag: member="BasePastry::joinBytesReceived" ref="ab2be7f6fc3c97b1d93f43f083cff6f6a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#ab2be7f6fc3c97b1d93f43f083cff6f6a">BasePastry::joinBytesReceived</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00143">143</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a8fb058e1e4991c923faf29ae72832c05"></a><!-- doxytag: member="BasePastry::joinBytesSeen" ref="a8fb058e1e4991c923faf29ae72832c05" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a8fb058e1e4991c923faf29ae72832c05">BasePastry::joinBytesSeen</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00141">141</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="Pastry_8cc_source.html#l00562">Pastry::recursiveRoutingHook()</a>.</p>

</div>
</div>
<a class="anchor" id="a8bf579a017df30ccb1cf458a78a78f79"></a><!-- doxytag: member="BasePastry::joinBytesSent" ref="a8bf579a017df30ccb1cf458a78a78f79" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a8bf579a017df30ccb1cf458a78a78f79">BasePastry::joinBytesSent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00145">145</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="Pastry_8cc_source.html#l00149">Pastry::changeState()</a>, and <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="a1a96c4a089fd9c1b21d7eb9c34d93580"></a><!-- doxytag: member="BasePastry::joinHopCount" ref="a1a96c4a089fd9c1b21d7eb9c34d93580" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classBasePastry.html#a1a96c4a089fd9c1b21d7eb9c34d93580">BasePastry::joinHopCount</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00243">243</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00149">Pastry::changeState()</a>, <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>, and <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a805e366ae01f6857dcb0e4a78c7e79d6"></a><!-- doxytag: member="BasePastry::joinPartial" ref="a805e366ae01f6857dcb0e4a78c7e79d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a805e366ae01f6857dcb0e4a78c7e79d6">BasePastry::joinPartial</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00139">139</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="Pastry_8cc_source.html#l00243">Pastry::handleTimerEvent()</a>.</p>

</div>
</div>
<a class="anchor" id="a3d1f5f390900492fb714e0f420ded63a"></a><!-- doxytag: member="BasePastry::joinReceived" ref="a3d1f5f390900492fb714e0f420ded63a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a3d1f5f390900492fb714e0f420ded63a">BasePastry::joinReceived</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00142">142</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="acaa5d246e1e904b5196950d335673c94"></a><!-- doxytag: member="BasePastry::joins" ref="acaa5d246e1e904b5196950d335673c94" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#acaa5d246e1e904b5196950d335673c94">BasePastry::joins</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00134">134</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">baseChangeState()</a>, <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, and <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="abfe72c7d75708d9e152375ecb708ce24"></a><!-- doxytag: member="BasePastry::joinSeen" ref="abfe72c7d75708d9e152375ecb708ce24" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#abfe72c7d75708d9e152375ecb708ce24">BasePastry::joinSeen</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00140">140</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, <a class="el" href="Pastry_8cc_source.html#l00591">Pastry::iterativeJoinHook()</a>, and <a class="el" href="Pastry_8cc_source.html#l00562">Pastry::recursiveRoutingHook()</a>.</p>

</div>
</div>
<a class="anchor" id="ae75ddd4630ea3004166c0283436af0e9"></a><!-- doxytag: member="BasePastry::joinSent" ref="ae75ddd4630ea3004166c0283436af0e9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#ae75ddd4630ea3004166c0283436af0e9">BasePastry::joinSent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00144">144</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="Pastry_8cc_source.html#l00149">Pastry::changeState()</a>, and <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="a62c17b080a85d27ccdd85809c8f14503"></a><!-- doxytag: member="BasePastry::joinTimeout" ref="a62c17b080a85d27ccdd85809c8f14503" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="classBasePastry.html#a62c17b080a85d27ccdd85809c8f14503">BasePastry::joinTimeout</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00244">244</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">baseChangeState()</a>, <a class="el" href="Pastry_8cc_source.html#l00149">Pastry::changeState()</a>, <a class="el" href="Bamboo_8cc_source.html#l00082">Bamboo::changeState()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>, <a class="el" href="Pastry_8cc_source.html#l00243">Pastry::handleTimerEvent()</a>, <a class="el" href="Bamboo_8cc_source.html#l00131">Bamboo::handleTimerEvent()</a>, <a class="el" href="Bamboo_8cc_source.html#l00165">Bamboo::handleUDPMessage()</a>, <a class="el" href="Pastry_8cc_source.html#l00080">Pastry::initializeOverlay()</a>, <a class="el" href="Bamboo_8cc_source.html#l00048">Bamboo::initializeOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00997">~BasePastry()</a>.</p>

</div>
</div>
<a class="anchor" id="a596fc6a02d7b78a6bf804d08cbf73844"></a><!-- doxytag: member="BasePastry::joinTimeoutAmount" ref="a596fc6a02d7b78a6bf804d08cbf73844" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classBasePastry.html#a596fc6a02d7b78a6bf804d08cbf73844">BasePastry::joinTimeoutAmount</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00200">200</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">baseChangeState()</a>, <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="Pastry_8cc_source.html#l00149">Pastry::changeState()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00082">Bamboo::changeState()</a>.</p>

</div>
</div>
<a class="anchor" id="a0adf4d1d02388eec7de8b4d0206f7f2e"></a><!-- doxytag: member="BasePastry::joinTries" ref="a0adf4d1d02388eec7de8b4d0206f7f2e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a0adf4d1d02388eec7de8b4d0206f7f2e">BasePastry::joinTries</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00138">138</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">baseChangeState()</a>, <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, and <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="a9375a2c0cdee0493f0ea7b4983825934"></a><!-- doxytag: member="BasePastry::joinUpdateWait" ref="a9375a2c0cdee0493f0ea7b4983825934" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="classBasePastry.html#a9375a2c0cdee0493f0ea7b4983825934">BasePastry::joinUpdateWait</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00246">246</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00149">Pastry::changeState()</a>, <a class="el" href="Pastry_8cc_source.html#l00243">Pastry::handleTimerEvent()</a>, <a class="el" href="Pastry_8cc_source.html#l00080">Pastry::initializeOverlay()</a>, and <a class="el" href="Pastry_8cc_source.html#l00041">Pastry::~Pastry()</a>.</p>

</div>
</div>
<a class="anchor" id="a6c7b5c6e2d71db0c8233b80764e63dc6"></a><!-- doxytag: member="BasePastry::lastStateChange" ref="a6c7b5c6e2d71db0c8233b80764e63dc6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="classBasePastry.html#a6c7b5c6e2d71db0c8233b80764e63dc6">BasePastry::lastStateChange</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00220">220</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">baseChangeState()</a>, <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="Pastry_8cc_source.html#l00765">Pastry::checkProxCache()</a>, <a class="el" href="Bamboo_8cc_source.html#l00432">Bamboo::checkProxCache()</a>, <a class="el" href="Pastry_8cc_source.html#l00944">Pastry::endProcessingState()</a>, <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>, <a class="el" href="Bamboo_8cc_source.html#l00481">Bamboo::handleStateMessage()</a>, and <a class="el" href="Pastry_8cc_source.html#l00975">Pastry::mergeState()</a>.</p>

</div>
</div>
<a class="anchor" id="a5216e2031a761a9aeaae0d330b00b741"></a><!-- doxytag: member="BasePastry::leaf2ask" ref="a5216e2031a761a9aeaae0d330b00b741" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTransportAddress.html">TransportAddress</a>* <a class="el" href="classBasePastry.html#a5216e2031a761a9aeaae0d330b00b741">BasePastry::leaf2ask</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00215">215</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

</div>
</div>
<a class="anchor" id="a72c95d72afcded1185c628646e4f819c"></a><!-- doxytag: member="BasePastry::leafSet" ref="a72c95d72afcded1185c628646e4f819c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPastryLeafSet.html">PastryLeafSet</a>* <a class="el" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">BasePastry::leafSet</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00250">250</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">baseChangeState()</a>, <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="Pastry_8cc_source.html#l00149">Pastry::changeState()</a>, <a class="el" href="Bamboo_8cc_source.html#l00082">Bamboo::changeState()</a>, <a class="el" href="Bamboo_8cc_source.html#l00318">Bamboo::doLeafsetMaintenance()</a>, <a class="el" href="Pastry_8cc_source.html#l00650">Pastry::doSecondStage()</a>, <a class="el" href="BasePastry_8cc_source.html#l01100">findNode()</a>, <a class="el" href="Pastry_8cc_source.html#l00725">Pastry::handleFailedNode()</a>, <a class="el" href="Bamboo_8cc_source.html#l00407">Bamboo::handleFailedNode()</a>, <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>, <a class="el" href="Bamboo_8cc_source.html#l00481">Bamboo::handleStateMessage()</a>, <a class="el" href="BasePastry_8cc_source.html#l00919">isSiblingFor()</a>, <a class="el" href="Pastry_8cc_source.html#l00975">Pastry::mergeState()</a>, <a class="el" href="BasePastry_8cc_source.html#l00274">newLeafs()</a>, <a class="el" href="BasePastry_8cc_source.html#l00805">sendLeafset()</a>, <a class="el" href="BasePastry_8cc_source.html#l00571">sendStateTables()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00973">updateTooltip()</a>.</p>

</div>
</div>
<a class="anchor" id="a9bdc81ede316e30996bbee5c73f6b472"></a><!-- doxytag: member="BasePastry::leafsetBytesReceived" ref="a9bdc81ede316e30996bbee5c73f6b472" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a9bdc81ede316e30996bbee5c73f6b472">BasePastry::leafsetBytesReceived</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00171">171</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00165">Bamboo::handleUDPMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a4ac5815eec47ea1ec62a25e19dbaf806"></a><!-- doxytag: member="BasePastry::leafsetBytesSent" ref="a4ac5815eec47ea1ec62a25e19dbaf806" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a4ac5815eec47ea1ec62a25e19dbaf806">BasePastry::leafsetBytesSent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00169">169</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="Bamboo_8cc_source.html#l00082">Bamboo::changeState()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00805">sendLeafset()</a>.</p>

</div>
</div>
<a class="anchor" id="a966f88cf985632e3e28ff482c5e5d0a2"></a><!-- doxytag: member="BasePastry::leafsetReceived" ref="a966f88cf985632e3e28ff482c5e5d0a2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a966f88cf985632e3e28ff482c5e5d0a2">BasePastry::leafsetReceived</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00170">170</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00165">Bamboo::handleUDPMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="aa22c5ed0a7bbaf3b2b3ffd2276496251"></a><!-- doxytag: member="BasePastry::leafsetReqBytesReceived" ref="aa22c5ed0a7bbaf3b2b3ffd2276496251" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#aa22c5ed0a7bbaf3b2b3ffd2276496251">BasePastry::leafsetReqBytesReceived</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00167">167</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00844">handleRequestMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="ab200043644da860d9d8c260fb6735053"></a><!-- doxytag: member="BasePastry::leafsetReqBytesSent" ref="ab200043644da860d9d8c260fb6735053" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#ab200043644da860d9d8c260fb6735053">BasePastry::leafsetReqBytesSent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00165">165</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00755">sendRequest()</a>.</p>

</div>
</div>
<a class="anchor" id="a65d0531f806241a4f400613b1dd67384"></a><!-- doxytag: member="BasePastry::leafsetReqReceived" ref="a65d0531f806241a4f400613b1dd67384" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a65d0531f806241a4f400613b1dd67384">BasePastry::leafsetReqReceived</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00166">166</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00844">handleRequestMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a26cf01f1f60f7c76ec071d551d2bc77e"></a><!-- doxytag: member="BasePastry::leafsetReqSent" ref="a26cf01f1f60f7c76ec071d551d2bc77e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a26cf01f1f60f7c76ec071d551d2bc77e">BasePastry::leafsetReqSent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00164">164</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00755">sendRequest()</a>.</p>

</div>
</div>
<a class="anchor" id="a4c18e956472b6109d8b7f6951af550b5"></a><!-- doxytag: member="BasePastry::leafsetSent" ref="a4c18e956472b6109d8b7f6951af550b5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a4c18e956472b6109d8b7f6951af550b5">BasePastry::leafsetSent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00168">168</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="Bamboo_8cc_source.html#l00082">Bamboo::changeState()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00805">sendLeafset()</a>.</p>

</div>
</div>
<a class="anchor" id="aaa36dc41f21d16f4e7a03e92911c17ab"></a><!-- doxytag: member="BasePastry::nearNode" ref="aaa36dc41f21d16f4e7a03e92911c17ab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNodeHandle.html">NodeHandle</a> <a class="el" href="classBasePastry.html#aaa36dc41f21d16f4e7a03e92911c17ab">BasePastry::nearNode</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00218">218</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00149">Pastry::changeState()</a>, <a class="el" href="Pastry_8cc_source.html#l00243">Pastry::handleTimerEvent()</a>, <a class="el" href="Pastry_8cc_source.html#l00134">Pastry::joinOverlay()</a>, and <a class="el" href="Pastry_8cc_source.html#l00221">Pastry::pingResponse()</a>.</p>

</div>
</div>
<a class="anchor" id="a4ac33dcce9d9a383a740d1227cff76aa"></a><!-- doxytag: member="BasePastry::nearNodeImproved" ref="a4ac33dcce9d9a383a740d1227cff76aa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBasePastry.html#a4ac33dcce9d9a383a740d1227cff76aa">BasePastry::nearNodeImproved</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00211">211</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00243">Pastry::handleTimerEvent()</a>, <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>, and <a class="el" href="Pastry_8cc_source.html#l00221">Pastry::pingResponse()</a>.</p>

</div>
</div>
<a class="anchor" id="a715b166d2b3b397e047908f52f354be7"></a><!-- doxytag: member="BasePastry::nearNodeRtt" ref="a715b166d2b3b397e047908f52f354be7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="classBasePastry.html#a715b166d2b3b397e047908f52f354be7">BasePastry::nearNodeRtt</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00208">208</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00149">Pastry::changeState()</a>, and <a class="el" href="Pastry_8cc_source.html#l00221">Pastry::pingResponse()</a>.</p>

</div>
</div>
<a class="anchor" id="a66df35d5ace03485bf20db2d2899a98f"></a><!-- doxytag: member="BasePastry::neighborhoodSet" ref="a66df35d5ace03485bf20db2d2899a98f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPastryNeighborhoodSet.html">PastryNeighborhoodSet</a>* <a class="el" href="classBasePastry.html#a66df35d5ace03485bf20db2d2899a98f">BasePastry::neighborhoodSet</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00251">251</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">baseChangeState()</a>, <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="Pastry_8cc_source.html#l00765">Pastry::checkProxCache()</a>, <a class="el" href="Bamboo_8cc_source.html#l00432">Bamboo::checkProxCache()</a>, <a class="el" href="Pastry_8cc_source.html#l00650">Pastry::doSecondStage()</a>, <a class="el" href="BasePastry_8cc_source.html#l01100">findNode()</a>, <a class="el" href="Pastry_8cc_source.html#l00725">Pastry::handleFailedNode()</a>, <a class="el" href="Bamboo_8cc_source.html#l00407">Bamboo::handleFailedNode()</a>, <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>, <a class="el" href="Bamboo_8cc_source.html#l00481">Bamboo::handleStateMessage()</a>, <a class="el" href="Pastry_8cc_source.html#l00975">Pastry::mergeState()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00571">sendStateTables()</a>.</p>

</div>
</div>
<a class="anchor" id="ac57a5211053260e898b18c252c293581"></a><!-- doxytag: member="BasePastry::numberOfLeaves" ref="ac57a5211053260e898b18c252c293581" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classBasePastry.html#ac57a5211053260e898b18c252c293581">BasePastry::numberOfLeaves</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00197">197</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">baseChangeState()</a>, <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01095">getMaxNumRedundantNodes()</a>, and <a class="el" href="BasePastry_8cc_source.html#l01090">getMaxNumSiblings()</a>.</p>

</div>
</div>
<a class="anchor" id="ace44a714008e5a5c1f373b7068396721"></a><!-- doxytag: member="BasePastry::numberOfNeighbors" ref="ace44a714008e5a5c1f373b7068396721" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classBasePastry.html#ace44a714008e5a5c1f373b7068396721">BasePastry::numberOfNeighbors</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00198">198</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">baseChangeState()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>.</p>

</div>
</div>
<a class="anchor" id="a12816a6716823ebb8d4bcfe4d4667051"></a><!-- doxytag: member="BasePastry::optimizeLookup" ref="a12816a6716823ebb8d4bcfe4d4667051" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBasePastry.html#a12816a6716823ebb8d4bcfe4d4667051">BasePastry::optimizeLookup</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00205">205</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, and <a class="el" href="BasePastry_8cc_source.html#l01100">findNode()</a>.</p>

</div>
</div>
<a class="anchor" id="a3bc59be1790c50873fb64c0e20bd047a"></a><!-- doxytag: member="BasePastry::periodicMaintenance" ref="a3bc59be1790c50873fb64c0e20bd047a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBasePastry.html#a3bc59be1790c50873fb64c0e20bd047a">BasePastry::periodicMaintenance</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00213">213</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

</div>
</div>
<a class="anchor" id="a773482c4b45374b82b35a72a4935574a"></a><!-- doxytag: member="BasePastry::pingedNodes" ref="a773482c4b45374b82b35a72a4935574a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classBasePastry.html#a773482c4b45374b82b35a72a4935574a">BasePastry::pingedNodes</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00210">210</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00243">Pastry::handleTimerEvent()</a>, and <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="af6e8cefc3c62e666203cfedea1532f04"></a><!-- doxytag: member="BasePastry::proximityNeighborSelection" ref="af6e8cefc3c62e666203cfedea1532f04" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBasePastry.html#af6e8cefc3c62e666203cfedea1532f04">BasePastry::proximityNeighborSelection</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00206">206</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>, <a class="el" href="Bamboo_8cc_source.html#l00481">Bamboo::handleStateMessage()</a>, <a class="el" href="Bamboo_8cc_source.html#l00552">Bamboo::lookupFinished()</a>, <a class="el" href="BasePastry_8cc_source.html#l00295">pingResponse()</a>, <a class="el" href="Pastry_8cc_source.html#l01296">Pastry::processState()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00375">proxCallback()</a>.</p>

</div>
</div>
<a class="anchor" id="a87b449a72607334387c2aa3a5d7673b2"></a><!-- doxytag: member="BasePastry::readyWait" ref="a87b449a72607334387c2aa3a5d7673b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="classBasePastry.html#a87b449a72607334387c2aa3a5d7673b2">BasePastry::readyWait</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00245">245</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00149">Pastry::changeState()</a>, <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>, <a class="el" href="Pastry_8cc_source.html#l00243">Pastry::handleTimerEvent()</a>, <a class="el" href="Pastry_8cc_source.html#l00080">Pastry::initializeOverlay()</a>, and <a class="el" href="Pastry_8cc_source.html#l00041">Pastry::~Pastry()</a>.</p>

</div>
</div>
<a class="anchor" id="a98b0c284102cd5f1fc78558937b9b19f"></a><!-- doxytag: member="BasePastry::readyWaitAmount" ref="a98b0c284102cd5f1fc78558937b9b19f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classBasePastry.html#a98b0c284102cd5f1fc78558937b9b19f">BasePastry::readyWaitAmount</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00199">199</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>, and <a class="el" href="Pastry_8cc_source.html#l00080">Pastry::initializeOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="aee11180f103683fc2a55d4c8958078d0"></a><!-- doxytag: member="BasePastry::repairReqBytesReceived" ref="aee11180f103683fc2a55d4c8958078d0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#aee11180f103683fc2a55d4c8958078d0">BasePastry::repairReqBytesReceived</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00153">153</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00844">handleRequestMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a9f02a29e59ff2af5c7af5b3a764e711a"></a><!-- doxytag: member="BasePastry::repairReqBytesSent" ref="a9f02a29e59ff2af5c7af5b3a764e711a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a9f02a29e59ff2af5c7af5b3a764e711a">BasePastry::repairReqBytesSent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00151">151</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00755">sendRequest()</a>.</p>

</div>
</div>
<a class="anchor" id="a7dcde1eb4abe361da782106038325c04"></a><!-- doxytag: member="BasePastry::repairReqReceived" ref="a7dcde1eb4abe361da782106038325c04" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a7dcde1eb4abe361da782106038325c04">BasePastry::repairReqReceived</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00152">152</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00844">handleRequestMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a5f05d5cba3283f9b1dd421b036959aff"></a><!-- doxytag: member="BasePastry::repairReqSent" ref="a5f05d5cba3283f9b1dd421b036959aff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a5f05d5cba3283f9b1dd421b036959aff">BasePastry::repairReqSent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00150">150</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00755">sendRequest()</a>.</p>

</div>
</div>
<a class="anchor" id="aa6d47b84748ac654eb8777abea92c984"></a><!-- doxytag: member="BasePastry::repairTimeout" ref="aa6d47b84748ac654eb8777abea92c984" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classBasePastry.html#aa6d47b84748ac654eb8777abea92c984">BasePastry::repairTimeout</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00201">201</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">baseChangeState()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>.</p>

</div>
</div>
<a class="anchor" id="ac765a923e7799daa443a1f4e1133bd01"></a><!-- doxytag: member="BasePastry::responsibleLookups" ref="ac765a923e7799daa443a1f4e1133bd01" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#ac765a923e7799daa443a1f4e1133bd01">BasePastry::responsibleLookups</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00159">159</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01100">findNode()</a>, and <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="a759c548b4bb1cb4f92b3a4b369cc8d02"></a><!-- doxytag: member="BasePastry::routingTable" ref="a759c548b4bb1cb4f92b3a4b369cc8d02" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPastryRoutingTable.html">PastryRoutingTable</a>* <a class="el" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">BasePastry::routingTable</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00249">249</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00196">baseChangeState()</a>, <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="Pastry_8cc_source.html#l00149">Pastry::changeState()</a>, <a class="el" href="Pastry_8cc_source.html#l00765">Pastry::checkProxCache()</a>, <a class="el" href="Bamboo_8cc_source.html#l00432">Bamboo::checkProxCache()</a>, <a class="el" href="Bamboo_8cc_source.html#l00356">Bamboo::doLocalTuning()</a>, <a class="el" href="Pastry_8cc_source.html#l00696">Pastry::doRoutingTableMaintenance()</a>, <a class="el" href="Pastry_8cc_source.html#l00650">Pastry::doSecondStage()</a>, <a class="el" href="BasePastry_8cc_source.html#l01100">findNode()</a>, <a class="el" href="Bamboo_8cc_source.html#l00330">Bamboo::getNextRowToMaintain()</a>, <a class="el" href="Pastry_8cc_source.html#l00725">Pastry::handleFailedNode()</a>, <a class="el" href="Bamboo_8cc_source.html#l00407">Bamboo::handleFailedNode()</a>, <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>, <a class="el" href="Bamboo_8cc_source.html#l00481">Bamboo::handleStateMessage()</a>, <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>, <a class="el" href="Bamboo_8cc_source.html#l00165">Bamboo::handleUDPMessage()</a>, <a class="el" href="Bamboo_8cc_source.html#l00552">Bamboo::lookupFinished()</a>, <a class="el" href="Pastry_8cc_source.html#l00975">Pastry::mergeState()</a>, <a class="el" href="BasePastry_8cc_source.html#l00295">pingResponse()</a>, <a class="el" href="BasePastry_8cc_source.html#l00375">proxCallback()</a>, <a class="el" href="BasePastry_8cc_source.html#l00826">sendRoutingRow()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00571">sendStateTables()</a>.</p>

</div>
</div>
<a class="anchor" id="a74edb3cc83cb66d94e2f1dc3dd2c42f0"></a><!-- doxytag: member="BasePastry::routingTableBytesReceived" ref="a74edb3cc83cb66d94e2f1dc3dd2c42f0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a74edb3cc83cb66d94e2f1dc3dd2c42f0">BasePastry::routingTableBytesReceived</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00180">180</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00165">Bamboo::handleUDPMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a2f65f4a9615955af25832d87f043bb40"></a><!-- doxytag: member="BasePastry::routingTableBytesSent" ref="a2f65f4a9615955af25832d87f043bb40" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a2f65f4a9615955af25832d87f043bb40">BasePastry::routingTableBytesSent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00178">178</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00826">sendRoutingRow()</a>.</p>

</div>
</div>
<a class="anchor" id="a42d36fb42f20de058871d74b8acd7b4c"></a><!-- doxytag: member="BasePastry::routingTableLookups" ref="a42d36fb42f20de058871d74b8acd7b4c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a42d36fb42f20de058871d74b8acd7b4c">BasePastry::routingTableLookups</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00160">160</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01100">findNode()</a>, and <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="a93981f405e583d046c1609c075971c6c"></a><!-- doxytag: member="BasePastry::routingTableReceived" ref="a93981f405e583d046c1609c075971c6c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a93981f405e583d046c1609c075971c6c">BasePastry::routingTableReceived</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00179">179</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00165">Bamboo::handleUDPMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="ac130146fa13b0d04a15a25fdb2571ddd"></a><!-- doxytag: member="BasePastry::routingTableReqBytesReceived" ref="ac130146fa13b0d04a15a25fdb2571ddd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#ac130146fa13b0d04a15a25fdb2571ddd">BasePastry::routingTableReqBytesReceived</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00176">176</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00165">Bamboo::handleUDPMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a0fcc70cc77b501a0827ab426305b8675"></a><!-- doxytag: member="BasePastry::routingTableReqBytesSent" ref="a0fcc70cc77b501a0827ab426305b8675" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a0fcc70cc77b501a0827ab426305b8675">BasePastry::routingTableReqBytesSent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00174">174</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="Bamboo_8cc_source.html#l00356">Bamboo::doLocalTuning()</a>, <a class="el" href="Pastry_8cc_source.html#l00696">Pastry::doRoutingTableMaintenance()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="Pastry_8cc_source.html#l00243">Pastry::handleTimerEvent()</a>.</p>

</div>
</div>
<a class="anchor" id="a9d8bb5f1b8e375adcf29601b06a26966"></a><!-- doxytag: member="BasePastry::routingTableReqReceived" ref="a9d8bb5f1b8e375adcf29601b06a26966" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a9d8bb5f1b8e375adcf29601b06a26966">BasePastry::routingTableReqReceived</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00175">175</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00165">Bamboo::handleUDPMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a30413da700f177a195a011a1e46f4627"></a><!-- doxytag: member="BasePastry::routingTableReqSent" ref="a30413da700f177a195a011a1e46f4627" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a30413da700f177a195a011a1e46f4627">BasePastry::routingTableReqSent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00173">173</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="Bamboo_8cc_source.html#l00356">Bamboo::doLocalTuning()</a>, <a class="el" href="Pastry_8cc_source.html#l00696">Pastry::doRoutingTableMaintenance()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="Pastry_8cc_source.html#l00243">Pastry::handleTimerEvent()</a>.</p>

</div>
</div>
<a class="anchor" id="a3636e71cd463bc25499528eba6550867"></a><!-- doxytag: member="BasePastry::routingTableSent" ref="a3636e71cd463bc25499528eba6550867" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a3636e71cd463bc25499528eba6550867">BasePastry::routingTableSent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00177">177</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00826">sendRoutingRow()</a>.</p>

</div>
</div>
<a class="anchor" id="ad649a2131c80eceecb309cb386b806a6"></a><!-- doxytag: member="BasePastry::rowToAsk" ref="ad649a2131c80eceecb309cb386b806a6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classBasePastry.html#ad649a2131c80eceecb309cb386b806a6">BasePastry::rowToAsk</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00181">181</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00356">Bamboo::doLocalTuning()</a>.</p>

</div>
</div>
<a class="anchor" id="ada6bd66160f1bf192a2d4422b6f8d7b4"></a><!-- doxytag: member="BasePastry::sendStateWait" ref="ada6bd66160f1bf192a2d4422b6f8d7b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classPastrySendState.html">PastrySendState</a>*&gt; <a class="el" href="classBasePastry.html#ada6bd66160f1bf192a2d4422b6f8d7b4">BasePastry::sendStateWait</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00247">247</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00243">Pastry::handleTimerEvent()</a>, <a class="el" href="BasePastry_8cc_source.html#l00040">purgeVectors()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00653">sendStateDelayed()</a>.</p>

</div>
</div>
<a class="anchor" id="a8783f5db146cf00be3a347e92c36505e"></a><!-- doxytag: member="BasePastry::stateBytesReceived" ref="a8783f5db146cf00be3a347e92c36505e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a8783f5db146cf00be3a347e92c36505e">BasePastry::stateBytesReceived</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00149">149</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00165">Bamboo::handleUDPMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a43218c86ea28a36b14f76b54b2ccea07"></a><!-- doxytag: member="BasePastry::stateBytesSent" ref="a43218c86ea28a36b14f76b54b2ccea07" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a43218c86ea28a36b14f76b54b2ccea07">BasePastry::stateBytesSent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00147">147</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00571">sendStateTables()</a>.</p>

</div>
</div>
<a class="anchor" id="a70d78d4ebef74ab2367fed00f77b2d65"></a><!-- doxytag: member="BasePastry::stateCache" ref="a70d78d4ebef74ab2367fed00f77b2d65" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structPastryStateMsgHandle.html">PastryStateMsgHandle</a> <a class="el" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65">BasePastry::stateCache</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle for processing a single state message. </p>

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00225">225</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="Pastry_8cc_source.html#l00765">Pastry::checkProxCache()</a>, <a class="el" href="Bamboo_8cc_source.html#l00432">Bamboo::checkProxCache()</a>, <a class="el" href="Pastry_8cc_source.html#l00053">Pastry::clearVectors()</a>, <a class="el" href="Pastry_8cc_source.html#l00650">Pastry::doSecondStage()</a>, <a class="el" href="Pastry_8cc_source.html#l00944">Pastry::endProcessingState()</a>, <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>, <a class="el" href="Bamboo_8cc_source.html#l00481">Bamboo::handleStateMessage()</a>, <a class="el" href="Pastry_8cc_source.html#l00243">Pastry::handleTimerEvent()</a>, <a class="el" href="Pastry_8cc_source.html#l00975">Pastry::mergeState()</a>, <a class="el" href="BasePastry_8cc_source.html#l00472">pingNodes()</a>, <a class="el" href="BasePastry_8cc_source.html#l00295">pingResponse()</a>, <a class="el" href="BasePastry_8cc_source.html#l00661">pingTimeout()</a>, <a class="el" href="Pastry_8cc_source.html#l01296">Pastry::processState()</a>, <a class="el" href="BasePastry_8cc_source.html#l00375">proxCallback()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00040">purgeVectors()</a>.</p>

</div>
</div>
<a class="anchor" id="a763ec48a49b047252ea3d758b335df70"></a><!-- doxytag: member="BasePastry::stateCacheQueue" ref="a763ec48a49b047252ea3d758b335df70" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::queue&lt;<a class="el" href="structPastryStateMsgHandle.html">PastryStateMsgHandle</a>&gt; <a class="el" href="classBasePastry.html#a763ec48a49b047252ea3d758b335df70">BasePastry::stateCacheQueue</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Queue of state messages waiting to be processed in READY state. </p>

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00230">230</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00432">Bamboo::checkProxCache()</a>, <a class="el" href="Pastry_8cc_source.html#l00650">Pastry::doSecondStage()</a>, <a class="el" href="Pastry_8cc_source.html#l00944">Pastry::endProcessingState()</a>, <a class="el" href="Pastry_8cc_source.html#l01071">Pastry::handleStateMessage()</a>, <a class="el" href="Bamboo_8cc_source.html#l00481">Bamboo::handleStateMessage()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00040">purgeVectors()</a>.</p>

</div>
</div>
<a class="anchor" id="a26fa765c1f23635923477bc300637c4f"></a><!-- doxytag: member="BasePastry::stateReceived" ref="a26fa765c1f23635923477bc300637c4f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a26fa765c1f23635923477bc300637c4f">BasePastry::stateReceived</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00148">148</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, <a class="el" href="Pastry_8cc_source.html#l00325">Pastry::handleUDPMessage()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00165">Bamboo::handleUDPMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="adca8e0ca12a6dbbaee7dc5884845ddce"></a><!-- doxytag: member="BasePastry::stateReqBytesReceived" ref="adca8e0ca12a6dbbaee7dc5884845ddce" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#adca8e0ca12a6dbbaee7dc5884845ddce">BasePastry::stateReqBytesReceived</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00157">157</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00844">handleRequestMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a79163b2c9ee6767a5844c10b3a273af2"></a><!-- doxytag: member="BasePastry::stateReqBytesSent" ref="a79163b2c9ee6767a5844c10b3a273af2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a79163b2c9ee6767a5844c10b3a273af2">BasePastry::stateReqBytesSent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00155">155</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00755">sendRequest()</a>.</p>

</div>
</div>
<a class="anchor" id="a727d8089dc7486f5f835ec427554c9b2"></a><!-- doxytag: member="BasePastry::stateReqReceived" ref="a727d8089dc7486f5f835ec427554c9b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a727d8089dc7486f5f835ec427554c9b2">BasePastry::stateReqReceived</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00156">156</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00844">handleRequestMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="addc36312daa0ac4c85e4e8d77ee17ae5"></a><!-- doxytag: member="BasePastry::stateReqSent" ref="addc36312daa0ac4c85e4e8d77ee17ae5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#addc36312daa0ac4c85e4e8d77ee17ae5">BasePastry::stateReqSent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00154">154</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00755">sendRequest()</a>.</p>

</div>
</div>
<a class="anchor" id="aadec419a4c2560717f1db3e36866b837"></a><!-- doxytag: member="BasePastry::stateSent" ref="aadec419a4c2560717f1db3e36866b837" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#aadec419a4c2560717f1db3e36866b837">BasePastry::stateSent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00146">146</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00571">sendStateTables()</a>.</p>

</div>
</div>
<a class="anchor" id="a9fc77f87e2df109185d47c249886f176"></a><!-- doxytag: member="BasePastry::totalLookups" ref="a9fc77f87e2df109185d47c249886f176" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBasePastry.html#a9fc77f87e2df109185d47c249886f176">BasePastry::totalLookups</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00158">158</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, <a class="el" href="BasePastry_8cc_source.html#l01100">findNode()</a>, and <a class="el" href="BasePastry_8cc_source.html#l01004">finishOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="a893a9f746f708dc4c66b5195e04a2f56"></a><!-- doxytag: member="BasePastry::useRegularNextHop" ref="a893a9f746f708dc4c66b5195e04a2f56" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBasePastry.html#a893a9f746f708dc4c66b5195e04a2f56">BasePastry::useRegularNextHop</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BasePastry_8h_source.html#l00203">203</a> of file <a class="el" href="BasePastry_8h_source.html">BasePastry.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00066">baseInit()</a>, and <a class="el" href="BasePastry_8cc_source.html#l01100">findNode()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="BasePastry_8h_source.html">BasePastry.h</a></li>
<li><a class="el" href="BasePastry_8cc_source.html">BasePastry.cc</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 3 2010 14:40:47 for OverSim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
